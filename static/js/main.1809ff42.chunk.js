(this["webpackJsonpmtg-collection"]=this["webpackJsonpmtg-collection"]||[]).push([[3],{101:function(e,n,t){"use strict";var r=t(13),a=t(10),c=t(241),i=t(38),o=t(8),u={serialize:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),u=1;u<n;u++)t[u-1]=arguments[u];return e&&""!==e?e.split("##").map((function(e,n){var t,r;if(0===n)t=o.e.Default,r=e.split(/\r?\n/);else{var a=e.split(/\r?\n/),u=Object(c.a)(a);t=u[0],r=u.slice(1)}return[t,r.map((function(e){return e.match(/^(\d*) +(.*?)(?: # (.*))?$/)})).filter((function(e){return!Object(i.isNull)(e)})).map((function(e){return{amount:parseInt(e[1]),name:e[2],comment:e[3]}}))]})).reduce((function(e,n){return Object(a.a)({},e,Object(r.a)({},n[0],n[1].reduce((function(e,n){return Object(a.a)({},e,Object(r.a)({},n.name,n))}),{})))}),o.c.apply(void 0,t)):o.c.apply(void 0,t)},deserialize:function(e){return Object.entries(e).reduce((function(e,n){return"".concat(e).concat(n[0]!==o.e.Default?"#".concat(n[0],"\n"):"").concat(Object.values(n[1]).reduce((function(e,n){return"".concat(e).concat(n.amount," ").concat(n.name).concat(n.comment?" # ".concat(n.comment):"","\n")}),""),"\n")}),"")}};n.a=u},109:function(e,n,t){"use strict";var r=t(7),a=t(289),c=t(284),i=t(39),o=t(14),u=t(0),l=t.n(u),s=t(6);function d(){var e=Object(r.a)(["\n                background-color: ",";\n            "]);return d=function(){return e},e}function f(){var e=Object(r.a)(["\n            background-color: ",";\n            &.Mui-disabled {\n                background-color: ",";\n            }\n        "]);return f=function(){return e},e}function m(){var e=Object(r.a)(["\n    ",";\n    &:hover {\n        ",";\n    }\n"]);return m=function(){return e},e}var p=Object(s.c)(a.a)(m(),(function(e){return e.background&&Object(s.b)(f(),e.theme.palette[e.background].main,Object(o.a)(e.theme.palette[e.background].main,.3))}),(function(e){return e.background&&Object(s.b)(d(),e.theme.palette[e.background].dark)}));n.a=function(e){var n=e.onClick,t=e.title,r=e.size,a=e.background,o=e.disabled,u=e.children;return l.a.createElement(c.a,{title:t},l.a.createElement("span",null,l.a.createElement(p,{size:r,background:a,disabled:o,onClick:n,"aria-label":t},u,l.a.createElement(i.a,{variant:"srOnly"},t))))}},16:function(e,n,t){"use strict";var r=t(0),a=t.n(r),c=t(75),i=function(e){var n=Object(r.lazy)(e);return function(){return a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(c.a,null)},a.a.createElement(n,null))}};t.d(n,"a",(function(){return o}));var o={SignIn:"/signin",Lifecounter:"/lifecounter",User:"/user",AddDeck:"/addDeck",Deck:function(e){return"/decks/".concat(e)},Home:"/"},u=[{path:o.SignIn,component:i((function(){return t.e(12).then(t.bind(null,429))}))},{path:o.Lifecounter,component:i((function(){return Promise.all([t.e(0),t.e(1),t.e(7),t.e(14)]).then(t.bind(null,454))}))}],l=[{path:o.User,component:i((function(){return t.e(8).then(t.bind(null,441))}))},{path:o.AddDeck,component:i((function(){return Promise.all([t.e(0),t.e(2),t.e(10)]).then(t.bind(null,461))}))},{path:o.Deck(":deckName"),component:i((function(){return Promise.all([t.e(0),t.e(1),t.e(6),t.e(11)]).then(t.bind(null,453))}))},{path:o.Home,component:i((function(){return Promise.all([t.e(0),t.e(2),t.e(9),t.e(13)]).then(t.bind(null,457))}))}],s={IsPublic:function(e){return u.some((function(n){var t=n.path;return e.match(function(e){return new RegExp("^".concat(e.replace(/:[^/]*/,"[^/]*"),"$"))}(t))}))},Public:u,Private:l};n.b=s},236:function(e,n,t){"use strict";var r=t(0),a=t.n(r),c=t(288),i=t(39),o=t(76);n.a=function(e){var n=e.variant,t=e.onClick;return a.a.createElement(c.a,{variant:n,onClick:t,startIcon:a.a.createElement(o.d,null)},a.a.createElement(i.a,{noWrap:!0},"Sign in"))}},249:function(e,n,t){e.exports=t(281)},281:function(e,n,t){"use strict";t.r(n);var r=t(322),a=t(323),c=t(321),i=t(0),o=t.n(i),u=t(15),l=t.n(u),s=t(35),d=t(60),f=t(10),m=t(12),p=t.n(m),b=t(28),h=t(7),v=t(315),g=t(289),O=t(316),j=t(317),w=t(318),k=t(319),y=t(39),E=t(320),x=t(284),C=t(294),D=t(312),A=t(247),S=t.n(A),P=t(141),I=t.n(P),W=t(246),N=t.n(W),L=t(78),U=t.n(L),T=t(67),z=t.n(T),_=t(20),M=t(114),F=function(){return o.a.createElement("div",null,"Not found")},R=t(16),B=function(){return o.a.createElement(_.c,null,R.b.Public.map((function(e){return o.a.createElement(_.a,Object.assign({key:e.path,exact:!0},e))})),R.b.Private.map((function(e){return o.a.createElement(_.a,Object.assign({key:e.path,exact:!0},e))})),o.a.createElement(_.a,{exact:!0,component:F}))},H=t(8),G=t(13),q=t(38),$=t(31),J=Object($.f)({files:function(e,n){switch(n.type){case"CreateDeck":return Object(f.a)({},e,Object(G.a)({},n.name,n.link));case"DeleteDeck":return Object(f.a)({},Object(q.omit)(e,[n.name]))}return e},cardList:function(e,n){switch(n.type){case"AddCards":return Object(f.a)({},e,{},Object(q.keyBy)(n.cards,"name"))}return e},symbolList:function(e,n){switch(n.type){case"AddSymbols":return n.symbols.reduce((function(e,n){return Object(f.a)({},e,Object(G.a)({},n.symbol,n))}),{})}return e},setList:function(e,n){switch(n.type){case"AddSets":return n.sets.reduce((function(e,n){return Object(f.a)({},e,Object(G.a)({},n.code,n))}),{})}return e},decks:function(e,n){switch(n.type){case"CreateDeck":return Object(f.a)({},e,Object(G.a)({},n.name,Object(f.a)({cards:Object(H.c)()},Object(q.omit)(n,["type","link"]))));case"UpdateDeck":return Object(f.a)({},e,Object(G.a)({},n.name,Object(f.a)({},e[n.name],{isDirty:!0},Object(q.omit)(n,["type"]))));case"UpdateDeckCard":return 0===n.card.amount?Object(f.a)({},e,Object(G.a)({},n.deckName,Object(f.a)({},e[n.deckName],{cards:Object(f.a)({},e[n.deckName].cards,Object(G.a)({},n.sectionName,Object(q.omit)(e[n.deckName].cards[n.sectionName],n.card.name))),isDirty:!0}))):Object(f.a)({},e,Object(G.a)({},n.deckName,Object(f.a)({},e[n.deckName],{cards:Object(f.a)({},e[n.deckName].cards,Object(G.a)({},n.sectionName,Object(f.a)({},e[n.deckName].cards[n.sectionName],Object(G.a)({},n.card.name,Object(f.a)({},e[n.deckName].cards[n.sectionName][n.card.name],{},n.card))))),isDirty:!0})));case"DeleteDeck":return Object(f.a)({},Object(q.omit)(e,[n.name]))}return e},selectedDeck:function(e,n){switch(n.type){case"SelectDeck":return n.name;case"DeleteDeck":return n.name===e?H.b.Collection:e}return e}}),K=t(50),X=t(64),Q=function(e){var n=o.a.createRef(),t=function(t){n.current&&!(null===n||void 0===n?void 0:n.current.contains(t.target))&&e()};return o.a.useEffect((function(){return document.addEventListener("click",t),document.addEventListener("touchend",t),function(){document.removeEventListener("click",t),document.removeEventListener("touchend",t)}})),[n]},V=t(306),Y=t(307),Z=t(308),ee=t(310),ne=t(30),te=t(76),re=t(6);function ae(){var e=Object(h.a)(["\n            padding: ",";\n        "]);return ae=function(){return e},e}function ce(){var e=Object(h.a)(["\n            opacity: 0;\n        "]);return ce=function(){return e},e}function ie(){var e=Object(h.a)(["\n    color: ",";\n    padding: ",";\n\n    transition: padding 0.5s ease-in-out, opacity 0.5s ease-in-out;\n\n    height: 0;\n    opacity: 1;\n\n    ","\n    ","\n"]);return ie=function(){return e},e}var oe=Object(re.c)(y.a)(ie(),(function(e){return e.theme.palette.grey[500]}),(function(e){return e.theme.spacing(0,2,0,2)}),(function(e){return!e.open&&Object(re.b)(ce())}),(function(e){return e.open&&Object(re.b)(ae(),e.theme.spacing(2,2,4,2))}));function ue(){var e=Object(h.a)(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return ue=function(){return e},e}var le=Object(re.c)(V.a)(ue()),se=function(e){var n=e.open,t=e.closeDrawer,r=Object(_.g)().pathname;return o.a.createElement(o.a.Fragment,null,o.a.createElement(oe,{open:n},"Apps"),o.a.createElement(Y.a,null,o.a.createElement(x.a,{title:"Lifecounter",placement:"right"},o.a.createElement(Z.a,{component:s.b,to:R.a.Lifecounter,onClick:t,button:!0,selected:!!r.match(/^\/lifecounter$/)},o.a.createElement(ee.a,null,o.a.createElement(ne.c,{alt:"Lifecounter"},o.a.createElement(te.e,null))),o.a.createElement(le,{primary:"Lifecounter"})))))},de=t(77),fe=t.n(de),me=t(311),pe=t(139),be=t.n(pe),he=t(138),ve=t.n(he),ge=function(e){var n=e.deck,t=e.variant;return o.a.createElement(me.a,{invisible:!(null===n||void 0===n?void 0:n.isDirty),color:"primary",overlap:"circle",badgeContent:" ",anchorOrigin:{vertical:"bottom",horizontal:"right"}},o.a.createElement(ne.c,{variant:t,alt:Object(H.f)(null===n||void 0===n?void 0:n.name),src:null===n||void 0===n?void 0:n.previewUrl},(null===n||void 0===n?void 0:n.name)===H.b.Wishlist?o.a.createElement(ve.a,null):o.a.createElement(be.a,null)))};function Oe(){var e=Object(h.a)(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return Oe=function(){return e},e}var je=Object(re.c)(V.a)(Oe()),we=function(e){var n=e.open,t=e.closeDrawer,r=Object(_.g)().pathname,a=o.a.useContext(H.a),c=Object(b.a)(a,1)[0],i=function(e){return o.a.createElement(x.a,{key:e.name,title:n?"":(c.decks[e.name].isDirty?"*":"")+Object(H.f)(e.name),placement:"right"},o.a.createElement(Z.a,{component:s.b,to:R.a.Deck(encodeURIComponent(e.name)),onClick:t,button:!0,selected:c.selectedDeck===e.name&&!!r.match(/^\/decks\//)},o.a.createElement(ee.a,null,o.a.createElement(ge,{deck:e})),o.a.createElement(je,{primary:Object(H.f)(e.name)})))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,null),o.a.createElement(oe,{open:n},"Decks"),o.a.createElement(Y.a,null,i(c.decks[H.b.Collection]),i(c.decks[H.b.Wishlist])),o.a.createElement(D.a,null),o.a.createElement(Y.a,null,o.a.createElement(x.a,{title:"Add deck",placement:"right"},o.a.createElement(Z.a,{component:s.b,to:R.a.AddDeck,onClick:t,button:!0,selected:!!r.match(/^\/addDeck$/)},o.a.createElement(ee.a,null,o.a.createElement(ne.c,{alt:"Add deck"},o.a.createElement(fe.a,null))),o.a.createElement(je,{primary:"Add deck"})))),o.a.createElement(D.a,null),o.a.createElement(Y.a,null,Object.values(c.decks).filter((function(e){return e.name!==H.b.Collection&&e.name!==H.b.Wishlist})).map((function(e){return i(e)}))))},ke=t(313),ye=t(314);function Ee(){var e=Object(h.a)(["\n    height: 24px;\n    width: 24px;\n    position: relative;\n\n    & > * {\n        position: absolute;\n        bottom: 0;\n        transform: translateX(-50%);\n    }\n"]);return Ee=function(){return e},e}function xe(){var e=Object(h.a)(["\n    flex-grow: 10;\n\n    & .MuiBottomNavigationAction-label {\n        width: 100%;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n"]);return xe=function(){return e},e}function Ce(){var e=Object(h.a)(["\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    background-color: ",";\n"]);return Ce=function(){return e},e}var De=Object(re.c)(ke.a)(Ce(),(function(e){return e.theme.palette.secondary.dark})),Ae=Object(re.c)(ye.a)(xe()),Se=re.c.div(Ee()),Pe=function(e){var n=e.open,t=e.toggleOpen,r=Object(_.g)().pathname,a=Object(_.f)(),c=o.a.useContext(H.a),i=Object(b.a)(c,1)[0],u=o.a.useState(0),l=Object(b.a)(u,2),s=l[0],d=l[1];o.a.useEffect((function(){return d(n?2:r.match(R.a.AddDeck)?0:1)}),[n,r]);return o.a.createElement(De,{value:s,onChange:function(e,n){return function(e){switch(d(e),e){case 0:return void a.push(R.a.AddDeck);case 1:return void a.push(R.a.Deck(encodeURIComponent(i.decks[i.selectedDeck].name)));case 2:return void t()}throw Error("Invalid tab number ".concat(e))}(n)},showLabels:!0},o.a.createElement(ye.a,{label:"Add deck",icon:o.a.createElement(fe.a,null)}),o.a.createElement(Ae,{label:Object(H.f)(i.selectedDeck),icon:o.a.createElement(Se,null,o.a.createElement(ge,{deck:i.decks[i.selectedDeck]}))}),o.a.createElement(ye.a,{label:"Menu",icon:o.a.createElement(U.a,null)}))},Ie=t(75),We=t(236),Ne=t(109);function Le(){var e=Object(h.a)(["\n    margin-right: ","px;\n"]);return Le=function(){return e},e}function Ue(){var e=Object(h.a)(["\n            "," {\n                & {\n                    margin-left: ",";\n                    width: calc(100% - ",");\n                }\n            }\n        "]);return Ue=function(){return e},e}function Te(){var e=Object(h.a)(["\n    flex-grow: 1;\n    padding: ","px;\n    margin-left: ",";\n    ","\n    ","\n\n    ","\n    "," {\n        & {\n            width: 100%;\n            margin-left: 0;\n            margin-bottom: ","px;\n            padding: ","px;\n        }\n    }\n"]);return Te=function(){return e},e}function ze(){var e=Object(h.a)(["\n    "," {\n        & {\n            padding: 0;\n        }\n    }\n"]);return ze=function(){return e},e}function _e(){var e=Object(h.a)(["\n            overflow-y: auto;\n        "]);return _e=function(){return e},e}function Me(){var e=Object(h.a)(["\n    overflow: hidden;\n    padding-bottom: ","px;\n    ",'\n\n    &::after {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        content: "";\n        pointer-events: none;\n        background: linear-gradient(\n            0deg,\n            '," ","px,\n            transparent ","px,\n            transparent 100%\n        );\n    }\n"]);return Me=function(){return e},e}function Fe(){var e=Object(h.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    z-index: 1;\n"]);return Fe=function(){return e},e}function Re(){var e=Object(h.a)(["\n    flex-shrink: 0;\n    white-space: nowrap;\n    ","\n    ","\n\n    .MuiDrawer-paper {\n        ","\n        ","\n        overflow: hidden;\n    }\n"]);return Re=function(){return e},e}function Be(){var e=Object(h.a)(["\n    width: ",";\n\n    "," {\n        & {\n            max-height: 0;\n        }\n    }\n"]);return Be=function(){return e},e}function He(){var e=Object(h.a)(["\n    width: ",";\n    overflow-x: hidden;\n    transition: ",";\n\n    "," {\n        & {\n            width: 100%;\n            height: auto;\n            max-height: calc(100% - 56px);\n        }\n    }\n"]);return He=function(){return e},e}function Ge(){var e=Object(h.a)(["\n            display: none;\n        "]);return Ge=function(){return e},e}function qe(){var e=Object(h.a)(["\n    margin-right: 36px;\n    ","\n\n    "," {\n        & {\n            margin-right: ","px;\n            display: inline-block;\n        }\n    }\n"]);return qe=function(){return e},e}function $e(){var e=Object(h.a)(["\n            "," {\n                & {\n                    width: 100%;\n                    margin-left: 0;\n                }\n            }\n        "]);return $e=function(){return e},e}function Je(){var e=Object(h.a)(["\n    z-index: ",";\n    ","\n    ","\n    ","\n"]);return Je=function(){return e},e}function Ke(){var e=Object(h.a)(["\n    transition: ",";\n"]);return Ke=function(){return e},e}function Xe(){var e=Object(h.a)(["\n    margin-left: ",";\n    width: calc(100% - ",");\n    transition: ",";\n"]);return Xe=function(){return e},e}var Qe=Object(re.b)(Xe(),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.theme.transitions.create(["width","margin"],{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.enteringScreen})})),Ve=Object(re.b)(Ke(),(function(e){return e.theme.transitions.create(["width","margin"],{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.leavingScreen})})),Ye=Object(re.c)(v.a)(Je(),(function(e){return e.theme.zIndex.drawer+1}),Ve,(function(e){return e.open&&Qe}),(function(e){return e.open&&Object(re.b)($e(),e.theme.breakpoints.down("xs"))})),Ze=Object(re.c)(g.a)(qe(),(function(e){return e.open&&Object(re.b)(Ge())}),(function(e){return e.theme.breakpoints.down("xs")}),(function(e){return e.theme.spacing(1)})),en=Object(re.b)(He(),(function(e){return e.theme.constants.drawerWidth}),(function(e){return["width","max-height"].map((function(n){return e.theme.transitions.create(n,{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.enteringScreen})})).join(", ")}),(function(e){return e.theme.breakpoints.down("xs")})),nn=Object(re.b)(Be(),(function(e){return e.theme.constants.drawerWidthClosed}),(function(e){return e.theme.breakpoints.down("xs")})),tn=Object(re.c)(O.a)(Re(),en,(function(e){return!e.open&&nn}),en,(function(e){return!e.open&&nn})),rn=Object(re.c)(j.a)(Fe()),an=re.c.div(Me(),(function(e){return e.theme.spacing(6)}),(function(e){return e.open&&Object(re.b)(_e())}),(function(e){return e.theme.palette.background.paper}),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(8)})),cn=Object(re.c)(w.a)(ze(),(function(e){return e.theme.breakpoints.down("xs")})),on=re.c.div(Te(),(function(e){return e.theme.spacing(2)}),(function(e){return e.theme.constants.drawerWidthClosed}),Ve,(function(e){return e.open&&Qe}),(function(e){return e.open&&Object(re.b)(Ue(),e.theme.breakpoints.down("sm"),(function(e){return e.theme.constants.drawerWidthClosed}),(function(e){return e.theme.constants.drawerWidthClosed}))}),(function(e){return e.theme.breakpoints.down("xs")}),(function(e){return e.theme.spacing(7)}),(function(e){return e.theme.spacing(1)})),un=re.c.div(Le(),(function(e){return e.theme.spacing(1)})),ln=function(){var e=Object(_.f)(),n=Object(k.a)(re.a.breakpoints.down("xs")),t=Object(k.a)(re.a.breakpoints.down("sm")),r=o.a.useReducer(J,H.g),a=Object(b.a)(r,2),c=a[0],i=a[1],u=o.a.useState(),l=Object(b.a)(u,2),d=l[0],m=l[1],h=o.a.useState(void 0),v=Object(b.a)(h,2),O=v[0],w=v[1],A=function(){K.a.signOut(),m(void 0)},P=o.a.useState(!1),W=Object(b.a)(P,2),L=W[0],T=W[1],F=function(){return T((function(e){return!e}))},G=Q((function(){return t&&T(!1)})),q=Object(b.a)(G,1)[0];return o.a.useEffect((function(){K.a.initClient((function(n){var t;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.location.pathname,n){r.next=5;break}return w(!1),R.b.IsPublic(t)||e.push(R.a.SignIn),r.abrupt("return");case 5:t.match(R.a.SignIn)&&(t=R.a.Home),e.push(t),w(!0),K.a.prepareAppData(i,c)().then((function(){return m(K.a.getProfile())}));case 9:case"end":return r.stop()}}))})),X.a.Symbology.All().then((function(e){var n=z.a.create({baseURL:"",responseType:"text",headers:{"Content-Type":"image/svg+xml"}});return Promise.allSettled(e.map((function(e){return n.get(e.svg_uri,{transformResponse:function(n){return Object(f.a)({},e,{svg:n})}})})))})).then((function(e){i({type:"AddSymbols",symbols:e.filter($.g).map((function(e){return e.value.data}))})})).then(X.a.Sets.All).then((function(e){var n=z.a.create({baseURL:"",responseType:"text",headers:{"Content-Type":"image/svg+xml"}});return Promise.allSettled(e.map((function(e){return n.get(e.icon_svg_uri,{transformResponse:function(n){return Object(f.a)({},e,{icon_svg:n})}})})))})).then((function(e){i({type:"AddSets",sets:e.filter($.g).map((function(e){return e.value.data}))})}))}),[]),o.a.createElement(H.a.Provider,{value:[c,i]},o.a.createElement(H.d.Provider,{value:{profile:d,signOut:A}},o.a.createElement(Ye,{position:"sticky",open:L},o.a.createElement(j.a,null,!n&&o.a.createElement(Ze,{color:"inherit","aria-label":"open drawer",onClick:F,edge:"start",open:L},o.a.createElement(U.a,null)),o.a.createElement(y.a,{variant:"h6",style:{overflow:"hidden"}},o.a.createElement(E.a,{variant:"inherit",color:"inherit",underline:"none",component:s.b,to:O?R.a.Home:R.a.SignIn},"MTGCollection")),o.a.createElement(ne.d,null),O?o.a.createElement(o.a.Fragment,null,!Object(M.isNullOrUndefined)(d)&&o.a.createElement(un,null,o.a.createElement(x.a,{title:"Signed in as ".concat(d.getGivenName()," (").concat(d.getEmail(),")")},o.a.createElement(C.a,{component:s.b,to:R.a.User,alt:d.getGivenName(),src:d.getImageUrl()}))),o.a.createElement(Ne.a,{title:"SignOut",onClick:A},o.a.createElement(N.a,null))):void 0!==O&&o.a.createElement(We.a,{onClick:K.a.signIn}))),o.a.createElement(tn,{open:L,anchor:n?"bottom":"left",variant:"permanent",ref:q},o.a.createElement(rn,null,o.a.createElement(g.a,{onClick:F},n?o.a.createElement(I.a,null):o.a.createElement(S.a,null))),o.a.createElement(D.a,null),o.a.createElement(an,{open:L},o.a.createElement(se,{open:L,closeDrawer:function(){return n&&T(!1)}}),O&&o.a.createElement(we,{open:L,closeDrawer:function(){return n&&T(!1)}}))),o.a.createElement(cn,{maxWidth:"xl"},o.a.createElement(on,{open:L},void 0===O?o.a.createElement(Ie.a,null):o.a.createElement(B,null))),n&&o.a.createElement(Pe,{open:L,toggleOpen:F})))},sn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function dn(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(o.a.createElement(s.a,null,o.a.createElement(a.b,{injectFirst:!0},o.a.createElement(d.a,{theme:re.a},o.a.createElement(c.a,{theme:re.a},o.a.createElement(r.a,null),o.a.createElement(ln,null))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/MTGCollection",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/MTGCollection","/sw.js");sn?(!function(e,n){fetch(e).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):dn(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):dn(n,e)}))}}()},30:function(e,n,t){"use strict";t.d(n,"d",(function(){return m})),t.d(n,"b",(function(){return p})),t.d(n,"a",(function(){return b})),t.d(n,"e",(function(){return h})),t.d(n,"c",(function(){return v}));var r=t(7),a=t(107),c=t(39),i=t(294),o=t(6);function u(){var e=Object(r.a)(["\n    background-color: ",";\n    color: ",";\n"]);return u=function(){return e},e}function l(){var e=Object(r.a)([""]);return l=function(){return e},e}function s(){var e=Object(r.a)(["\n    align-self: flex-end;\n"]);return s=function(){return e},e}function d(){var e=Object(r.a)(["\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n    min-height: ",";\n    overflow: hidden;\n    padding: ","px;\n    "," {\n        & {\n            padding: ","px;\n        }\n    }\n"]);return d=function(){return e},e}function f(){var e=Object(r.a)(["\n    flex: 1 1 auto;\n"]);return f=function(){return e},e}var m=o.c.div(f()),p=Object(o.c)(a.a)(d(),(function(e){return e.theme.constants.appletHeight}),(function(e){return e.theme.spacing(4)}),(function(e){return e.theme.breakpoints.down("xs")}),(function(e){return e.theme.spacing(2)})),b=o.c.div(s()),h=Object(o.c)(c.a).attrs((function(e){return{component:"h2",variant:"h4",color:"primary",gutterBottom:!0}}))(l()),v=Object(o.c)(i.a)(u(),(function(e){return e.theme.palette.background.paper}),(function(e){return e.theme.palette.text.secondary}))},31:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"a",(function(){return a})),t.d(n,"c",(function(){return c})),t.d(n,"f",(function(){return i})),t.d(n,"e",(function(){return o})),t.d(n,"d",(function(){return u})),t.d(n,"g",(function(){return l}));var r=function e(n,t){return n.length<=t?[n]:[n.slice(0,t)].concat(e(n.slice(t),t))},a={Unique:function(e,n,t){return t.indexOf(e)===n},NotNull:function(e){return null!==e&&void 0!==e}},c=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n},i=function(e){return function(n,t){var r={};for(var a in e)r[a]=e[a](n[a],t);return r}},o=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t){return n.reduce((function(e,n){return n(e,t)}),e)}},u=function(e){switch(e){case"chip":return 9;case"inline":return 12;case void 0:return 24}},l=function(e){return"fulfilled"===(null===e||void 0===e?void 0:e.status)}},50:function(e,n,t){"use strict";var r=t(10),a=t(110),c=t(66),i=t(12),o=t.n(i),u=t(8),l=t(64),s=function(e,n){return function(t){var r,a=Object.values(null!==(r=null===t||void 0===t?void 0:t.cards)&&void 0!==r?r:{}).reduce((function(e,n){return[].concat(Object(c.a)(e),Object(c.a)(Object.values(n)))}),[]).filter((function(e){return!n.cardList[e.name]}));l.a.Cards.Collection(a.map((function(e){return{name:e.name}}))).then((function(n){return e({type:"AddCards",cards:n})}))}},d=t(101),f={apiKey:"AIzaSyBcke75SLGGCMiId3EcThDcLnbmnKasWyE",clientId:"213841300532-aqinavnoi53if8cbk6re0aa6gkf965q3.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"profile https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file"},m=function(e){var n,t,r,a,i,u,l,s,d,f,m,p,b;return o.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:return a=e.name,i=e.props,u=e.fileContent,l=e.folder,s=new Blob([null!==(n=u)&&void 0!==n?n:""],{type:"text/plain"}),d={name:a,mimeType:"text/plain",appProperties:null!==(t=i)&&void 0!==t?t:{},parents:["appDataFolder"].concat(Object(c.a)(null!==(r=l)&&void 0!==r?r:[]))},f=gapi.auth.getToken().access_token,(m=new FormData).append("metadata",new Blob([JSON.stringify(d)],{type:"application/json"})),m.append("file",s),h.next=9,o.a.awrap(fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",{method:"POST",headers:new Headers({Authorization:"Bearer "+f}),body:m}));case 9:return p=h.sent,h.next=12,o.a.awrap(p.json());case 12:return b=h.sent,h.abrupt("return",b.id);case 14:case"end":return h.stop()}}))},p=function(e){var n;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.abrupt("return",gapi.client.drive.files.delete({fileId:n}));case 2:case"end":return t.stop()}}))},b=function(e,n){return function(t){var c,i,l,f;return o.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return c=t.name,i=t.fileContent,l=Object(a.a)(t,["name","fileContent"]),f=Object(r.a)({name:c,cards:d.a.serialize(i,u.e.Sideboard,u.e.Maybeboard),isDirty:!1},l),p.t0=e,p.t1=r.a,p.next=6,o.a.awrap(m({name:"".concat(c,".txt"),props:Object(r.a)({name:c},l),fileContent:i}));case 6:p.t2=p.sent,p.t3={type:"CreateDeck",link:p.t2},p.t4=f,p.t5=(0,p.t1)(p.t3,p.t4),(0,p.t0)(p.t5),s(e,n)(f);case 12:case"end":return p.stop()}}))}},h=function(e,n){return function(t,a){var c,i;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=t,l.t1=d.a,l.next=4,o.a.awrap(v.getFileContents({id:a.id}));case 4:l.t2=l.sent,l.t3=u.e.Sideboard,l.t4=u.e.Maybeboard,l.t5=l.t1.serialize.call(l.t1,l.t2,l.t3,l.t4),l.t6=null===(c=a.appProperties)||void 0===c?void 0:c.previewUrl,i={name:l.t0,cards:l.t5,isDirty:!1,previewUrl:l.t6},e(Object(r.a)({type:"CreateDeck",link:a.id},i)),s(e,n)(i);case 12:case"end":return l.stop()}}))}},v={initClient:function(e){gapi.load("client:auth2",(function(){gapi.client.init(f).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(e),e(gapi.auth2.getAuthInstance().isSignedIn.get())}),console.error)}))},getProfile:function(){return gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile()},signIn:function(){return gapi.auth2.getAuthInstance().signIn()},signOut:function(){return gapi.auth2.getAuthInstance().signOut()},prepareAppData:function(e,n){return function(){var t,r,a,c,i,l,s,d,f,m,p,v,g,O,j,w,k,y;return o.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,o.a.awrap(gapi.client.drive.files.list({spaces:"appDataFolder",fields:"nextPageToken, files(id, name, appProperties)"}));case 2:if(s=E.sent,d=null===(t=s.result)||void 0===t?void 0:null===(r=t.files)||void 0===r?void 0:r.find((function(e){var n;return(null===(n=e.appProperties)||void 0===n?void 0:n.name)===u.b.Collection}))){E.next=10;break}return console.info("Creating collection..."),E.next=8,o.a.awrap(b(e,n)({name:u.b.Collection}));case 8:E.next=13;break;case 10:return console.info("Loading collection..."),E.next=13,o.a.awrap(h(e,n)(u.b.Collection,d));case 13:if(f=null===(a=s.result)||void 0===a?void 0:null===(c=a.files)||void 0===c?void 0:c.find((function(e){var n;return(null===(n=e.appProperties)||void 0===n?void 0:n.name)===u.b.Wishlist}))){E.next=20;break}return console.info("Creating wishlist..."),E.next=18,o.a.awrap(b(e,n)({name:u.b.Wishlist}));case 18:E.next=23;break;case 20:return console.info("Loading wishlist..."),E.next=23,o.a.awrap(h(e,n)(u.b.Wishlist,f));case 23:for(m=null===(i=s.result)||void 0===i?void 0:null===(l=i.files)||void 0===l?void 0:l.filter((function(e){var n,t;return(null===(n=e.appProperties)||void 0===n?void 0:n.name)!==u.b.Collection&&(null===(t=e.appProperties)||void 0===t?void 0:t.name)!==u.b.Wishlist})),p=0;p<m.length;p++)k=m[p],y=null!==(v=null!==(g=null===(O=k.appProperties)||void 0===O?void 0:O.name)&&void 0!==g?g:null===(j=k.name)||void 0===j?void 0:null===(w=j.match(/(.*?)\.txt/))||void 0===w?void 0:w[0])&&void 0!==v?v:"unnamed",h(e,n)(y,k);case 25:case"end":return E.stop()}}))}},createNewFile:m,updateFile:function(e){var n,t,r,a,c,i,u;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=e.id,t=e.fileContent,r=new Blob([t],{type:"text/plain"}),a=gapi.auth.getToken().access_token,(c=new FormData).append("file",r),l.next=7,o.a.awrap(fetch("https://www.googleapis.com/upload/drive/v3/files/".concat(n,"?uploadType=media&fields=id"),{method:"PATCH",headers:new Headers({Authorization:"Bearer "+a}),body:c}));case 7:return i=l.sent,l.next=10,o.a.awrap(i.json());case 10:return u=l.sent,l.abrupt("return",u.id);case 12:case"end":return l.stop()}}))},deleteFile:p,createNewDeck:b,downloadDeck:h,deleteDeck:function(e){return function(n){var t,r;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=n.name,r=n.id,a.next=3,o.a.awrap(p({id:r}));case 3:e({type:"DeleteDeck",name:t});case 4:case"end":return a.stop()}}))}},getFileContents:function(e){var n,t;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.id,r.next=3,o.a.awrap(gapi.client.drive.files.get({fileId:n,alt:"media"}));case 3:return t=r.sent,r.abrupt("return",t.body);case 5:case"end":return r.stop()}}))}};n.a=v},6:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return o}));var r=t(106),a=t(60),c=t(23),i=Object(r.a)({palette:{type:"dark",primary:{main:c.a.deepOrange[700]},secondary:{main:c.a.blueGrey[500]}}},{constants:{drawerWidth:"260px",drawerWidthClosed:"72px",appletHeight:"280px"}}),o=(a.a,a.b),u=a.c;n.c=u},64:function(e,n,t){"use strict";var r=t(10),a=t(67),c=t.n(a),i=t(31),o=function(){var e=c.a.create({baseURL:"https://api.scryfall.com",responseType:"json",headers:{"Content-Type":"application/json"}});return{endpoint:e,Symbology:{All:function(){return e.get("/symbology").then((function(e){return e.data.data}))},ParseMana:function(n){return e.get("/symbology/parse-mana",{params:{cost:n}}).then((function(e){return e.data}))}},Cards:{Autocomplete:function(n){return e.get("/cards/autocomplete",{params:{q:n,include_extras:!0}}).then((function(e){return e.data.data}))},Named:function(n){return e.get("/cards/named",{params:{fuzzy:n}}).then((function(e){return e.data}))},Collection:function(n){var t;return(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0)<=0?Promise.resolve([]):Promise.allSettled(Object(i.b)(n,75).map((function(n){return e.post("/cards/collection",{identifiers:n})}))).then((function(e){return e.filter(i.g).flatMap((function(e){return e.value.data.data}))}))}},Sets:{All:function(){return e.get("/sets").then((function(e){return e.data.data}))}}}}(),u=Object(r.a)({},o,{getImage:function(e,n){var t,r,a;switch(e.layout){case"transform":case"double_faced_token":a=e.card_faces[0].image_uris;break;default:a=e.image_uris}return null!==(t=null===(r=a)||void 0===r?void 0:r[n])&&void 0!==t?t:null},getPlaceholder:function(e){return"https://via.placeholder.com/146x204?text=".concat(e.replace(/\s/,"+"))},getColorIdentity:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(i.a.NotNull).flatMap((function(e){return e.color_identity})).filter(i.a.Unique).map((function(e){return"{".concat(e,"}")})).join("")}});n.a=u},75:function(e,n,t){"use strict";var r=t(7),a=t(39),c=t(283),i=t(0),o=t.n(i),u=t(30),l=t(6);function s(){var e=Object(r.a)(["\n    margin-top: ","px;\n"]);return s=function(){return e},e}function d(){var e=Object(r.a)(["\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n"]);return d=function(){return e},e}var f=Object(l.c)(u.b)(d()),m=Object(l.c)(a.a)(s(),(function(e){return e.theme.spacing(2)}));n.a=function(){return o.a.createElement(f,null,o.a.createElement(c.a,{size:60}),o.a.createElement(m,{variant:"h6"},"Loading..."))}},76:function(e,n,t){"use strict";t.d(n,"b",(function(){return d})),t.d(n,"c",(function(){return f})),t.d(n,"d",(function(){return m})),t.d(n,"a",(function(){return p})),t.d(n,"e",(function(){return b}));var r=t(7),a=t(242),c=t(68),i=t(63),o=t(0),u=t.n(o);function l(){var e=Object(r.a)(["\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return l=function(){return e},e}var s=t(6).c.div(l()),d=function(){return u.a.createElement(s,null,u.a.createElement(i.a,{icon:c.b}))},f=function(){return u.a.createElement(s,null,u.a.createElement(i.a,{icon:c.d}))},m=function(){return u.a.createElement(s,null,u.a.createElement(i.a,{icon:a.a}))},p=function(){return u.a.createElement(s,null,u.a.createElement(i.a,{icon:c.a}))},b=function(){return u.a.createElement(s,null,u.a.createElement(i.a,{icon:c.c}))}},8:function(e,n,t){"use strict";t.d(n,"b",(function(){return c})),t.d(n,"f",(function(){return d})),t.d(n,"e",(function(){return s})),t.d(n,"c",(function(){return f})),t.d(n,"g",(function(){return m})),t.d(n,"a",(function(){return p})),t.d(n,"d",(function(){return b}));var r,a,c,i=t(13),o=t(10),u=t(0),l=t.n(u);!function(e){e.Collection="_collection",e.Wishlist="_wishlist"}(c||(c={}));var s,d=function(e){return e===c.Collection?"Collection":e===c.Wishlist?"Wishlist":e};!function(e){e.Default="_default",e.Sideboard="Sideboard",e.Maybeboard="Maybeboard"}(s||(s={}));var f=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return Object(o.a)({},e,Object(i.a)({},n,{}))}),Object(i.a)({},s.Default,{}))},m={files:(r={},Object(i.a)(r,c.Collection,""),Object(i.a)(r,c.Wishlist,""),r),decks:(a={},Object(i.a)(a,c.Collection,{name:c.Collection,cards:f()}),Object(i.a)(a,c.Wishlist,{name:c.Wishlist,cards:f()}),a),cardList:{},symbolList:{},setList:{},selectedDeck:c.Collection},p=l.a.createContext([m,void 0]),b=l.a.createContext({signOut:function(){}})}},[[249,4,5]]]);
//# sourceMappingURL=main.1809ff42.chunk.js.map