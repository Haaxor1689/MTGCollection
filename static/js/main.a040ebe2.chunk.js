(this["webpackJsonpmtg-collection"]=this["webpackJsonpmtg-collection"]||[]).push([[0],{158:function(e,t,n){e.exports=n.p+"static/media/logo.81aa9e7e.png"},190:function(e,t,n){e.exports=n(230)},230:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o=n(383),l=n(348),u=n(382),s=n(0),m=n.n(s),d=n(14),f=n.n(d),p=n(67),h=n(10),b=n(15),g=n.n(b),v=n(9),E=n(7),y=n(379),k=n(357),O=n(380),w=n(381),j=n(47),x=n(350),C=n(354),S=n(355),D=n(161),N=n.n(D),W=n(160),A=n.n(W),I=n(159),z=n.n(I),T=n(66),P=n.n(T),U=n(57),L=n.n(U),M=n(162),_=n(45),B=n(31),G=n(8);!function(e){e.Collection="_collection",e.Wishlist="_wishlist"}(c||(c={})),function(e){e.Default="_default",e.Sideboard="Sideboard",e.Maybeboard="Maybeboard"}(i||(i={}));var F,R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return Object(h.a)({},e,Object(G.a)({},t,{}))}),Object(G.a)({},i.Default,{}))},K={files:(a={},Object(G.a)(a,c.Collection,""),Object(G.a)(a,c.Wishlist,""),a),decks:(r={},Object(G.a)(r,c.Collection,{name:c.Collection,cards:R()}),Object(G.a)(r,c.Wishlist,{name:c.Wishlist,cards:R()}),r),cardList:{},symbolList:{},setList:{},selectedDeck:null,modifierKeys:{shift:!1}},H=m.a.createContext([K,void 0]),J=n(46),Q=(F={files:function(e,t){switch(t.type){case"CreateDeck":return Object(h.a)({},e,Object(G.a)({},t.name,t.link));case"DeleteDeck":return Object(h.a)({},Object(J.omit)(e,[t.name]))}return e},cardList:function(e,t){switch(t.type){case"AddCard":return Object(h.a)({},e,Object(G.a)({},t.card.name,t.card))}return e},symbolList:function(e,t){switch(t.type){case"AddSymbols":return t.symbols.reduce((function(e,t){return Object(h.a)({},e,Object(G.a)({},t.symbol,t))}),{})}return e},setList:function(e,t){switch(t.type){case"AddSets":return t.sets.reduce((function(e,t){return Object(h.a)({},e,Object(G.a)({},t.code,t))}),{})}return e},decks:function(e,t){switch(t.type){case"CreateDeck":return Object(h.a)({},e,Object(G.a)({},t.name,Object(h.a)({cards:R()},Object(J.omit)(t,["type","link"]))));case"UpdateDeck":return Object(h.a)({},e,Object(G.a)({},t.name,Object(h.a)({},e[t.name],{isDirty:!0},Object(J.omit)(t,["type"]))));case"UpdateDeckCard":return 0===t.card.amount?Object(h.a)({},e,Object(G.a)({},t.deckName,Object(h.a)({},e[t.deckName],{cards:Object(h.a)({},e[t.deckName].cards,Object(G.a)({},t.sectionName,Object(J.omit)(e[t.deckName].cards[t.sectionName],t.card.name))),isDirty:!0}))):Object(h.a)({},e,Object(G.a)({},t.deckName,Object(h.a)({},e[t.deckName],{cards:Object(h.a)({},e[t.deckName].cards,Object(G.a)({},t.sectionName,Object(h.a)({},e[t.deckName].cards[t.sectionName],Object(G.a)({},t.card.name,Object(h.a)({},e[t.deckName].cards[t.sectionName][t.card.name],{},t.card))))),isDirty:!0})));case"DeleteDeck":return Object(h.a)({},Object(J.omit)(e,[t.name]))}return e},selectedDeck:function(e,t){switch(t.type){case"SelectDeck":return t.name;case"DeleteDeck":return t.name===e?null:e}return e},modifierKeys:function(e,t){switch(t.type){case"SetModifierKey":return Object(h.a)({},e,Object(G.a)({},t.key,t.value))}return e}},function(e,t){var n={};for(var a in F)n[a]=F[a](e[a],t);return n}),q=n(2),X=n(19),$=n(136),V={serialize:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e&&""!==e?e.split("##").map((function(e,t){var n,a;if(0===t)n=i.Default,a=e.split(/\r?\n/);else{var r=e.split(/\r?\n/),c=Object($.a)(r);n=c[0],a=c.slice(1)}return[n,a.map((function(e){return e.match(/^(\d*) +(.*?)(?: # (.*))?$/)})).filter((function(e){return!Object(J.isNull)(e)})).map((function(e){return{amount:parseInt(e[1]),name:e[2],comment:e[3]}}))]})).reduce((function(e,t){return Object(h.a)({},e,Object(G.a)({},t[0],t[1].reduce((function(e,t){return Object(h.a)({},e,Object(G.a)({},t.name,t))}),{})))}),R.apply(void 0,n)):R.apply(void 0,n)},deserialize:function(e){return Object.entries(e).reduce((function(e,t){return"".concat(e).concat(t[0]!==i.Default?"#".concat(t[0],"\n"):"").concat(Object.values(t[1]).reduce((function(e,t){return"".concat(e).concat(t.amount," ").concat(t.name).concat(t.comment?" # ".concat(t.comment):"","\n")}),""),"\n")}),"")}},Y={apiKey:"AIzaSyBcke75SLGGCMiId3EcThDcLnbmnKasWyE",clientId:"213841300532-aqinavnoi53if8cbk6re0aa6gkf965q3.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"profile https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file"},Z=function(e){var t,n,a,r,c,i,o,l,u,s,m,d,f;return g.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return r=e.name,c=e.props,i=e.fileContent,o=e.folder,l=new Blob([null!==(t=i)&&void 0!==t?t:""],{type:"text/plain"}),u={name:r,mimeType:"text/plain",appProperties:null!==(n=c)&&void 0!==n?n:{},parents:["appDataFolder"].concat(Object(X.a)(null!==(a=o)&&void 0!==a?a:[]))},s=gapi.auth.getToken().access_token,(m=new FormData).append("metadata",new Blob([JSON.stringify(u)],{type:"application/json"})),m.append("file",l),p.next=9,g.a.awrap(fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",{method:"POST",headers:new Headers({Authorization:"Bearer "+s}),body:m}));case 9:return d=p.sent,p.next=12,g.a.awrap(d.json());case 12:return f=p.sent,p.abrupt("return",f.id);case 14:case"end":return p.stop()}}))},ee=function(e){var t,n;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,g.a.awrap(gapi.client.drive.files.get({fileId:t,alt:"media"}));case 3:return n=a.sent,a.abrupt("return",n.body);case 5:case"end":return a.stop()}}))},te=function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.id,n.abrupt("return",gapi.client.drive.files.delete({fileId:t}));case 2:case"end":return n.stop()}}))},ne=function(e,t){var n,a,r;return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=t.name,a=t.fileContent,r=Object(q.a)(t,["name","fileContent"]),c.t0=e,c.t1=h.a,c.t2=n,c.next=6,g.a.awrap(Z({name:"".concat(n,".txt"),props:Object(h.a)({name:n},r),fileContent:a}));case 6:c.t3=c.sent,c.t4=V.serialize(a,i.Sideboard,i.Maybeboard),c.t5={type:"CreateDeck",name:c.t2,link:c.t3,cards:c.t4,isDirty:!1},c.t6=r,c.t7=(0,c.t1)(c.t5,c.t6),(0,c.t0)(c.t7);case 12:case"end":return c.stop()}}))},ae={initClient:function(e){gapi.load("client:auth2",(function(){gapi.client.init(Y).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(e),e(gapi.auth2.getAuthInstance().isSignedIn.get())}),console.error)}))},getProfile:function(){return gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile()},signIn:function(){return gapi.auth2.getAuthInstance().signIn()},signOut:function(){return gapi.auth2.getAuthInstance().signOut()},prepareAppData:function(){return function(e){var t,n,a,r,o,l,u,s,m,d,f,p,h,b,v,E,y,k,O;return g.a.async((function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,g.a.awrap(gapi.client.drive.files.list({spaces:"appDataFolder",fields:"nextPageToken, files(id, name, appProperties)"}));case 2:if(u=w.sent,s=null===(t=u.result)||void 0===t?void 0:null===(n=t.files)||void 0===n?void 0:n.find((function(e){var t;return(null===(t=e.appProperties)||void 0===t?void 0:t.name)===c.Collection}))){w.next=9;break}console.info("Creating collection..."),ne(e,{name:c.Collection}),w.next=20;break;case 9:return console.info("Loading collection..."),e({type:"CreateDeck",name:c.Collection,link:s.id}),w.t0=e,w.t1=c.Collection,w.t2=V,w.next=16,g.a.awrap(ee({id:s.id}));case 16:w.t3=w.sent,w.t4=w.t2.serialize.call(w.t2,w.t3),w.t5={type:"UpdateDeck",name:w.t1,cards:w.t4,isDirty:!1},(0,w.t0)(w.t5);case 20:if(m=null===(a=u.result)||void 0===a?void 0:null===(r=a.files)||void 0===r?void 0:r.find((function(e){var t;return(null===(t=e.appProperties)||void 0===t?void 0:t.name)===c.Wishlist}))){w.next=26;break}console.info("Creating wishlist..."),ne(e,{name:c.Wishlist}),w.next=37;break;case 26:return console.info("Loading wishlist..."),e({type:"CreateDeck",name:c.Wishlist,link:m.id}),w.t6=e,w.t7=c.Wishlist,w.t8=V,w.next=33,g.a.awrap(ee({id:m.id}));case 33:w.t9=w.sent,w.t10=w.t8.serialize.call(w.t8,w.t9),w.t11={type:"UpdateDeck",name:w.t7,cards:w.t10,isDirty:!1},(0,w.t6)(w.t11);case 37:d=null===(o=u.result)||void 0===o?void 0:null===(l=o.files)||void 0===l?void 0:l.filter((function(e){var t,n;return(null===(t=e.appProperties)||void 0===t?void 0:t.name)!==c.Collection&&(null===(n=e.appProperties)||void 0===n?void 0:n.name)!==c.Wishlist})),f=0;case 39:if(!(f<d.length)){w.next=58;break}return k=d[f],O=null!==(p=null!==(h=null===(b=k.appProperties)||void 0===b?void 0:b.name)&&void 0!==h?h:null===(v=k.name)||void 0===v?void 0:null===(E=v.match(/(.*?)\.txt/))||void 0===E?void 0:E[0])&&void 0!==p?p:"unnamed",e({type:"CreateDeck",name:O,link:k.id}),w.t12=e,w.t13=O,w.t14=null===(y=k.appProperties)||void 0===y?void 0:y.previewUrl,w.t15=V,w.next=49,g.a.awrap(ee({id:k.id}));case 49:w.t16=w.sent,w.t17=i.Sideboard,w.t18=i.Maybeboard,w.t19=w.t15.serialize.call(w.t15,w.t16,w.t17,w.t18),w.t20={type:"UpdateDeck",name:w.t13,previewUrl:w.t14,cards:w.t19,isDirty:!1},(0,w.t12)(w.t20);case 55:f++,w.next=39;break;case 58:case"end":return w.stop()}}))}},createNewFile:Z,updateFile:function(e){var t,n,a,r,c,i,o;return g.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.id,n=e.fileContent,a=new Blob([n],{type:"text/plain"}),r=gapi.auth.getToken().access_token,(c=new FormData).append("file",a),l.next=7,g.a.awrap(fetch("https://www.googleapis.com/upload/drive/v3/files/".concat(t,"?uploadType=media&fields=id"),{method:"PATCH",headers:new Headers({Authorization:"Bearer "+r}),body:c}));case 7:return i=l.sent,l.next=10,g.a.awrap(i.json());case 10:return o=l.sent,l.abrupt("return",o.id);case 12:case"end":return l.stop()}}))},deleteFile:te,createNewDeck:ne,deleteDeck:function(e,t){var n,a;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.name,a=t.id,r.next=3,g.a.awrap(te({id:a}));case 3:e({type:"DeleteDeck",name:n});case 4:case"end":return r.stop()}}))},getFileContents:ee},re=function(){var e=L.a.create({baseURL:"https://api.scryfall.com",responseType:"json",headers:{"Content-Type":"application/json"}});return{endpoint:e,Symbology:{All:function(){return e.get("/symbology").then((function(e){return e.data.data}))},ParseMana:function(t){return e.get("/symbology/parse-mana",{params:{cost:t}}).then((function(e){return e.data}))}},Cards:{Autocomplete:function(t){return e.get("/cards/autocomplete",{params:{q:t,include_extras:!0}}).then((function(e){return e.data.data}))},Named:function(t){return e.get("/cards/named",{params:{fuzzy:t}}).then((function(e){return e.data}))}},Sets:{All:function(){return e.get("/sets").then((function(e){return e.data.data}))}}}}(),ce=Object(h.a)({},re,{getImage:function(e,t){var n,a,r;switch(e.layout){case"transform":case"double_faced_token":r=e.card_faces[0].image_uris;break;default:r=e.image_uris}return null!==(n=null===(a=r)||void 0===a?void 0:a[t])&&void 0!==n?n:null},getPlaceholder:function(e){return"https://via.placeholder.com/146x204?text=".concat(e.replace(/\s/,"+"))}}),ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=m.a.useRef();m.a.useEffect((function(){a.current=t}),[t]),m.a.useEffect((function(){if(n&&n.addEventListener){var t=function(e){return a.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])},oe=n(346),le=n(234),ue=n(352),se=n(353),me=n(235),de=n(86),fe=n.n(de),pe=n(88),he=n.n(pe),be=n(165),ge=n(16),ve=Object(be.a)({palette:{type:"dark",primary:{main:ge.a.deepOrange[700]},secondary:{main:ge.a.blueGrey[500]}}},{constants:{drawerWidth:"260px",drawerWidthClosed:"72px",appletHeight:"280px"}}),Ee=(p.a,p.b),ye=p.c;function ke(){var e=Object(E.a)(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return ke=function(){return e},e}var Oe=ye(oe.a)(ke()),we=function(e){var t=e.open,n=m.a.useContext(H),a=Object(v.a)(n,2),r=a[0],i=a[1],o=function(e){return function(){i({type:"SelectDeck",name:e})}},l=function(e,n,a){var c,i,l,u;return m.a.createElement(x.a,{key:e.name,title:t?"":(r.decks[e.name].isDirty?"*":"")+(null!==(c=n)&&void 0!==c?c:e.name),placement:"right"},m.a.createElement(le.a,{button:!0,onClick:o(e.name)},m.a.createElement(ue.a,null,m.a.createElement(se.a,{invisible:!r.decks[e.name].isDirty,color:"primary",overlap:"circle",badgeContent:" ",anchorOrigin:{vertical:"bottom",horizontal:"right"}},m.a.createElement(C.a,{alt:null!==(i=n)&&void 0!==i?i:e.name,src:e.previewUrl},null!==(l=a)&&void 0!==l?l:m.a.createElement(fe.a,null)))),m.a.createElement(Oe,{primary:null!==(u=n)&&void 0!==u?u:e.name})))};return m.a.createElement(m.a.Fragment,null,m.a.createElement(me.a,null,l(r.decks[c.Collection],"Collection"),l(r.decks[c.Wishlist],"Wishlist",m.a.createElement(he.a,null))),m.a.createElement(S.a,null),m.a.createElement(me.a,null,Object.values(r.decks).filter((function(e){return e.name!==c.Collection&&e.name!==c.Wishlist})).map((function(e){return l(e)}))))},je=n(378),xe=n(360),Ce=n(358),Se=n(361),De=n(244),Ne=n(362),We=n(363),Ae=n(364),Ie=n(365),ze=n(366),Te=n(384),Pe=n(359),Ue=function(e){var t=e.label,n=e.onNameSelect,a=m.a.useState(""),r=Object(v.a)(a,2),c=r[0],i=r[1],o=m.a.useState(!1),l=Object(v.a)(o,2),u=l[0],s=l[1],d=m.a.useState([]),f=Object(v.a)(d,2),p=f[0],b=f[1],g=m.a.useState(!1),E=Object(v.a)(g,2),y=E[0],k=E[1],O=m.a.useState(void 0),w=Object(v.a)(O,2),j=w[0],x=w[1],C=function(e){i(e),b([]),n&&n(e)};return m.a.useEffect((function(){u||b([])}),[u]),m.a.createElement(Te.a,{style:{width:300},open:u,value:c,onOpen:function(){return s(!0)},onClose:function(){return s(!1)},onChange:function(e,t){return C(t)},onInputChange:function(e,t,n){return function(e,t){c!==e&&"reset"!==t&&(i(e),clearTimeout(j),x(setTimeout((function(){e.length<2||(k(!0),ce.Cards.Autocomplete(e).then((function(t){b(t),k(!1),1===t.length&&t[0].toLowerCase().includes(e.toLowerCase())&&(i(t[0]),C(t[0]),s(!1))})))}),500)))}(t,n)},options:p,loading:y,renderInput:function(e){return m.a.createElement(Ce.a,Object.assign({},e,{label:t,fullWidth:!0,variant:"outlined",InputProps:Object(h.a)({},e.InputProps,{endAdornment:m.a.createElement(m.a.Fragment,null,y?m.a.createElement(Pe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})},Le=n(95);function Me(){var e=Object(E.a)([""]);return Me=function(){return e},e}function _e(){var e=Object(E.a)(["\n    align-self: flex-end;\n"]);return _e=function(){return e},e}function Be(){var e=Object(E.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n    min-height: ",";\n    padding: ","px;\n"]);return Be=function(){return e},e}function Ge(){var e=Object(E.a)(["\n    flex: 1 1 auto;\n"]);return Ge=function(){return e},e}var Fe=ye.div(Ge()),Re=ye(Le.a)(Be(),(function(e){return e.theme.constants.appletHeight}),(function(e){return e.theme.spacing(2)})),Ke=ye.div(_e()),He=ye(j.a).attrs((function(e){return{component:"h2",variant:"h6",color:"primary",gutterBottom:!0}}))(Me());function Je(){var e=Object(E.a)(["\n    display: flex;\n    margin-top: ","px;\n    align-items: center;\n\n    & .MuiAutocomplete-root {\n        flex-grow: 1;\n        margin-right: ","px;\n    }\n"]);return Je=function(){return e},e}var Qe=ye.div(Je(),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)})),qe=function(){var e=m.a.useContext(H),t=Object(v.a)(e,2),n=t[0],a=t[1],r=m.a.useState(""),c=Object(v.a)(r,2),i=c[0],o=c[1],l=m.a.useState(""),u=Object(v.a)(l,2),s=u[0],d=u[1],f=m.a.useState(!1),p=Object(v.a)(f,2),h=p[0],b=p[1],g=m.a.useState(null),E=Object(v.a)(g,2),y=E[0],k=E[1],O=m.a.useState(""),w=Object(v.a)(O,2),j=w[0],x=w[1],S=function(){return b(!1)},D=function(){b(!1),ae.createNewDeck(a,{name:s,fileContent:i,previewUrl:j}),o(""),N(""),x("")},N=function(e){d(e),""!==e?n.decks[e]?k("Deck with this name already exists"):k(null):k("Deck name can't be empty")};return m.a.useEffect((function(){return N("")}),[]),m.a.createElement(xe.a,{item:!0,xs:12,sm:6,md:4},m.a.createElement(Re,null,m.a.createElement(He,null,"Add deck"),m.a.createElement(Fe,null,m.a.createElement(Ce.a,{label:"Deck name",variant:"outlined",error:!!y,helperText:y,value:s,onChange:function(e){return N(e.target.value)},fullWidth:!0}),m.a.createElement(Qe,null,m.a.createElement(Ue,{label:"Preview card",onNameSelect:function(e){e?ce.Cards.Named(e).then((function(e){var t;x(null!==(t=ce.getImage(e,"art_crop"))&&void 0!==t?t:"")})):x("")}}),m.a.createElement(C.a,{alt:"Preview icon",src:j},m.a.createElement(fe.a,null)))),m.a.createElement(Ke,null,m.a.createElement(Se.a,{size:"small"},m.a.createElement(De.a,{disabled:!!y,onClick:function(){return b(!0)}},"Import"),m.a.createElement(De.a,{disabled:!!y,color:"primary",onClick:D},"Create empty"))),m.a.createElement(Ne.a,{open:h,onClose:S,"aria-labelledby":"import-deck-dialog",fullWidth:!0,maxWidth:"md"},m.a.createElement(We.a,{id:"import-deck-dialog"},"Import"),m.a.createElement(Ae.a,null,m.a.createElement(Ie.a,null,"Paste exported deck below."),m.a.createElement(Ce.a,{autoFocus:!0,fullWidth:!0,label:"Import",multiline:!0,rows:"15",variant:"outlined",value:i,onChange:function(e){return o(e.target.value)}})),m.a.createElement(ze.a,null,m.a.createElement(De.a,{onClick:S,color:"primary"},"Cancel"),m.a.createElement(De.a,{onClick:D,color:"primary"},"Import")))))},Xe=n(153),$e=n.n(Xe),Ve=n(92),Ye=n.n(Ve),Ze=n(154),et=n.n(Ze),tt=n(155),nt=n.n(tt),at=n(142),rt=n.n(at),ct=n(103),it=n(143),ot=n.n(it),lt=n(386),ut=n(144);var st=function(e,t){if(!e)throw new ut.AssertionError({message:t})},mt=function(e){var t,n,a=e.card,r=e.deckName,o=e.sectionName,l=m.a.useContext(H),u=Object(v.a)(l,2),s=u[0],d=u[1],f=null!==(t=null!==(n=r)&&void 0!==n?n:s.selectedDeck)&&void 0!==t?t:null,p=function(){return void 0!==s.decks[c.Wishlist].cards[i.Default][a.name]},b=(f?Object.keys(s.decks[f].cards):[]).filter((function(e){return e!==o}));return{updateCardQuantity:function(e){var t;st(!Object(B.isNullOrUndefined)(r),"DeckName should not be empty if the preview actions are Deck"),d({type:"UpdateDeckCard",deckName:r,sectionName:null!==(t=o)&&void 0!==t?t:i.Default,card:Object(h.a)({},a,{amount:e})})},openScryfallPage:function(){return a.scryfall_uri&&window.open(a.scryfall_uri,"_blank")},isOnWishlist:p,toggleWishlist:function(){return p()?d({type:"UpdateDeckCard",deckName:c.Wishlist,sectionName:i.Default,card:Object(h.a)({},a,{amount:0})}):d({type:"UpdateDeckCard",deckName:c.Wishlist,sectionName:i.Default,card:Object(h.a)({},a,{amount:1})})},wishlistTooltip:function(){return p()?"Remove from wishlist":"Add to wishlist"},removeCard:function(){var e;st(!Object(B.isNullOrUndefined)(r),"DeckName should not be empty if the preview actions are Deck"),d({type:"UpdateDeckCard",deckName:r,sectionName:null!==(e=o)&&void 0!==e?e:i.Default,card:Object(h.a)({},a,{amount:0})})},sections:b,changeSection:function(e){var t;st(!Object(B.isNullOrUndefined)(r),"DeckName should not be empty if the preview actions are Deck"),d({type:"UpdateDeckCard",deckName:r,sectionName:null!==(t=o)&&void 0!==t?t:i.Default,card:Object(h.a)({},a,{amount:0})}),d({type:"UpdateDeckCard",deckName:r,sectionName:e,card:Object(h.a)({},a,{amount:a.amount})})},addToDeck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Default;st(!Object(B.isNullOrUndefined)(f),"TargetDeck should not be empty if the preview actions are SearchDeck"),d({type:"UpdateDeckCard",deckName:f,sectionName:e,card:Object(h.a)({},a,{amount:1})})}}};function dt(){var e=Object(E.a)(["\n            width: ","px;\n            height: ","px;\n            font-size: 0.875rem;\n        "]);return dt=function(){return e},e}function ft(){var e=Object(E.a)(["\n    cursor: pointer;\n    color: ",";\n\n    ",'\n\n    &:hover:before {\n        content: "','";\n    }\n']);return ft=function(){return e},e}var pt=ye(C.a).attrs((function(e){return{className:"chip"===e.size?e.className+" MuiChip-avatar MuiChip-avatarSmall":e.className}}))(ft(),(function(e){return e.theme.palette.text.primary}),(function(e){return"inline"===e.size&&Ee(dt(),e.theme.spacing(3),e.theme.spacing(3))}),(function(e){return e.action})),ht=function(e){var t=e.val,n=e.onChange,a=e.size,r=m.a.useContext(H)[0];return m.a.createElement(pt,{title:"",onClick:function(e){e.stopPropagation(),n(t+(r.modifierKeys.shift?1:-1))},action:r.modifierKeys.shift?"+":"-",size:a},t)};function bt(){var e=Object(E.a)(["\n    display: inline-block;\n    height: 16px;\n    width: 16px;\n    margin: 1px 1px -2px 1px;\n"]);return bt=function(){return e},e}var gt=ye.svg(bt()),vt=function(e){var t=e.symbol,n=m.a.useContext(H),a=Object(v.a)(n,1)[0],r=m.a.useState(),c=Object(v.a)(r,2),i=c[0],o=c[1];return m.a.useEffect((function(){var e;o(null!==(e=a.symbolList[t])&&void 0!==e?e:Object.values(a.symbolList).find((function(e){return e.loose_variant===t})))}),[t,a.symbolList]),i?m.a.createElement(gt,{dangerouslySetInnerHTML:{__html:i.svg}}):m.a.createElement(m.a.Fragment,null,t)},Et=function(e){var t=e.text,n=Object(q.a)(e,["text"]),a=m.a.useState([]),r=Object(v.a)(a,2),c=r[0],i=r[1];return m.a.useEffect((function(){var e;i((null!==(e=t.match(/({.*?})|([^{]+)/g))&&void 0!==e?e:[]).map((function(e,t){return"{"===e[0]?m.a.createElement(vt,{key:t,symbol:e}):m.a.createElement("span",{key:t},e)})))}),[t]),m.a.createElement(j.a,n,c)};function yt(){var e=Object(E.a)(["\n    width: 100%;\n\n    & .MuiChip-label {\n        flex: 1 1 auto;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n\n    & .MuiChip-deleteIcon {\n        width: unset;\n        height: unset;\n        flex-shrink: 0;\n        margin-left: ","px;\n        margin-top: 1px;\n    }\n"]);return yt=function(){return e},e}var kt=ye(lt.a)(yt(),(function(e){return e.theme.spacing(1)})),Ot=function(e){var t,n=mt(e),a=n.updateCardQuantity,r=n.openScryfallPage,c=e.card;return m.a.createElement(kt,{size:"small",variant:"outlined",label:c.name,deleteIcon:m.a.createElement(Et,{text:null!==(t=c.mana_cost)&&void 0!==t?t:"",noWrap:!0}),avatar:m.a.createElement(ht,{size:"chip",val:c.amount,onChange:a}),onDelete:r,onClick:r,title:"Open on scryfall"})};function wt(){var e=Object(E.a)(["\n    text-indent: ","px;\n"]);return wt=function(){return e},e}var jt=ye(j.a)(wt(),(function(e){return e.theme.spacing(1)})),xt=function(e){var t=e.cards,n=(e.sortBy,e.sortOrder,e.showGroups,Object(q.a)(e,["cards","sortBy","sortOrder","showGroups"]));return m.a.createElement(xe.a,{container:!0,direction:"column"},t.length>=1?t.map((function(e){return m.a.createElement(xe.a,{item:!0,key:e.name,xs:!0,zeroMinWidth:!0},m.a.createElement(Ot,Object.assign({card:e},n)))})):m.a.createElement(xe.a,{item:!0,xs:12},m.a.createElement(jt,{color:"textSecondary",variant:"subtitle2"},"Empty")))},Ct=n(369),St=n(145),Dt=n.n(St),Nt=n(11);function Wt(){var e=Object(E.a)(["\n                background-color: ",";\n            "]);return Wt=function(){return e},e}function At(){var e=Object(E.a)(["\n            background-color: ",";\n            &.Mui-disabled {\n                background-color: ",";\n            }\n        "]);return At=function(){return e},e}function It(){var e=Object(E.a)(["\n    ",";\n    &:hover {\n        ",";\n    }\n"]);return It=function(){return e},e}var zt=ye(k.a)(It(),(function(e){return e.background&&Ee(At(),e.theme.palette[e.background].main,Object(Nt.a)(e.theme.palette[e.background].main,.3))}),(function(e){return e.background&&Ee(Wt(),e.theme.palette[e.background].dark)})),Tt=function(e){var t=e.onClick,n=e.title,a=e.size,r=e.background,c=e.disabled,i=e.children;return m.a.createElement(x.a,{title:n},m.a.createElement("span",null,m.a.createElement(zt,{size:a,background:r,disabled:c,onClick:t,"aria-label":n},i,m.a.createElement(j.a,{variant:"srOnly"},n))))},Pt=n(232),Ut=n(168),Lt=n(367),Mt=n(242),_t=n(368),Bt=function(e){var t=e.actions,n=e.size,a=e.background,r=m.a.useState(!1),c=Object(v.a)(r,2),o=c[0],l=c[1],u=m.a.useRef(null),s=function(e){u.current&&u.current.contains(e.target)||l(!1)};return m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{ref:u},m.a.createElement(Tt,{title:"Change section",onClick:function(){return l((function(e){return!e}))},disabled:t.sections.length<=0,background:a,size:n},m.a.createElement(Dt.a,null))),m.a.createElement(Pt.a,{open:o,anchorEl:u.current,role:void 0,transition:!0},(function(e){var n=e.TransitionProps,a=e.placement;return m.a.createElement(Ut.a,Object.assign({},n,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),m.a.createElement(Le.a,{elevation:5},m.a.createElement(Lt.a,{onClickAway:s},m.a.createElement(Mt.a,null,t.sections.map((function(e){return m.a.createElement(_t.a,{key:e,onClick:function(){return t.changeSection(e)}},e===i.Default?"Default":e)}))))))})))},Gt=function(e){var t=e.actions,n=e.size,a=e.background;return m.a.createElement(Tt,{title:"Remove card",onClick:t.removeCard,background:a,size:n},m.a.createElement(Ye.a,null))},Ft=n(146),Rt=n.n(Ft),Kt=function(e){var t=e.actions,n=e.size,a=e.background;return m.a.createElement(Tt,{title:t.wishlistTooltip(),onClick:t.toggleWishlist,background:a,size:n},t.isOnWishlist()?m.a.createElement(he.a,null):m.a.createElement(Rt.a,null))};function Ht(){var e=Object(E.a)(["\n    transform: scaleX(",");\n    transition: all 0.2s ease-in-out;\n\n    & > * {\n        margin-right: ","px;\n    }\n"]);return Ht=function(){return e},e}function Jt(){var e=Object(E.a)(["\n    position: absolute;\n    bottom: ","px;\n    right: ","px;\n\n    display: flex;\n    align-items: center;\n\n    opacity: 0;\n    transition: opacity 0.2s ease-in-out;\n\n    ",":hover & {\n        opacity: 1;\n    }\n"]);return Jt=function(){return e},e}function Qt(){var e=Object(E.a)(["\n    position: absolute;\n    top: 25%;\n    left: ","px;\n"]);return Qt=function(){return e},e}function qt(){var e=Object(E.a)(["\n    border-radius: 4.75% / 3.5%;\n    background-image: repeating-linear-gradient(-55deg, #ddd, #ddd 5px, #ccc 5px, #ccc 10px);\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n"]);return qt=function(){return e},e}function Xt(){var e=Object(E.a)(["\n    padding-bottom: 139.344262295%;\n    width: 100%;\n    height: 0;\n    position: relative;\n"]);return Xt=function(){return e},e}var $t=ye.div(Xt()),Vt=ye.img(qt()),Yt=ye.div(Qt(),(function(e){return e.theme.spacing(2)})),Zt=ye.div(Jt(),(function(e){return e.theme.spacing(2)}),(function(e){return e.theme.spacing(2)}),$t),en=ye.div(Ht(),(function(e){return e.open?1:0}),(function(e){return e.theme.spacing(1)})),tn=function(e){var t,n=mt(e),a=e.card,r=m.a.useState(!1),c=Object(v.a)(r,2),i=c[0],o=c[1];return m.a.createElement($t,null,m.a.createElement(Vt,{src:null!==(t=ce.getImage(a,"normal"))&&void 0!==t?t:"",onClick:n.openScryfallPage,title:"Open on scryfall"}),!Object(B.isNullOrUndefined)(a.amount)&&m.a.createElement(Yt,null,m.a.createElement(ht,{val:a.amount,onChange:n.updateCardQuantity})),m.a.createElement(Zt,null,m.a.createElement(en,{open:i},m.a.createElement(Kt,{actions:n,background:"secondary"}),m.a.createElement(Bt,{actions:n,background:"secondary"}),m.a.createElement(Gt,{actions:n,background:"secondary"})),m.a.createElement(Ct.a,{color:"primary",onClick:function(){return o((function(e){return!e}))}},m.a.createElement(P.a,null))))},nn=function(e){var t=e.cards,n=(e.sortBy,e.sortOrder,e.showGroups,Object(q.a)(e,["cards","sortBy","sortOrder","showGroups"]));return m.a.createElement(xe.a,{container:!0,spacing:1,alignItems:"center"},t.length>=1?t.map((function(e){return m.a.createElement(xe.a,{key:e.name,item:!0,xs:6,lg:6,xl:4},m.a.createElement(tn,Object.assign({card:e},n)))})):m.a.createElement(xe.a,{item:!0,xs:12},m.a.createElement(jt,{color:"textSecondary"},"Empty")))},an=n(373),rn=n(372),cn=n(374),on=n(370),ln=n(375),un=n(371);function sn(){var e=Object(E.a)(["\n    width: 25px;\n    height: 20px;\n    fill: url(#rarity-",");\n"]);return sn=function(){return e},e}var mn=ye.svg(sn(),(function(e){return e.rarity})),dn=function(e){var t=e.set,n=e.rarity,a=m.a.useContext(H),r=Object(v.a)(a,1)[0],c=m.a.useState(),i=Object(v.a)(c,2),o=i[0],l=i[1];return m.a.useEffect((function(){l(r.setList[t])}),[t,r.setList]),o?m.a.createElement(mn,{rarity:n},m.a.createElement("defs",null,m.a.createElement("linearGradient",{id:"rarity-common"},m.a.createElement("stop",{offset:"0%",stopColor:"#000"})),m.a.createElement("linearGradient",{id:"rarity-uncommon",gradientTransform:"rotate(90)"},m.a.createElement("stop",{offset:"0%",stopColor:"#4d565a"}),m.a.createElement("stop",{offset:"50%",stopColor:"#a0c3d3"}),m.a.createElement("stop",{offset:"100%",stopColor:"#4d565a"})),m.a.createElement("linearGradient",{id:"rarity-rare",gradientTransform:"rotate(90)"},m.a.createElement("stop",{offset:"0%",stopColor:"#85723e"}),m.a.createElement("stop",{offset:"50%",stopColor:"#d4b975"}),m.a.createElement("stop",{offset:"100%",stopColor:"#85723e"})),m.a.createElement("linearGradient",{id:"rarity-mythic",gradientTransform:"rotate(90)"},m.a.createElement("stop",{offset:"0%",stopColor:"#b02911"}),m.a.createElement("stop",{offset:"50%",stopColor:"#e87f03"}),m.a.createElement("stop",{offset:"100%",stopColor:"#b02911"}))),m.a.createElement("svg",{dangerouslySetInnerHTML:{__html:o.icon_svg}})):m.a.createElement(m.a.Fragment,null,t)};function fn(){var e=Object(E.a)(["\n    display: none;\n    "," {\n        & {\n            display: initial;\n        }\n    }\n    "," {\n        & {\n            display: initial;\n        }\n    }\n"]);return fn=function(){return e},e}function pn(){var e=Object(E.a)(["\n                    position: absolute;\n                    transform: translateX(calc(-100% - 4px));\n                "]);return pn=function(){return e},e}function hn(){var e=Object(E.a)(["\n                    display: none;\n                "]);return hn=function(){return e},e}function bn(){var e=Object(E.a)(["\n                    position: absolute;\n                    transform: translateX(calc(-100% - 4px));\n                "]);return bn=function(){return e},e}function gn(){var e=Object(E.a)(["\n                    display: none;\n                "]);return gn=function(){return e},e}function vn(){var e=Object(E.a)(["\n    white-space: nowrap;\n    & > *:not(:last-child) {\n        margin-right: ","px;\n    }\n\n    "," {\n        & {\n            ","\n\n            ","\n        }\n    }\n\n    "," {\n        & {\n            ","\n\n            ","\n        }\n    }\n"]);return vn=function(){return e},e}var En=ye.div(vn(),(function(e){return e.theme.spacing(.5)}),(function(e){return e.theme.breakpoints.down("xs")}),(function(e){return!e.open&&Ee(gn())}),(function(e){return e.open&&Ee(bn())}),(function(e){return e.theme.breakpoints.between("md","sm")}),(function(e){return!e.open&&Ee(hn())}),(function(e){return e.open&&Ee(pn())})),yn=ye.div(fn(),(function(e){return e.theme.breakpoints.down("xs")}),(function(e){return e.theme.breakpoints.between("md","sm")})),kn=function(e){var t,n=mt(e),a=e.card,r=m.a.useState(!1),c=Object(v.a)(r,2),i=c[0],o=c[1];return m.a.createElement(on.a,null,m.a.createElement(Cn,{width:"40px",component:"th",scope:"row",align:"center"},Object(B.isNullOrUndefined)(a.amount)?"-":m.a.createElement(ht,{size:"inline",val:a.amount,onChange:n.updateCardQuantity})),m.a.createElement(Sn,null,m.a.createElement(un.a,{href:"#",onClick:n.openScryfallPage,color:"inherit",title:"Open on scryfall"},a.name)),m.a.createElement(Cn,{width:"40px",align:"center"},m.a.createElement(dn,{set:a.set,rarity:a.rarity})),m.a.createElement(rn.a,null,m.a.createElement(Et,{text:null!==(t=a.mana_cost)&&void 0!==t?t:"",noWrap:!0})),m.a.createElement(rn.a,{style:{position:"relative"}},m.a.createElement(En,{open:i},m.a.createElement(Kt,{actions:n,size:"small",background:i?"secondary":void 0}),m.a.createElement(Bt,{actions:n,size:"small",background:i?"secondary":void 0}),m.a.createElement(Gt,{actions:n,size:"small",background:i?"secondary":void 0})),m.a.createElement(yn,null,m.a.createElement(Tt,{title:"Actions",onClick:function(){return o((function(e){return!e}))},size:"small"},m.a.createElement(P.a,null)))))};function On(){var e=Object(E.a)(["\n    width: 60%;\n    max-width: 120px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n"]);return On=function(){return e},e}function wn(){var e=Object(E.a)([""]);return wn=function(){return e},e}function jn(){var e=Object(E.a)(["\n    width: 100%;\n    overflow-y: scroll;\n    & .MuiTableCell-sizeSmall {\n        padding: ",";\n    }\n"]);return jn=function(){return e},e}var xn=ye(an.a)(jn(),(function(e){return e.theme.spacing(.25,1)})),Cn=ye(rn.a).attrs((function(e){return{width:e.width}}))(wn()),Sn=ye(rn.a)(On()),Dn=function(e){var t=e.cards,n=(e.sortBy,e.sortOrder,e.showGroups,Object(q.a)(e,["cards","sortBy","sortOrder","showGroups"]));return m.a.createElement(xn,{size:"small","aria-label":"card table"},m.a.createElement(cn.a,null,m.a.createElement(on.a,null,m.a.createElement(Cn,{width:"40px",align:"center"},"#"),m.a.createElement(Sn,null,"Name"),m.a.createElement(Cn,{width:"40px",align:"center"},"Set"),m.a.createElement(rn.a,null,"Cost"),m.a.createElement(rn.a,null,"Actions"))),m.a.createElement(ln.a,null,t.length>=1?t.map((function(e){return m.a.createElement(kn,Object.assign({key:e.name,card:e},n))})):m.a.createElement(on.a,null,m.a.createElement(rn.a,{colSpan:6},m.a.createElement(jt,{color:"textSecondary"},"Empty")))))},Nn=function(e,t,n,a){return a(t[n])<a(e[n])?-1:a(t[n])>a(e[n])?1:0},Wn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return"Desc"===e?function(e,a){return Nn(e,a,t,n)}:function(e,a){return-Nn(e,a,t,n)}},An=function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))},In=["common","uncommon","rare","mythic"],zn=function(e,t){switch(e){case"Name":return Wn(t,"name");case"Cmc":return Wn(t,"mana_cost");case"Type":return Wn(t,"type_line");case"Rarity":return Wn(t,"rarity",(function(e){return In.indexOf(e)}))}},Tn=function(e){return m.a.createElement(m.a.Fragment,null,e.sectionName!==i.Default&&m.a.createElement(j.a,{variant:"h6"},e.sectionName),function(){var t=Object(h.a)({},ot()(e,"style","cards"),{cards:An(e.cards,zn(e.sortBy,e.sortOrder))});switch(e.style){case"List":return m.a.createElement(Dn,t);case"Images":return m.a.createElement(nn,t);case"Compressed":return m.a.createElement(xt,t)}}())},Pn=n(148),Un=n.n(Pn),Ln=n(147),Mn=n.n(Ln),_n=n(149),Bn=n.n(_n);function Gn(){var e=Object(E.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: ","px;\n\n    & .MuiTypography-root {\n        margin-right: ","px;\n    }\n\n    & .MuiButton-root {\n        padding-left: 0;\n        padding-right: 0;\n    }\n"]);return Gn=function(){return e},e}var Fn=ye.div(Gn(),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)})),Rn=function(e){var t=e.style,n=e.onToggle;return m.a.createElement(Fn,null,m.a.createElement(j.a,{variant:"caption"},"Display:"),m.a.createElement(Se.a,{variant:"outlined",size:"small"},["Standard","List","Images"].map((function(e){return m.a.createElement(De.a,{key:e,onClick:function(){return n(e)},variant:t===e?"contained":void 0},m.a.createElement(x.a,{title:e},function(e){switch(e){case"Standard":return m.a.createElement(Mn.a,null);case"List":return m.a.createElement(Un.a,null);case"Images":return m.a.createElement(Bn.a,null)}throw Error("Style ".concat(e," does not have an icon."))}(e)))}))))},Kn=n(150),Hn=n.n(Kn);function Jn(){var e=Object(E.a)(["\n    margin-bottom: ","px;\n    margin-left: ","px;\n"]);return Jn=function(){return e},e}var Qn=ye.div(Jn(),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)})),qn=function(e){var t=e.show,n=e.setShow;return m.a.createElement(Qn,null,m.a.createElement(Tt,{size:"small",title:t?"Hide groups":"Show groups",onClick:function(){return n(!t)}},m.a.createElement(Hn.a,null)))},Xn=n(151),$n=n.n(Xn);function Vn(){var e=Object(E.a)(["\n    margin-bottom: ","px;\n"]);return Vn=function(){return e},e}var Yn=ye.div(Vn(),(function(e){return e.theme.spacing(1)})),Zn=function(e){var t=e.sortBy,n=e.setSortBy,a=e.sortOrder,r=e.setSortOrder,c=m.a.useState(!1),i=Object(v.a)(c,2),o=i[0],l=i[1],u=m.a.useRef(null),s=function(e){u.current&&u.current.contains(e.target)||l(!1)};return m.a.createElement(Yn,null,m.a.createElement(De.a,{ref:u,size:"small",onClick:function(){return l((function(e){return!e}))},startIcon:m.a.createElement($n.a,null)},"Sort by"),m.a.createElement(Pt.a,{open:o,anchorEl:u.current,role:void 0,transition:!0},(function(e){var c=e.TransitionProps,i=e.placement;return m.a.createElement(Ut.a,Object.assign({},c,{style:{transformOrigin:"bottom"===i?"center top":"center bottom"}}),m.a.createElement(Le.a,{elevation:5},m.a.createElement(Lt.a,{onClickAway:s},m.a.createElement(Mt.a,null,[["Name","Asc"],["Name","Desc"],["Cmc","Asc"],["Cmc","Desc"],["Type","Asc"],["Type","Desc"],["Rarity","Asc"],["Rarity","Desc"]].map((function(e){var c=Object(v.a)(e,2),i=c[0],o=c[1];return m.a.createElement(_t.a,{key:"".concat(i," (").concat(o,")"),selected:i===t&&o===a,onClick:function(e){n(i),r(o)}},"".concat(i," (").concat(o,")"))}))))))})))},ea=n(75),ta=n(94),na=n(152);function aa(){var e=Object(E.a)(["\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return aa=function(){return e},e}var ra=ye.div(aa()),ca=function(){return m.a.createElement(ra,null,m.a.createElement(ea.a,{icon:ta.b}))},ia=function(){return m.a.createElement(ra,null,m.a.createElement(ea.a,{icon:ta.c}))},oa=function(){return m.a.createElement(ra,null,m.a.createElement(ea.a,{icon:na.a}))},la=function(){return m.a.createElement(ra,null,m.a.createElement(ea.a,{icon:ta.a}))};function ua(){var e=Object(E.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: ","px;\n\n    & .MuiDialogContentText-root {\n        flex-grow: 1;\n        margin-bottom: 0;\n    }\n"]);return ua=function(){return e},e}function sa(){var e=Object(E.a)(["\n    margin-bottom: ","px;\n    width: 100%;\n    overflow-x: auto;\n    overflow-y: hidden;\n"]);return sa=function(){return e},e}var ma=ye.div(sa(),(function(e){return e.theme.spacing(2)})),da=ye(Fe)(ua(),(function(e){return e.theme.spacing(1)})),fa=function(e){var t=e.deckName,n=m.a.useContext(H),a=Object(v.a)(n,2),r=a[0],i=a[1],o=r.decks[t],l=m.a.useState(!0),u=Object(v.a)(l,2),s=u[0],d=u[1],f=m.a.useState(!1),p=Object(v.a)(f,2),b=p[0],g=p[1],E=m.a.useState("List"),y=Object(v.a)(E,2),k=y[0],O=y[1],w=m.a.useState("Cmc"),j=Object(v.a)(w,2),x=j[0],C=j[1],S=m.a.useState("Asc"),D=Object(v.a)(S,2),N=D[0],W=D[1],A=m.a.useState(!1),I=Object(v.a)(A,2),z=I[0],T=I[1];m.a.useEffect((function(){var e,t=Object.values(o.cards).reduce((function(e,t){return[].concat(Object(X.a)(e),Object(X.a)(Object.values(t)))}),[]).filter((function(e){return!r.cardList[e.name]}));(e=ct.Cards).collection.apply(e,Object(X.a)(t.map((function(e){return ct.CardIdentifier.byName(e.name)})))).on("data",(function(e){return i({type:"AddCard",card:e})}))}),[t]);return m.a.createElement(xe.a,{item:!0,xs:12,md:s?6:4},m.a.createElement(Re,null,m.a.createElement(xe.a,{container:!0,direction:"row",justify:"space-between"},m.a.createElement(xe.a,{item:!0},m.a.createElement(He,null,"Deck preview")),m.a.createElement(xe.a,{item:!0},m.a.createElement(Tt,{title:s?"Compress":"Expand",size:"small",onClick:function(){return d((function(e){return!e}))}},s?m.a.createElement(ca,null):m.a.createElement(ia,null)),m.a.createElement(Tt,{title:"Close preview",size:"small",onClick:function(){return i({type:"SelectDeck",name:null})}},m.a.createElement($e.a,null)))),m.a.createElement(xe.a,{container:!0,justify:"space-between"},m.a.createElement(Zn,{sortBy:x,setSortBy:C,sortOrder:N,setSortOrder:W}),m.a.createElement(qn,{show:z,setShow:T}),m.a.createElement(Fe,null),s&&m.a.createElement(Rn,{style:k,onToggle:O})),m.a.createElement(Fe,null,Object.entries(o.cards).map((function(e){var n=Object(v.a)(e,2),a=n[0],i=n[1];return m.a.createElement(ma,{key:a},m.a.createElement(Tn,{cards:Object.values(i).map((function(e){var t;return Object(h.a)({},e,{},null!==(t=r.cardList[e.name])&&void 0!==t?t:{})})),style:s?k:"Compressed",actions:t===c.Wishlist?"SearchWishlist":"Deck",sortBy:x,sortOrder:N,showGroups:z,deckName:t,sectionName:a}))}))),m.a.createElement(Ke,null,m.a.createElement(Tt,{title:"Export deck",onClick:function(){return g(!0)}},m.a.createElement(et.a,null)),t!==c.Collection&&t!==c.Wishlist&&m.a.createElement(Tt,{title:"Delete deck",onClick:function(){return ae.deleteDeck(i,{name:t,id:r.files[t]})}},m.a.createElement(Ye.a,null)),r.decks[o.name].isDirty&&m.a.createElement(Tt,{title:"Save changes",onClick:function(){return ae.updateFile({id:r.files[t],fileContent:V.deserialize(o.cards)}).then((function(){return i({type:"UpdateDeck",name:t,isDirty:!1})}))},background:"primary"},m.a.createElement(nt.a,null))),m.a.createElement(Ne.a,{open:b,onClose:function(){return g(!1)},"aria-labelledby":"export-deck-dialog",fullWidth:!0,maxWidth:"md"},m.a.createElement(We.a,{id:"import-deck-dialog"},"Export"),m.a.createElement(Ae.a,null,m.a.createElement(da,null,m.a.createElement(Ie.a,null,"Copy exported text below."),m.a.createElement(Tt,{title:"Copy to clipboard",onClick:function(){return rt()(V.deserialize(o.cards))}},m.a.createElement(la,null))),m.a.createElement(Ce.a,{label:"Export",multiline:!0,rows:"15",fullWidth:!0,variant:"outlined",value:V.deserialize(o.cards),InputProps:{readOnly:!0}})))))},pa=n(376),ha=n(377),ba=n(385),ga=n(156),va=n.n(ga),Ea=n(157),ya=n.n(Ea);function ka(){var e=Object(E.a)(["\n    display: flex;\n    margin-top: ","px;\n    align-items: center;\n\n    & .MuiAutocomplete-root {\n        flex-grow: 1;\n        margin-right: ","px;\n    }\n"]);return ka=function(){return e},e}var Oa=ye.div(ka(),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)})),wa=function(){var e=m.a.useState(""),t=Object(v.a)(e,2),n=t[0],a=t[1],r=m.a.useState([]),c=Object(v.a)(r,2),i=c[0],o=c[1],l=m.a.useState(!1),u=Object(v.a)(l,2),s=u[0],d=u[1],f=function(){return d(!1)},p=m.a.useState({colors:{r:!1,g:!1,u:!1,b:!1,w:!1},colorExactMatch:!1,cmc:0,cmcType:"="}),b=Object(v.a)(p,2),g=b[0],E=b[1],y=function(e){return function(t){var n=Object(h.a)({},g);n.colors[e]=t.target.checked,E(n)}};return m.a.createElement(xe.a,{item:!0,xs:12,md:!0},m.a.createElement(Re,null,m.a.createElement(He,null,"Card search"),m.a.createElement(Fe,null,m.a.createElement(Oa,null,m.a.createElement(Te.a,{freeSolo:!0,autoHighlight:!0,disableClearable:!0,options:i,inputValue:n,onInputChange:function(e,t){return a(t),void ce.Cards.Autocomplete(n).then((function(e){return o(e)}))},renderInput:function(e){return m.a.createElement(Ce.a,Object.assign({},e,{label:"Card name",variant:"outlined",fullWidth:!0}))}}))),m.a.createElement(Ne.a,{open:s,onClose:f,"aria-labelledby":"advanced-card-search-dialog",maxWidth:"md",fullWidth:!0},m.a.createElement(We.a,{id:"advanced-card-search-dialog"},"Advanced card search"),m.a.createElement(Ae.a,null,m.a.createElement(j.a,{variant:"subtitle2"},"Filter by color"),m.a.createElement(pa.a,{row:!0},m.a.createElement(ha.a,{label:m.a.createElement(Et,{text:"{R} Red"}),control:m.a.createElement(ba.a,{checked:g.colors.r,onChange:y("r")})}),m.a.createElement(ha.a,{label:m.a.createElement(Et,{text:"{G} Green"}),control:m.a.createElement(ba.a,{checked:g.colors.g,onChange:y("g")})}),m.a.createElement(ha.a,{label:m.a.createElement(Et,{text:"{U} Blue"}),control:m.a.createElement(ba.a,{checked:g.colors.u,onChange:y("u")})}),m.a.createElement(ha.a,{label:m.a.createElement(Et,{text:"{B} Black"}),control:m.a.createElement(ba.a,{checked:g.colors.b,onChange:y("b")})}),m.a.createElement(ha.a,{label:m.a.createElement(Et,{text:"{W} White"}),control:m.a.createElement(ba.a,{checked:g.colors.w,onChange:y("w")})})),m.a.createElement(ha.a,{label:"Exact color match?",control:m.a.createElement(ba.a,{checked:g.colorExactMatch,onChange:function(e){return E(Object(h.a)({},g,{colorExactMatch:e.target.checked}))}})})),m.a.createElement(ze.a,null,m.a.createElement(De.a,{onClick:function(){return E({colors:{r:!1,g:!1,u:!1,b:!1,w:!1},colorExactMatch:!1,cmc:0,cmcType:"="})},color:"primary"},"Reset"),m.a.createElement(De.a,{onClick:f,color:"primary"},"OK"))),m.a.createElement(Ke,null,m.a.createElement(x.a,{title:"Advanced search filter"},m.a.createElement(De.a,{onClick:function(){return d(!0)}},m.a.createElement(va.a,null))),m.a.createElement(x.a,{title:"Search for results"},m.a.createElement(De.a,{onClick:function(){alert(JSON.stringify(g))}},m.a.createElement(ya.a,null))))))},ja=function(){return m.a.createElement(xe.a,{item:!0,xs:12,sm:!0,md:!0},m.a.createElement(Re,null,m.a.createElement(He,null,"User info"),"UserInfo paceholder."))},xa=function(){var e=m.a.useContext(H),t=Object(v.a)(e,1)[0];return m.a.createElement(je.a,{maxWidth:"xl"},m.a.createElement(xe.a,{container:!0,spacing:3},m.a.createElement(xe.a,{item:!0,direction:"row",container:!0,spacing:3},m.a.createElement(ja,null),m.a.createElement(qe,null)),m.a.createElement(xe.a,{item:!0,direction:"row",container:!0,spacing:3},m.a.createElement(wa,null),null!==t.selectedDeck&&m.a.createElement(fa,{deckName:t.selectedDeck}))))},Ca=function(){return m.a.createElement("div",null,"Not found")},Sa=n(158),Da=n.n(Sa),Na=function(e){var t=e.variant,n=e.onClick;return m.a.createElement(De.a,{variant:t,onClick:n,startIcon:m.a.createElement(oa,null)},m.a.createElement(j.a,{noWrap:!0},"Sign in"))},Wa=function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(xe.a,{container:!0,justify:"center",alignItems:"center",style:{padding:25}},m.a.createElement("img",{src:Da.a,alt:"",width:"150px",height:"150px",draggable:!1})),m.a.createElement(xe.a,{container:!0,justify:"center",alignItems:"center"},m.a.createElement(Na,{variant:"contained",onClick:ae.signIn})))};function Aa(){var e=Object(E.a)(["\n    margin-right: ","px;\n"]);return Aa=function(){return e},e}function Ia(){var e=Object(E.a)(["\n            "," {\n                & {\n                    margin-left: ",";\n                    width: calc(100% - ",");\n                }\n            }\n        "]);return Ia=function(){return e},e}function za(){var e=Object(E.a)(["\n    flex-grow: 1;\n    padding: ","px;\n    margin-left: ",";\n    ","\n    ","\n\n    ","\n    "," {\n        & {\n            width: 100%;\n            margin-left: 0;\n        }\n    }\n"]);return za=function(){return e},e}function Ta(){var e=Object(E.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    padding: ","px;\n"]);return Ta=function(){return e},e}function Pa(){var e=Object(E.a)(["\n    width: ",";\n    flex-shrink: 0;\n    white-space: nowrap;\n    ","\n\n    .MuiDrawer-paper {\n        ","\n    }\n"]);return Pa=function(){return e},e}function Ua(){var e=Object(E.a)(["\n    width: ",";\n    transition: ",";\n    overflow-x: hidden;\n\n    "," {\n        & {\n            width: 0;\n        }\n    }\n"]);return Ua=function(){return e},e}function La(){var e=Object(E.a)(["\n    width: ",";\n    transition: ",";\n"]);return La=function(){return e},e}function Ma(){var e=Object(E.a)(["\n            display: none;\n        "]);return Ma=function(){return e},e}function _a(){var e=Object(E.a)(["\n    margin-right: 36px;\n    ","\n\n    "," {\n        & {\n            margin-right: ","px;\n            display: inline-block;\n        }\n    }\n"]);return _a=function(){return e},e}function Ba(){var e=Object(E.a)(["\n            "," {\n                & {\n                    width: 100%;\n                    margin-left: 0;\n                }\n            }\n        "]);return Ba=function(){return e},e}function Ga(){var e=Object(E.a)(["\n    z-index: ",";\n    ","\n    ","\n    ","\n"]);return Ga=function(){return e},e}function Fa(){var e=Object(E.a)(["\n    transition: ",";\n"]);return Fa=function(){return e},e}function Ra(){var e=Object(E.a)(["\n    margin-left: ",";\n    width: calc(100% - ",");\n    transition: ",";\n"]);return Ra=function(){return e},e}var Ka=Ee(Ra(),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.theme.transitions.create(["width","margin"],{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.enteringScreen})})),Ha=Ee(Fa(),(function(e){return e.theme.transitions.create(["width","margin"],{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.leavingScreen})})),Ja=ye(y.a)(Ga(),(function(e){return e.theme.zIndex.drawer+1}),Ha,(function(e){return e.open&&Ka}),(function(e){return e.open&&Ee(Ba(),e.theme.breakpoints.down("xs"))})),Qa=ye(k.a)(_a(),(function(e){return e.open&&Ee(Ma())}),(function(e){return e.theme.breakpoints.down("xs")}),(function(e){return e.theme.spacing(1)})),qa=Ee(La(),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.theme.transitions.create("width",{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.enteringScreen})})),Xa=Ee(Ua(),(function(e){return e.theme.constants.drawerWidthClosed}),(function(e){return e.theme.transitions.create("width",{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.leavingScreen})}),(function(e){return e.theme.breakpoints.down("xs")})),$a=ye(O.a).attrs((function(){return{variant:"permanent"}}))(Pa(),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.open?qa:Xa}),(function(e){return e.open?qa:Xa})),Va=ye(w.a)(Ta(),(function(e){return e.theme.spacing(0,1)})),Ya=ye.div(za(),(function(e){return e.theme.spacing(3)}),(function(e){return e.theme.constants.drawerWidthClosed}),Ha,(function(e){return e.open&&Ka}),(function(e){return e.open&&Ee(Ia(),e.theme.breakpoints.down("sm"),(function(e){return e.theme.constants.drawerWidthClosed}),(function(e){return e.theme.constants.drawerWidthClosed}))}),(function(e){return e.theme.breakpoints.down("xs")})),Za=ye.div(Aa(),(function(e){return e.theme.spacing(1)})),er=function(){var e=m.a.useReducer(Q,K),t=Object(v.a)(e,2),n=t[0],a=t[1],r=m.a.useState(),c=Object(v.a)(r,2),i=c[0],o=c[1],l=m.a.useState(!1),u=Object(v.a)(l,2),s=u[0],d=u[1],f=m.a.useState(!1),p=Object(v.a)(f,2),b=p[0],E=p[1];return ie("keydown",(function(e){"Shift"!==e.key||n.modifierKeys.shift||a({type:"SetModifierKey",key:"shift",value:!0})})),ie("keyup",(function(e){"Shift"===e.key&&n.modifierKeys.shift&&a({type:"SetModifierKey",key:"shift",value:!1})})),m.a.useEffect((function(){ae.initClient((function(e){return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(d(e),e){t.next=3;break}return t.abrupt("return");case 3:o(ae.getProfile()),ae.prepareAppData()(a);case 5:case"end":return t.stop()}}))})),ce.Symbology.All().then((function(e){var t=L.a.create({baseURL:"",responseType:"text",headers:{"Content-Type":"image/svg+xml"}});return Promise.all(e.map((function(e){return t.get(e.svg_uri,{transformResponse:function(t){return Object(h.a)({},e,{svg:t})}})})))})).then((function(e){a({type:"AddSymbols",symbols:e.map((function(e){return e.data}))})})).then(ce.Sets.All).then((function(e){var t=L.a.create({baseURL:"",responseType:"text",headers:{"Content-Type":"image/svg+xml"}});return Promise.all(e.map((function(e){return t.get(e.icon_svg_uri,{transformResponse:function(t){return Object(h.a)({},e,{icon_svg:t})}})})))})).then((function(e){a({type:"AddSets",sets:e.map((function(e){return e.data}))})}))}),[]),m.a.createElement(H.Provider,{value:[n,a]},m.a.createElement(Ja,{position:"sticky",open:b},m.a.createElement(w.a,null,m.a.createElement(Qa,{color:"inherit","aria-label":"open drawer",onClick:function(){return E((function(e){return!e}))},edge:"start",open:b},m.a.createElement(P.a,null)),m.a.createElement(j.a,{variant:"h6",style:{overflow:"hidden"}},"MTGCollection"),m.a.createElement(Fe,null),s?m.a.createElement(m.a.Fragment,null,!Object(B.isNullOrUndefined)(i)&&m.a.createElement(Za,null,m.a.createElement(x.a,{title:"Signed in as ".concat(i.getGivenName()," (").concat(i.getEmail(),")")},m.a.createElement(C.a,{alt:i.getGivenName(),src:i.getImageUrl()}))),m.a.createElement(Tt,{title:"SignOut",onClick:function(){ae.signOut(),o(void 0)}},m.a.createElement(z.a,null))):m.a.createElement(Na,{onClick:ae.signIn}))),m.a.createElement($a,{open:b},m.a.createElement(Va,null,m.a.createElement(k.a,{onClick:function(){return E(!1)}},"rtl"===ve.direction?m.a.createElement(A.a,null):m.a.createElement(N.a,null))),m.a.createElement(S.a,null),s&&m.a.createElement(we,{open:b})),m.a.createElement(Ya,{open:b},m.a.createElement(M.a,{basename:"/MTGCollection"},m.a.createElement(_.a,{to:s?"/":"/signin/"}),m.a.createElement(_.d,null,m.a.createElement(_.b,{exact:!0,path:"/",component:xa}),m.a.createElement(_.b,{exact:!0,path:"/signin/",component:Wa}),m.a.createElement(_.b,{component:Ca})))))},tr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function nr(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}f.a.render(m.a.createElement(l.b,{injectFirst:!0},m.a.createElement(p.a,{theme:ve},m.a.createElement(u.a,{theme:ve},m.a.createElement(o.a,null),m.a.createElement(er,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/MTGCollection",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/MTGCollection","/service-worker.js");tr?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):nr(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):nr(t,e)}))}}()}},[[190,1,2]]]);
//# sourceMappingURL=main.a040ebe2.chunk.js.map