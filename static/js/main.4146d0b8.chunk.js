(this["webpackJsonpmtg-collection"]=this["webpackJsonpmtg-collection"]||[]).push([[0],{158:function(e,t,n){e.exports=n.p+"static/media/logo.81aa9e7e.png"},190:function(e,t,n){e.exports=n(230)},230:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o=n(383),l=n(348),u=n(382),s=n(0),m=n.n(s),d=n(14),f=n.n(d),p=n(66),h=n(10),g=n(15),v=n.n(g),b=n(9),E=n(8),y=n(379),O=n(357),k=n(380),j=n(381),w=n(47),C=n(350),x=n(354),S=n(355),D=n(161),N=n.n(D),W=n(160),I=n.n(W),A=n(159),z=n.n(A),T=n(91),P=n.n(T),U=n(162),L=n(45),M=n(31),_=n(7);!function(e){e.Collection="_collection",e.Wishlist="_wishlist"}(c||(c={})),function(e){e.Default="_default",e.Sideboard="Sideboard",e.Maybeboard="Maybeboard"}(i||(i={}));var B,G=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return Object(h.a)({},e,Object(_.a)({},t,{}))}),Object(_.a)({},i.Default,{}))},F={files:(a={},Object(_.a)(a,c.Collection,""),Object(_.a)(a,c.Wishlist,""),a),decks:(r={},Object(_.a)(r,c.Collection,{name:c.Collection,cards:G()}),Object(_.a)(r,c.Wishlist,{name:c.Wishlist,cards:G()}),r),cardList:{},symbolList:{},setList:{},selectedDeck:null,modifierKeys:{shift:!1}},R=m.a.createContext([F,void 0]),K=n(46),H=(B={files:function(e,t){switch(t.type){case"CreateDeck":return Object(h.a)({},e,Object(_.a)({},t.name,t.link));case"DeleteDeck":return Object(h.a)({},Object(K.omit)(e,[t.name]))}return e},cardList:function(e,t){switch(t.type){case"AddCard":return Object(h.a)({},e,Object(_.a)({},t.card.name,t.card))}return e},symbolList:function(e,t){switch(t.type){case"AddSymbols":return t.symbols.reduce((function(e,t){return Object(h.a)({},e,Object(_.a)({},t.symbol,t))}),{})}return e},setList:function(e,t){switch(t.type){case"AddSets":return t.sets.reduce((function(e,t){return Object(h.a)({},e,Object(_.a)({},t.code,t))}),{})}return e},decks:function(e,t){switch(t.type){case"CreateDeck":return Object(h.a)({},e,Object(_.a)({},t.name,Object(h.a)({cards:G()},Object(K.omit)(t,["type","link"]))));case"UpdateDeck":return Object(h.a)({},e,Object(_.a)({},t.name,Object(h.a)({},e[t.name],{isDirty:!0},Object(K.omit)(t,["type"]))));case"UpdateDeckCard":return 0===t.card.amount?Object(h.a)({},e,Object(_.a)({},t.deckName,Object(h.a)({},e[t.deckName],{cards:Object(h.a)({},e[t.deckName].cards,Object(_.a)({},t.sectionName,Object(K.omit)(e[t.deckName].cards[t.sectionName],t.card.name))),isDirty:!0}))):Object(h.a)({},e,Object(_.a)({},t.deckName,Object(h.a)({},e[t.deckName],{cards:Object(h.a)({},e[t.deckName].cards,Object(_.a)({},t.sectionName,Object(h.a)({},e[t.deckName].cards[t.sectionName],Object(_.a)({},t.card.name,Object(h.a)({},e[t.deckName].cards[t.sectionName][t.card.name],{},t.card))))),isDirty:!0})));case"DeleteDeck":return Object(h.a)({},Object(K.omit)(e,[t.name]))}return e},selectedDeck:function(e,t){switch(t.type){case"SelectDeck":return t.name;case"DeleteDeck":return t.name===e?null:e}return e},modifierKeys:function(e,t){switch(t.type){case"SetModifierKey":return Object(h.a)({},e,Object(_.a)({},t.key,t.value))}return e}},function(e,t){var n={};for(var a in B)n[a]=B[a](e[a],t);return n}),J=n(2),Q=n(19),q=n(136),$={serialize:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e&&""!==e?e.split("##").map((function(e,t){var n,a;if(0===t)n=i.Default,a=e.split(/\r?\n/);else{var r=e.split(/\r?\n/),c=Object(q.a)(r);n=c[0],a=c.slice(1)}return[n,a.map((function(e){return e.match(/^(\d*) +(.*?)(?: # (.*))?$/)})).filter((function(e){return!Object(K.isNull)(e)})).map((function(e){return{amount:parseInt(e[1]),name:e[2],comment:e[3]}}))]})).reduce((function(e,t){return Object(h.a)({},e,Object(_.a)({},t[0],t[1].reduce((function(e,t){return Object(h.a)({},e,Object(_.a)({},t.name,t))}),{})))}),G.apply(void 0,n)):G.apply(void 0,n)},deserialize:function(e){return Object.entries(e).reduce((function(e,t){return"".concat(e).concat(t[0]!==i.Default?"#".concat(t[0],"\n"):"").concat(Object.values(t[1]).reduce((function(e,t){return"".concat(e).concat(t.amount," ").concat(t.name).concat(t.comment?" # ".concat(t.comment):"","\n")}),""),"\n")}),"")}},V={apiKey:"AIzaSyBcke75SLGGCMiId3EcThDcLnbmnKasWyE",clientId:"213841300532-aqinavnoi53if8cbk6re0aa6gkf965q3.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"profile https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file"},X=function(e){var t,n,a,r,c,i,o,l,u,s,m,d,f;return v.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return r=e.name,c=e.props,i=e.fileContent,o=e.folder,l=new Blob([null!==(t=i)&&void 0!==t?t:""],{type:"text/plain"}),u={name:r,mimeType:"text/plain",appProperties:null!==(n=c)&&void 0!==n?n:{},parents:["appDataFolder"].concat(Object(Q.a)(null!==(a=o)&&void 0!==a?a:[]))},s=gapi.auth.getToken().access_token,(m=new FormData).append("metadata",new Blob([JSON.stringify(u)],{type:"application/json"})),m.append("file",l),p.next=9,v.a.awrap(fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",{method:"POST",headers:new Headers({Authorization:"Bearer "+s}),body:m}));case 9:return d=p.sent,p.next=12,v.a.awrap(d.json());case 12:return f=p.sent,p.abrupt("return",f.id);case 14:case"end":return p.stop()}}))},Y=function(e){var t,n;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,v.a.awrap(gapi.client.drive.files.get({fileId:t,alt:"media"}));case 3:return n=a.sent,a.abrupt("return",n.body);case 5:case"end":return a.stop()}}))},Z=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.id,n.abrupt("return",gapi.client.drive.files.delete({fileId:t}));case 2:case"end":return n.stop()}}))},ee=function(e,t){var n,a,r;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=t.name,a=t.fileContent,r=Object(J.a)(t,["name","fileContent"]),c.t0=e,c.t1=h.a,c.t2=n,c.next=6,v.a.awrap(X({name:"".concat(n,".txt"),props:Object(h.a)({name:n},r),fileContent:a}));case 6:c.t3=c.sent,c.t4=$.serialize(a,i.Sideboard,i.Maybeboard),c.t5={type:"CreateDeck",name:c.t2,link:c.t3,cards:c.t4,isDirty:!1},c.t6=r,c.t7=(0,c.t1)(c.t5,c.t6),(0,c.t0)(c.t7);case 12:case"end":return c.stop()}}))},te={initClient:function(e){gapi.load("client:auth2",(function(){gapi.client.init(V).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(e),e(gapi.auth2.getAuthInstance().isSignedIn.get())}),console.error)}))},getProfile:function(){return gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile()},signIn:function(){return gapi.auth2.getAuthInstance().signIn()},signOut:function(){return gapi.auth2.getAuthInstance().signOut()},prepareAppData:function(){return function(e){var t,n,a,r,o,l,u,s,m,d,f,p,h,g,b,E,y,O,k;return v.a.async((function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,v.a.awrap(gapi.client.drive.files.list({spaces:"appDataFolder",fields:"nextPageToken, files(id, name, appProperties)"}));case 2:if(u=j.sent,s=null===(t=u.result)||void 0===t?void 0:null===(n=t.files)||void 0===n?void 0:n.find((function(e){var t;return(null===(t=e.appProperties)||void 0===t?void 0:t.name)===c.Collection}))){j.next=9;break}console.info("Creating collection..."),ee(e,{name:c.Collection}),j.next=20;break;case 9:return console.info("Loading collection..."),e({type:"CreateDeck",name:c.Collection,link:s.id}),j.t0=e,j.t1=c.Collection,j.t2=$,j.next=16,v.a.awrap(Y({id:s.id}));case 16:j.t3=j.sent,j.t4=j.t2.serialize.call(j.t2,j.t3),j.t5={type:"UpdateDeck",name:j.t1,cards:j.t4,isDirty:!1},(0,j.t0)(j.t5);case 20:if(m=null===(a=u.result)||void 0===a?void 0:null===(r=a.files)||void 0===r?void 0:r.find((function(e){var t;return(null===(t=e.appProperties)||void 0===t?void 0:t.name)===c.Wishlist}))){j.next=26;break}console.info("Creating wishlist..."),ee(e,{name:c.Wishlist}),j.next=37;break;case 26:return console.info("Loading wishlist..."),e({type:"CreateDeck",name:c.Wishlist,link:m.id}),j.t6=e,j.t7=c.Wishlist,j.t8=$,j.next=33,v.a.awrap(Y({id:m.id}));case 33:j.t9=j.sent,j.t10=j.t8.serialize.call(j.t8,j.t9),j.t11={type:"UpdateDeck",name:j.t7,cards:j.t10,isDirty:!1},(0,j.t6)(j.t11);case 37:d=null===(o=u.result)||void 0===o?void 0:null===(l=o.files)||void 0===l?void 0:l.filter((function(e){var t,n;return(null===(t=e.appProperties)||void 0===t?void 0:t.name)!==c.Collection&&(null===(n=e.appProperties)||void 0===n?void 0:n.name)!==c.Wishlist})),f=0;case 39:if(!(f<d.length)){j.next=58;break}return O=d[f],k=null!==(p=null!==(h=null===(g=O.appProperties)||void 0===g?void 0:g.name)&&void 0!==h?h:null===(b=O.name)||void 0===b?void 0:null===(E=b.match(/(.*?)\.txt/))||void 0===E?void 0:E[0])&&void 0!==p?p:"unnamed",e({type:"CreateDeck",name:k,link:O.id}),j.t12=e,j.t13=k,j.t14=null===(y=O.appProperties)||void 0===y?void 0:y.previewUrl,j.t15=$,j.next=49,v.a.awrap(Y({id:O.id}));case 49:j.t16=j.sent,j.t17=i.Sideboard,j.t18=i.Maybeboard,j.t19=j.t15.serialize.call(j.t15,j.t16,j.t17,j.t18),j.t20={type:"UpdateDeck",name:j.t13,previewUrl:j.t14,cards:j.t19,isDirty:!1},(0,j.t12)(j.t20);case 55:f++,j.next=39;break;case 58:case"end":return j.stop()}}))}},createNewFile:X,updateFile:function(e){var t,n,a,r,c,i,o;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.id,n=e.fileContent,a=new Blob([n],{type:"text/plain"}),r=gapi.auth.getToken().access_token,(c=new FormData).append("file",a),l.next=7,v.a.awrap(fetch("https://www.googleapis.com/upload/drive/v3/files/".concat(t,"?uploadType=media&fields=id"),{method:"PATCH",headers:new Headers({Authorization:"Bearer "+r}),body:c}));case 7:return i=l.sent,l.next=10,v.a.awrap(i.json());case 10:return o=l.sent,l.abrupt("return",o.id);case 12:case"end":return l.stop()}}))},deleteFile:Z,createNewDeck:ee,deleteDeck:function(e,t){var n,a;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.name,a=t.id,r.next=3,v.a.awrap(Z({id:a}));case 3:e({type:"DeleteDeck",name:n});case 4:case"end":return r.stop()}}))},getFileContents:Y},ne=n(57),ae=n.n(ne),re=function(){var e=ae.a.create({baseURL:"https://api.scryfall.com",responseType:"json",headers:{"Content-Type":"application/json"}});return{endpoint:e,Symbology:{All:function(){return e.get("/symbology").then((function(e){return e.data.data}))},ParseMana:function(t){return e.get("/symbology/parse-mana",{params:{cost:t}}).then((function(e){return e.data}))}},Cards:{Autocomplete:function(t){return e.get("/cards/autocomplete",{params:{q:t,include_extras:!0}}).then((function(e){return e.data.data}))},Named:function(t){return e.get("/cards/named",{params:{fuzzy:t}}).then((function(e){return e.data}))}},Sets:{All:function(){return e.get("/sets").then((function(e){return e.data.data}))}}}}(),ce=Object(h.a)({},re,{getImage:function(e,t){var n,a,r;switch(e.layout){case"transform":case"double_faced_token":r=e.card_faces[0].image_uris;break;default:r=e.image_uris}return null!==(n=null===(a=r)||void 0===a?void 0:a[t])&&void 0!==n?n:null},getPlaceholder:function(e){return"https://via.placeholder.com/146x204?text=".concat(e.replace(/\s/,"+"))}}),ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=m.a.useRef();m.a.useEffect((function(){a.current=t}),[t]),m.a.useEffect((function(){if(n&&n.addEventListener){var t=function(e){return a.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])},oe=n(346),le=n(234),ue=n(352),se=n(353),me=n(235),de=n(84),fe=n.n(de),pe=n(86),he=n.n(pe),ge=n(165),ve=n(16),be=Object(ge.a)({palette:{type:"dark",primary:{main:ve.a.deepOrange[700]},secondary:{main:ve.a.blueGrey[500]}}},{constants:{drawerWidth:"260px",drawerWidthClosed:"72px",appletHeight:"280px"}}),Ee=(p.a,p.b),ye=p.c;function Oe(){var e=Object(E.a)(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return Oe=function(){return e},e}var ke=ye(oe.a)(Oe()),je=function(e){var t=e.open,n=m.a.useContext(R),a=Object(b.a)(n,2),r=a[0],i=a[1],o=function(e){return function(){i({type:"SelectDeck",name:e})}},l=function(e,n,a){var c,i,l,u;return m.a.createElement(C.a,{key:e.name,title:t?"":(r.decks[e.name].isDirty?"*":"")+(null!==(c=n)&&void 0!==c?c:e.name),placement:"right"},m.a.createElement(le.a,{button:!0,onClick:o(e.name)},m.a.createElement(ue.a,null,m.a.createElement(se.a,{invisible:!r.decks[e.name].isDirty,color:"primary",overlap:"circle",badgeContent:" ",anchorOrigin:{vertical:"bottom",horizontal:"right"}},m.a.createElement(x.a,{alt:null!==(i=n)&&void 0!==i?i:e.name,src:e.previewUrl},null!==(l=a)&&void 0!==l?l:m.a.createElement(fe.a,null)))),m.a.createElement(ke,{primary:null!==(u=n)&&void 0!==u?u:e.name})))};return m.a.createElement(m.a.Fragment,null,m.a.createElement(me.a,null,l(r.decks[c.Collection],"Collection"),l(r.decks[c.Wishlist],"Wishlist",m.a.createElement(he.a,null))),m.a.createElement(S.a,null),m.a.createElement(me.a,null,Object.values(r.decks).filter((function(e){return e.name!==c.Collection&&e.name!==c.Wishlist})).map((function(e){return l(e)}))))},we=n(378),Ce=n(360),xe=n(358),Se=n(361),De=n(244),Ne=n(362),We=n(363),Ie=n(364),Ae=n(365),ze=n(366),Te=n(384),Pe=n(359),Ue=function(e){var t=e.label,n=e.onNameSelect,a=m.a.useState(""),r=Object(b.a)(a,2),c=r[0],i=r[1],o=m.a.useState(!1),l=Object(b.a)(o,2),u=l[0],s=l[1],d=m.a.useState([]),f=Object(b.a)(d,2),p=f[0],g=f[1],v=m.a.useState(!1),E=Object(b.a)(v,2),y=E[0],O=E[1],k=m.a.useState(void 0),j=Object(b.a)(k,2),w=j[0],C=j[1],x=function(e){i(e),g([]),n&&n(e)};return m.a.useEffect((function(){u||g([])}),[u]),m.a.createElement(Te.a,{style:{width:300},open:u,value:c,onOpen:function(){return s(!0)},onClose:function(){return s(!1)},onChange:function(e,t){return x(t)},onInputChange:function(e,t,n){return function(e,t){c!==e&&"reset"!==t&&(i(e),clearTimeout(w),C(setTimeout((function(){e.length<2||(O(!0),ce.Cards.Autocomplete(e).then((function(t){g(t),O(!1),1===t.length&&t[0].toLowerCase().includes(e.toLowerCase())&&(i(t[0]),x(t[0]),s(!1))})))}),500)))}(t,n)},options:p,loading:y,renderInput:function(e){return m.a.createElement(xe.a,Object.assign({},e,{label:t,fullWidth:!0,variant:"outlined",InputProps:Object(h.a)({},e.InputProps,{endAdornment:m.a.createElement(m.a.Fragment,null,y?m.a.createElement(Pe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})},Le=n(94);function Me(){var e=Object(E.a)([""]);return Me=function(){return e},e}function _e(){var e=Object(E.a)(["\n    align-self: flex-end;\n"]);return _e=function(){return e},e}function Be(){var e=Object(E.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n    min-height: ",";\n    padding: ","px;\n"]);return Be=function(){return e},e}function Ge(){var e=Object(E.a)(["\n    flex: 1 1 auto;\n"]);return Ge=function(){return e},e}var Fe=ye.div(Ge()),Re=ye(Le.a)(Be(),(function(e){return e.theme.constants.appletHeight}),(function(e){return e.theme.spacing(2)})),Ke=ye.div(_e()),He=ye(w.a).attrs((function(e){return{component:"h2",variant:"h6",color:"primary",gutterBottom:!0}}))(Me());function Je(){var e=Object(E.a)(["\n    display: flex;\n    margin-top: ","px;\n    align-items: center;\n\n    & .MuiAutocomplete-root {\n        flex-grow: 1;\n        margin-right: ","px;\n    }\n"]);return Je=function(){return e},e}var Qe=ye.div(Je(),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)})),qe=function(){var e=m.a.useContext(R),t=Object(b.a)(e,2),n=t[0],a=t[1],r=m.a.useState(""),c=Object(b.a)(r,2),i=c[0],o=c[1],l=m.a.useState(""),u=Object(b.a)(l,2),s=u[0],d=u[1],f=m.a.useState(!1),p=Object(b.a)(f,2),h=p[0],g=p[1],v=m.a.useState(null),E=Object(b.a)(v,2),y=E[0],O=E[1],k=m.a.useState(""),j=Object(b.a)(k,2),w=j[0],C=j[1],S=function(){return g(!1)},D=function(){g(!1),te.createNewDeck(a,{name:s,fileContent:i,previewUrl:w}),o(""),N(""),C("")},N=function(e){d(e),""!==e?n.decks[e]?O("Deck with this name already exists"):O(null):O("Deck name can't be empty")};return m.a.useEffect((function(){return N("")}),[]),m.a.createElement(Ce.a,{item:!0,xs:12,sm:6,md:4},m.a.createElement(Re,null,m.a.createElement(He,null,"Add deck"),m.a.createElement(Fe,null,m.a.createElement(xe.a,{label:"Deck name",variant:"outlined",error:!!y,helperText:y,value:s,onChange:function(e){return N(e.target.value)},fullWidth:!0}),m.a.createElement(Qe,null,m.a.createElement(Ue,{label:"Preview card",onNameSelect:function(e){e?ce.Cards.Named(e).then((function(e){var t;C(null!==(t=ce.getImage(e,"art_crop"))&&void 0!==t?t:"")})):C("")}}),m.a.createElement(x.a,{alt:"Preview icon",src:w},m.a.createElement(fe.a,null)))),m.a.createElement(Ke,null,m.a.createElement(Se.a,{size:"small"},m.a.createElement(De.a,{disabled:!!y,onClick:function(){return g(!0)}},"Import"),m.a.createElement(De.a,{disabled:!!y,color:"primary",onClick:D},"Create empty"))),m.a.createElement(Ne.a,{open:h,onClose:S,"aria-labelledby":"import-deck-dialog",fullWidth:!0,maxWidth:"md"},m.a.createElement(We.a,{id:"import-deck-dialog"},"Import"),m.a.createElement(Ie.a,null,m.a.createElement(Ae.a,null,"Paste exported deck below."),m.a.createElement(xe.a,{autoFocus:!0,fullWidth:!0,label:"Import",multiline:!0,rows:"15",variant:"outlined",value:i,onChange:function(e){return o(e.target.value)}})),m.a.createElement(ze.a,null,m.a.createElement(De.a,{onClick:S,color:"primary"},"Cancel"),m.a.createElement(De.a,{onClick:D,color:"primary"},"Import")))))},$e=n(153),Ve=n.n($e),Xe=n(90),Ye=n.n(Xe),Ze=n(154),et=n.n(Ze),tt=n(155),nt=n.n(tt),at=n(142),rt=n.n(at),ct=n(103),it=n(143),ot=n.n(it),lt=n(386),ut=n(144);var st=function(e,t){if(!e)throw new ut.AssertionError({message:t})},mt=function(e){var t,n,a=e.card,r=e.deckName,o=e.sectionName,l=m.a.useContext(R),u=Object(b.a)(l,2),s=u[0],d=u[1],f=null!==(t=null!==(n=r)&&void 0!==n?n:s.selectedDeck)&&void 0!==t?t:null,p=function(){return void 0!==s.decks[c.Wishlist].cards[i.Default][a.name]},g=(f?Object.keys(s.decks[f].cards):[]).filter((function(e){return e!==o}));return{updateCardQuantity:function(e){var t;st(!Object(M.isNullOrUndefined)(r),"DeckName should not be empty if the preview actions are Deck"),d({type:"UpdateDeckCard",deckName:r,sectionName:null!==(t=o)&&void 0!==t?t:i.Default,card:Object(h.a)({},a,{amount:e})})},openScryfallPage:function(){return a.scryfall_uri&&window.open(a.scryfall_uri,"_blank")},isOnWishlist:p,toggleWishlist:function(){return p()?d({type:"UpdateDeckCard",deckName:c.Wishlist,sectionName:i.Default,card:Object(h.a)({},a,{amount:0})}):d({type:"UpdateDeckCard",deckName:c.Wishlist,sectionName:i.Default,card:Object(h.a)({},a,{amount:1})})},wishlistTooltip:function(){return p()?"Remove from wishlist":"Add to wishlist"},removeCard:function(){var e;st(!Object(M.isNullOrUndefined)(r),"DeckName should not be empty if the preview actions are Deck"),d({type:"UpdateDeckCard",deckName:r,sectionName:null!==(e=o)&&void 0!==e?e:i.Default,card:Object(h.a)({},a,{amount:0})})},sections:g,changeSection:function(e){var t;st(!Object(M.isNullOrUndefined)(r),"DeckName should not be empty if the preview actions are Deck"),d({type:"UpdateDeckCard",deckName:r,sectionName:null!==(t=o)&&void 0!==t?t:i.Default,card:Object(h.a)({},a,{amount:0})}),d({type:"UpdateDeckCard",deckName:r,sectionName:e,card:Object(h.a)({},a,{amount:a.amount})})},addToDeck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Default;st(!Object(M.isNullOrUndefined)(f),"TargetDeck should not be empty if the preview actions are SearchDeck"),d({type:"UpdateDeckCard",deckName:f,sectionName:e,card:Object(h.a)({},a,{amount:1})})}}};function dt(){var e=Object(E.a)(["\n            width: ","px;\n            height: ","px;\n            font-size: 0.875rem;\n        "]);return dt=function(){return e},e}function ft(){var e=Object(E.a)(["\n    cursor: pointer;\n    color: ",";\n\n    ",'\n\n    &:hover:before {\n        content: "','";\n    }\n']);return ft=function(){return e},e}var pt=ye(x.a).attrs((function(e){return{className:"chip"===e.size?e.className+" MuiChip-avatar MuiChip-avatarSmall":e.className}}))(ft(),(function(e){return e.theme.palette.text.primary}),(function(e){return"inline"===e.size&&Ee(dt(),e.theme.spacing(3),e.theme.spacing(3))}),(function(e){return e.action})),ht=function(e){var t=e.val,n=e.onChange,a=e.size,r=m.a.useContext(R)[0];return m.a.createElement(pt,{title:"",onClick:function(e){e.stopPropagation(),n(t+(r.modifierKeys.shift?1:-1))},action:r.modifierKeys.shift?"+":"-",size:a},t)};function gt(){var e=Object(E.a)(["\n    display: inline-block;\n    height: 16px;\n    width: 16px;\n    margin: 1px 1px -2px 1px;\n"]);return gt=function(){return e},e}var vt=ye.svg(gt()),bt=function(e){var t=e.symbol,n=m.a.useContext(R),a=Object(b.a)(n,1)[0],r=m.a.useState(),c=Object(b.a)(r,2),i=c[0],o=c[1];return m.a.useEffect((function(){var e;o(null!==(e=a.symbolList[t])&&void 0!==e?e:Object.values(a.symbolList).find((function(e){return e.loose_variant===t})))}),[t,a.symbolList]),i?m.a.createElement(vt,{dangerouslySetInnerHTML:{__html:i.svg}}):m.a.createElement(m.a.Fragment,null,t)},Et=function(e){var t=e.text,n=Object(J.a)(e,["text"]),a=m.a.useState([]),r=Object(b.a)(a,2),c=r[0],i=r[1];return m.a.useEffect((function(){var e;i((null!==(e=t.match(/({.*?})|([^{]+)/g))&&void 0!==e?e:[]).map((function(e,t){return"{"===e[0]?m.a.createElement(bt,{key:t,symbol:e}):m.a.createElement("span",{key:t},e)})))}),[t]),m.a.createElement(w.a,n,c)};function yt(){var e=Object(E.a)(["\n    width: 100%;\n\n    & .MuiChip-label {\n        flex: 1 1 auto;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n\n    & .MuiChip-deleteIcon {\n        width: unset;\n        height: unset;\n        flex-shrink: 0;\n        margin-left: ","px;\n        margin-top: 1px;\n    }\n"]);return yt=function(){return e},e}var Ot=ye(lt.a)(yt(),(function(e){return e.theme.spacing(1)})),kt=function(e){var t,n=mt(e),a=n.updateCardQuantity,r=n.openScryfallPage,c=e.card;return m.a.createElement(Ot,{size:"small",variant:"outlined",label:c.name,deleteIcon:m.a.createElement(Et,{text:null!==(t=c.mana_cost)&&void 0!==t?t:"",noWrap:!0}),avatar:m.a.createElement(ht,{size:"chip",val:c.amount,onChange:a}),onDelete:r,onClick:r,title:"Open on scryfall"})};function jt(){var e=Object(E.a)(["\n    text-indent: ","px;\n"]);return jt=function(){return e},e}var wt=ye(w.a)(jt(),(function(e){return e.theme.spacing(1)})),Ct=function(e){var t=e.cards,n=(e.sortBy,e.sortOrder,e.showGroups,Object(J.a)(e,["cards","sortBy","sortOrder","showGroups"]));return m.a.createElement(Ce.a,{container:!0,direction:"column"},t.length>=1?t.map((function(e){return m.a.createElement(Ce.a,{item:!0,key:e.name,xs:!0,zeroMinWidth:!0},m.a.createElement(kt,Object.assign({card:e},n)))})):m.a.createElement(Ce.a,{item:!0,xs:12},m.a.createElement(wt,{color:"textSecondary",variant:"subtitle2"},"Empty")))},xt=n(369),St=n(145),Dt=n.n(St);function Nt(){var e=Object(E.a)(["\n                background-color: ",";\n            "]);return Nt=function(){return e},e}function Wt(){var e=Object(E.a)(["\n            background-color: ",";\n        "]);return Wt=function(){return e},e}function It(){var e=Object(E.a)(["\n    ",";\n    &:hover {\n        ",";\n    }\n"]);return It=function(){return e},e}var At=ye(O.a)(It(),(function(e){return e.background&&Ee(Wt(),e.theme.palette[e.background].main)}),(function(e){return e.background&&Ee(Nt(),e.theme.palette[e.background].dark)})),zt=function(e){var t=e.onClick,n=e.title,a=e.size,r=e.background,c=e.disabled,i=e.children;return m.a.createElement(C.a,{title:n},m.a.createElement("span",null,m.a.createElement(At,{size:a,background:r,disabled:c,onClick:t,"aria-label":n},i,m.a.createElement(w.a,{variant:"srOnly"},n))))},Tt=n(232),Pt=n(168),Ut=n(367),Lt=n(242),Mt=n(368),_t=function(e){var t=e.actions,n=e.size,a=e.background,r=m.a.useState(!1),c=Object(b.a)(r,2),o=c[0],l=c[1],u=m.a.useRef(null),s=function(e){u.current&&u.current.contains(e.target)||l(!1)};return m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{ref:u},m.a.createElement(zt,{title:"Change section",onClick:function(){return l((function(e){return!e}))},disabled:t.sections.length<=0,background:a,size:n},m.a.createElement(Dt.a,null))),m.a.createElement(Tt.a,{open:o,anchorEl:u.current,role:void 0,transition:!0},(function(e){var n=e.TransitionProps,a=e.placement;return m.a.createElement(Pt.a,Object.assign({},n,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),m.a.createElement(Le.a,{elevation:5},m.a.createElement(Ut.a,{onClickAway:s},m.a.createElement(Lt.a,null,t.sections.map((function(e){return m.a.createElement(Mt.a,{key:e,onClick:function(){return t.changeSection(e)}},e===i.Default?"Default":e)}))))))})))},Bt=function(e){var t=e.actions,n=e.size,a=e.background;return m.a.createElement(zt,{title:"Remove card",onClick:t.removeCard,background:a,size:n},m.a.createElement(Ye.a,null))},Gt=n(146),Ft=n.n(Gt),Rt=function(e){var t=e.actions,n=e.size,a=e.background;return m.a.createElement(zt,{title:t.wishlistTooltip(),onClick:t.toggleWishlist,background:a,size:n},t.isOnWishlist()?m.a.createElement(he.a,null):m.a.createElement(Ft.a,null))};function Kt(){var e=Object(E.a)(["\n    transform: scaleX(",");\n    transition: all 0.2s ease-in-out;\n\n    & > * {\n        margin-right: ","px;\n    }\n"]);return Kt=function(){return e},e}function Ht(){var e=Object(E.a)(["\n    position: absolute;\n    bottom: ","px;\n    right: ","px;\n\n    display: flex;\n    align-items: center;\n\n    opacity: 0;\n    transition: opacity 0.2s ease-in-out;\n\n    ",":hover & {\n        opacity: 1;\n    }\n"]);return Ht=function(){return e},e}function Jt(){var e=Object(E.a)(["\n    position: absolute;\n    top: 25%;\n    left: ","px;\n"]);return Jt=function(){return e},e}function Qt(){var e=Object(E.a)(["\n    border-radius: 4.75% / 3.5%;\n    background-image: repeating-linear-gradient(-55deg, #ddd, #ddd 5px, #ccc 5px, #ccc 10px);\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n"]);return Qt=function(){return e},e}function qt(){var e=Object(E.a)(["\n    padding-bottom: 139.344262295%;\n    width: 100%;\n    height: 0;\n    position: relative;\n"]);return qt=function(){return e},e}var $t=ye.div(qt()),Vt=ye.img(Qt()),Xt=ye.div(Jt(),(function(e){return e.theme.spacing(2)})),Yt=ye.div(Ht(),(function(e){return e.theme.spacing(2)}),(function(e){return e.theme.spacing(2)}),$t),Zt=ye.div(Kt(),(function(e){return e.open?1:0}),(function(e){return e.theme.spacing(1)})),en=function(e){var t,n=mt(e),a=e.card,r=m.a.useState(!1),c=Object(b.a)(r,2),i=c[0],o=c[1];return m.a.createElement($t,null,m.a.createElement(Vt,{src:null!==(t=ce.getImage(a,"normal"))&&void 0!==t?t:"",onClick:n.openScryfallPage,title:"Open on scryfall"}),!Object(M.isNullOrUndefined)(a.amount)&&m.a.createElement(Xt,null,m.a.createElement(ht,{val:a.amount,onChange:n.updateCardQuantity})),m.a.createElement(Yt,null,m.a.createElement(Zt,{open:i},m.a.createElement(Rt,{actions:n,background:"secondary"}),m.a.createElement(_t,{actions:n,background:"secondary"}),m.a.createElement(Bt,{actions:n,background:"secondary"})),m.a.createElement(xt.a,{color:"primary",onClick:function(){return o((function(e){return!e}))}},m.a.createElement(P.a,null))))},tn=function(e){var t=e.cards,n=(e.sortBy,e.sortOrder,e.showGroups,Object(J.a)(e,["cards","sortBy","sortOrder","showGroups"]));return m.a.createElement(Ce.a,{container:!0,spacing:1,alignItems:"center"},t.length>=1?t.map((function(e){return m.a.createElement(Ce.a,{key:e.name,item:!0,xs:6,lg:6,xl:4},m.a.createElement(en,Object.assign({card:e},n)))})):m.a.createElement(Ce.a,{item:!0,xs:12},m.a.createElement(wt,{color:"textSecondary"},"Empty")))},nn=n(373),an=n(371),rn=n(374),cn=n(370),on=n(375),ln=n(372);function un(){var e=Object(E.a)(["\n    width: 25px;\n    height: 20px;\n    fill: url(#rarity-",");\n"]);return un=function(){return e},e}var sn=ye.svg(un(),(function(e){return e.rarity})),mn=function(e){var t=e.set,n=e.rarity,a=m.a.useContext(R),r=Object(b.a)(a,1)[0],c=m.a.useState(),i=Object(b.a)(c,2),o=i[0],l=i[1];return m.a.useEffect((function(){l(r.setList[t])}),[t,r.setList]),o?m.a.createElement(sn,{rarity:n},m.a.createElement("defs",null,m.a.createElement("linearGradient",{id:"rarity-common"},m.a.createElement("stop",{offset:"0%",stopColor:"#000"})),m.a.createElement("linearGradient",{id:"rarity-uncommon",gradientTransform:"rotate(90)"},m.a.createElement("stop",{offset:"0%",stopColor:"#4d565a"}),m.a.createElement("stop",{offset:"50%",stopColor:"#a0c3d3"}),m.a.createElement("stop",{offset:"100%",stopColor:"#4d565a"})),m.a.createElement("linearGradient",{id:"rarity-rare",gradientTransform:"rotate(90)"},m.a.createElement("stop",{offset:"0%",stopColor:"#85723e"}),m.a.createElement("stop",{offset:"50%",stopColor:"#d4b975"}),m.a.createElement("stop",{offset:"100%",stopColor:"#85723e"})),m.a.createElement("linearGradient",{id:"rarity-mythic",gradientTransform:"rotate(90)"},m.a.createElement("stop",{offset:"0%",stopColor:"#b02911"}),m.a.createElement("stop",{offset:"50%",stopColor:"#e87f03"}),m.a.createElement("stop",{offset:"100%",stopColor:"#b02911"}))),m.a.createElement("svg",{dangerouslySetInnerHTML:{__html:o.icon_svg}})):m.a.createElement(m.a.Fragment,null,t)};function dn(){var e=Object(E.a)(["\n    white-space: nowrap;\n    & > *:not(:last-child) {\n        margin-right: ","px;\n    }\n"]);return dn=function(){return e},e}var fn=ye.div(dn(),(function(e){return e.theme.spacing(.5)})),pn=function(e){var t,n=mt(e),a=e.card;return m.a.createElement(cn.a,null,m.a.createElement(bn,{component:"th",scope:"row",align:"center"},Object(M.isNullOrUndefined)(a.amount)?"-":m.a.createElement(ht,{size:"inline",val:a.amount,onChange:n.updateCardQuantity})),m.a.createElement(an.a,null,m.a.createElement(ln.a,{href:"#",onClick:n.openScryfallPage,color:"inherit",title:"Open on scryfall"},a.name)),m.a.createElement(an.a,{align:"center"},m.a.createElement(mn,{set:a.set,rarity:a.rarity})),m.a.createElement(an.a,null,m.a.createElement(Et,{text:null!==(t=a.mana_cost)&&void 0!==t?t:"",noWrap:!0})),m.a.createElement(an.a,null,a.type_line),m.a.createElement(an.a,null,m.a.createElement(fn,null,m.a.createElement(Rt,{actions:n,size:"small"}),m.a.createElement(_t,{actions:n,size:"small"}),m.a.createElement(Bt,{actions:n,size:"small"}))))};function hn(){var e=Object(E.a)(["\n    width: 40px;\n"]);return hn=function(){return e},e}function gn(){var e=Object(E.a)(["\n    & .MuiTableCell-sizeSmall {\n        padding: ",";\n    }\n"]);return gn=function(){return e},e}var vn=ye(nn.a)(gn(),(function(e){return e.theme.spacing(.25,1)})),bn=ye(an.a)(hn()),En=function(e){var t=e.cards,n=(e.sortBy,e.sortOrder,e.showGroups,Object(J.a)(e,["cards","sortBy","sortOrder","showGroups"]));return m.a.createElement(vn,{size:"small","aria-label":"card table"},m.a.createElement(rn.a,null,m.a.createElement(cn.a,null,m.a.createElement(bn,{align:"center"},"#"),m.a.createElement(an.a,null,"Name"),m.a.createElement(an.a,{align:"center"},"Set"),m.a.createElement(an.a,null,"Cost"),m.a.createElement(an.a,null,"Type"),m.a.createElement(an.a,null,"Actions"))),m.a.createElement(on.a,null,t.length>=1?t.map((function(e){return m.a.createElement(pn,Object.assign({key:e.name,card:e},n))})):m.a.createElement(cn.a,null,m.a.createElement(an.a,{colSpan:6},m.a.createElement(wt,{color:"textSecondary"},"Empty")))))},yn=function(e,t,n,a){return a(t[n])<a(e[n])?-1:a(t[n])>a(e[n])?1:0},On=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return"Desc"===e?function(e,a){return yn(e,a,t,n)}:function(e,a){return-yn(e,a,t,n)}},kn=function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))},jn=["common","uncommon","rare","mythic"],wn=function(e,t){switch(e){case"Name":return On(t,"name");case"Cmc":return On(t,"mana_cost");case"Type":return On(t,"type_line");case"Rarity":return On(t,"rarity",(function(e){return jn.indexOf(e)}))}},Cn=function(e){return m.a.createElement(m.a.Fragment,null,e.sectionName!==i.Default&&m.a.createElement(w.a,{variant:"h6"},e.sectionName),function(){var t=Object(h.a)({},ot()(e,"style","cards"),{cards:kn(e.cards,wn(e.sortBy,e.sortOrder))});switch(e.style){case"List":return m.a.createElement(En,t);case"Images":return m.a.createElement(tn,t);case"Compressed":return m.a.createElement(Ct,t)}}())},xn=n(148),Sn=n.n(xn),Dn=n(147),Nn=n.n(Dn),Wn=n(149),In=n.n(Wn);function An(){var e=Object(E.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: ","px;\n\n    & .MuiTypography-root {\n        margin-right: ","px;\n    }\n\n    & .MuiButton-root {\n        padding-left: 0;\n        padding-right: 0;\n    }\n"]);return An=function(){return e},e}var zn=ye.div(An(),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)})),Tn=function(e){var t=e.style,n=e.onToggle;return m.a.createElement(zn,null,m.a.createElement(w.a,{variant:"caption"},"Display:"),m.a.createElement(Se.a,{variant:"outlined",size:"small"},["Standard","List","Images"].map((function(e){return m.a.createElement(De.a,{key:e,onClick:function(){return n(e)},variant:t===e?"contained":void 0},m.a.createElement(C.a,{title:e},function(e){switch(e){case"Standard":return m.a.createElement(Nn.a,null);case"List":return m.a.createElement(Sn.a,null);case"Images":return m.a.createElement(In.a,null)}throw Error("Style ".concat(e," does not have an icon."))}(e)))}))))},Pn=n(150),Un=n.n(Pn);function Ln(){var e=Object(E.a)(["\n    margin-bottom: ","px;\n    margin-left: ","px;\n"]);return Ln=function(){return e},e}var Mn=ye.div(Ln(),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)})),_n=function(e){var t=e.show,n=e.setShow;return m.a.createElement(Mn,null,m.a.createElement(zt,{size:"small",title:t?"Hide groups":"Show groups",onClick:function(){return n(!t)}},m.a.createElement(Un.a,null)))},Bn=n(151),Gn=n.n(Bn);function Fn(){var e=Object(E.a)(["\n    margin-bottom: ","px;\n"]);return Fn=function(){return e},e}var Rn=ye.div(Fn(),(function(e){return e.theme.spacing(1)})),Kn=function(e){var t=e.sortBy,n=e.setSortBy,a=e.sortOrder,r=e.setSortOrder,c=m.a.useState(!1),i=Object(b.a)(c,2),o=i[0],l=i[1],u=m.a.useRef(null),s=function(e){u.current&&u.current.contains(e.target)||l(!1)};return m.a.createElement(Rn,null,m.a.createElement(De.a,{ref:u,size:"small",onClick:function(){return l((function(e){return!e}))},startIcon:m.a.createElement(Gn.a,null)},"Sort by"),m.a.createElement(Tt.a,{open:o,anchorEl:u.current,role:void 0,transition:!0},(function(e){var c=e.TransitionProps,i=e.placement;return m.a.createElement(Pt.a,Object.assign({},c,{style:{transformOrigin:"bottom"===i?"center top":"center bottom"}}),m.a.createElement(Le.a,{elevation:5},m.a.createElement(Ut.a,{onClickAway:s},m.a.createElement(Lt.a,null,[["Name","Asc"],["Name","Desc"],["Cmc","Asc"],["Cmc","Desc"],["Type","Asc"],["Type","Desc"],["Rarity","Asc"],["Rarity","Desc"]].map((function(e){var c=Object(b.a)(e,2),i=c[0],o=c[1];return m.a.createElement(Mt.a,{key:"".concat(i," (").concat(o,")"),selected:i===t&&o===a,onClick:function(e){n(i),r(o)}},"".concat(i," (").concat(o,")"))}))))))})))},Hn=n(74),Jn=n(93),Qn=n(152);function qn(){var e=Object(E.a)(["\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return qn=function(){return e},e}var $n=ye.div(qn()),Vn=function(){return m.a.createElement($n,null,m.a.createElement(Hn.a,{icon:Jn.b}))},Xn=function(){return m.a.createElement($n,null,m.a.createElement(Hn.a,{icon:Jn.c}))},Yn=function(){return m.a.createElement($n,null,m.a.createElement(Hn.a,{icon:Qn.a}))},Zn=function(){return m.a.createElement($n,null,m.a.createElement(Hn.a,{icon:Jn.a}))};function ea(){var e=Object(E.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: ","px;\n\n    & .MuiDialogContentText-root {\n        flex-grow: 1;\n        margin-bottom: 0;\n    }\n"]);return ea=function(){return e},e}function ta(){var e=Object(E.a)(["\n    margin-bottom: ","px;\n"]);return ta=function(){return e},e}var na=ye.div(ta(),(function(e){return e.theme.spacing(2)})),aa=ye(Fe)(ea(),(function(e){return e.theme.spacing(1)})),ra=function(e){var t=e.deckName,n=m.a.useContext(R),a=Object(b.a)(n,2),r=a[0],i=a[1],o=r.decks[t],l=m.a.useState(!0),u=Object(b.a)(l,2),s=u[0],d=u[1],f=m.a.useState(!1),p=Object(b.a)(f,2),g=p[0],v=p[1],E=m.a.useState("List"),y=Object(b.a)(E,2),O=y[0],k=y[1],j=m.a.useState("Cmc"),w=Object(b.a)(j,2),C=w[0],x=w[1],S=m.a.useState("Asc"),D=Object(b.a)(S,2),N=D[0],W=D[1],I=m.a.useState(!1),A=Object(b.a)(I,2),z=A[0],T=A[1];m.a.useEffect((function(){var e,t=Object.values(o.cards).reduce((function(e,t){return[].concat(Object(Q.a)(e),Object(Q.a)(Object.values(t)))}),[]).filter((function(e){return!r.cardList[e.name]}));(e=ct.Cards).collection.apply(e,Object(Q.a)(t.map((function(e){return ct.CardIdentifier.byName(e.name)})))).on("data",(function(e){return i({type:"AddCard",card:e})}))}),[t]);return m.a.createElement(Ce.a,{item:!0,xs:12,md:s?6:4},m.a.createElement(Re,null,m.a.createElement(Ce.a,{container:!0,direction:"row",justify:"space-between"},m.a.createElement(Ce.a,{item:!0},m.a.createElement(He,null,"Deck preview")),m.a.createElement(Ce.a,{item:!0},m.a.createElement(zt,{title:s?"Compress":"Expand",size:"small",onClick:function(){return d((function(e){return!e}))}},s?m.a.createElement(Vn,null):m.a.createElement(Xn,null)),m.a.createElement(zt,{title:"Close preview",size:"small",onClick:function(){return i({type:"SelectDeck",name:null})}},m.a.createElement(Ve.a,null)))),m.a.createElement(Ce.a,{container:!0,justify:"space-between"},m.a.createElement(Kn,{sortBy:C,setSortBy:x,sortOrder:N,setSortOrder:W}),m.a.createElement(_n,{show:z,setShow:T}),m.a.createElement(Fe,null),s&&m.a.createElement(Tn,{style:O,onToggle:k})),m.a.createElement(Fe,null,Object.entries(o.cards).map((function(e){var n=Object(b.a)(e,2),a=n[0],i=n[1];return m.a.createElement(na,{key:a},m.a.createElement(Cn,{cards:Object.values(i).map((function(e){var t;return Object(h.a)({},e,{},null!==(t=r.cardList[e.name])&&void 0!==t?t:{})})),style:s?O:"Compressed",actions:t===c.Wishlist?"SearchWishlist":"Deck",sortBy:C,sortOrder:N,showGroups:z,deckName:t,sectionName:a}))}))),m.a.createElement(Ke,null,m.a.createElement(zt,{title:"Export deck",onClick:function(){return v(!0)}},m.a.createElement(et.a,null)),t!==c.Collection&&t!==c.Wishlist&&m.a.createElement(zt,{title:"Delete deck",onClick:function(){return te.deleteDeck(i,{name:t,id:r.files[t]})}},m.a.createElement(Ye.a,null)),r.decks[o.name].isDirty&&m.a.createElement(zt,{title:"Save changes",onClick:function(){return te.updateFile({id:r.files[t],fileContent:$.deserialize(o.cards)}).then((function(){return i({type:"UpdateDeck",name:t,isDirty:!1})}))},background:"primary"},m.a.createElement(nt.a,null))),m.a.createElement(Ne.a,{open:g,onClose:function(){return v(!1)},"aria-labelledby":"export-deck-dialog",fullWidth:!0,maxWidth:"md"},m.a.createElement(We.a,{id:"import-deck-dialog"},"Export"),m.a.createElement(Ie.a,null,m.a.createElement(aa,null,m.a.createElement(Ae.a,null,"Copy exported text below."),m.a.createElement(zt,{title:"Copy to clipboard",onClick:function(){return rt()($.deserialize(o.cards))}},m.a.createElement(Zn,null))),m.a.createElement(xe.a,{label:"Export",multiline:!0,rows:"15",fullWidth:!0,variant:"outlined",value:$.deserialize(o.cards),InputProps:{readOnly:!0}})))))},ca=n(376),ia=n(377),oa=n(385),la=n(156),ua=n.n(la),sa=n(157),ma=n.n(sa);function da(){var e=Object(E.a)(["\n    display: flex;\n    margin-top: ","px;\n    align-items: center;\n\n    & .MuiAutocomplete-root {\n        flex-grow: 1;\n        margin-right: ","px;\n    }\n"]);return da=function(){return e},e}var fa=ye.div(da(),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)})),pa=function(){var e=m.a.useState(""),t=Object(b.a)(e,2),n=t[0],a=t[1],r=m.a.useState([]),c=Object(b.a)(r,2),i=c[0],o=c[1],l=m.a.useState(!1),u=Object(b.a)(l,2),s=u[0],d=u[1],f=function(){return d(!1)},p=m.a.useState({colors:{r:!1,g:!1,u:!1,b:!1,w:!1},colorExactMatch:!1,cmc:0,cmcType:"="}),g=Object(b.a)(p,2),v=g[0],E=g[1],y=function(e){return function(t){var n=Object(h.a)({},v);n.colors[e]=t.target.checked,E(n)}};return m.a.createElement(Ce.a,{item:!0,xs:12,md:!0},m.a.createElement(Re,null,m.a.createElement(He,null,"Card search"),m.a.createElement(Fe,null,m.a.createElement(fa,null,m.a.createElement(Te.a,{freeSolo:!0,autoHighlight:!0,disableClearable:!0,options:i,inputValue:n,onInputChange:function(e,t){return a(t),void ce.Cards.Autocomplete(n).then((function(e){return o(e)}))},renderInput:function(e){return m.a.createElement(xe.a,Object.assign({},e,{label:"Card name",variant:"outlined",fullWidth:!0}))}}))),m.a.createElement(Ne.a,{open:s,onClose:f,"aria-labelledby":"advanced-card-search-dialog",maxWidth:"md",fullWidth:!0},m.a.createElement(We.a,{id:"advanced-card-search-dialog"},"Advanced card search"),m.a.createElement(Ie.a,null,m.a.createElement(w.a,{variant:"subtitle2"},"Filter by color"),m.a.createElement(ca.a,{row:!0},m.a.createElement(ia.a,{label:m.a.createElement(Et,{text:"{R} Red"}),control:m.a.createElement(oa.a,{checked:v.colors.r,onChange:y("r")})}),m.a.createElement(ia.a,{label:m.a.createElement(Et,{text:"{G} Green"}),control:m.a.createElement(oa.a,{checked:v.colors.g,onChange:y("g")})}),m.a.createElement(ia.a,{label:m.a.createElement(Et,{text:"{U} Blue"}),control:m.a.createElement(oa.a,{checked:v.colors.u,onChange:y("u")})}),m.a.createElement(ia.a,{label:m.a.createElement(Et,{text:"{B} Black"}),control:m.a.createElement(oa.a,{checked:v.colors.b,onChange:y("b")})}),m.a.createElement(ia.a,{label:m.a.createElement(Et,{text:"{W} White"}),control:m.a.createElement(oa.a,{checked:v.colors.w,onChange:y("w")})})),m.a.createElement(ia.a,{label:"Exact color match?",control:m.a.createElement(oa.a,{checked:v.colorExactMatch,onChange:function(e){return E(Object(h.a)({},v,{colorExactMatch:e.target.checked}))}})})),m.a.createElement(ze.a,null,m.a.createElement(De.a,{onClick:function(){return E({colors:{r:!1,g:!1,u:!1,b:!1,w:!1},colorExactMatch:!1,cmc:0,cmcType:"="})},color:"primary"},"Reset"),m.a.createElement(De.a,{onClick:f,color:"primary"},"OK"))),m.a.createElement(Ke,null,m.a.createElement(C.a,{title:"Advanced search filter"},m.a.createElement(De.a,{onClick:function(){return d(!0)}},m.a.createElement(ua.a,null))),m.a.createElement(C.a,{title:"Search for results"},m.a.createElement(De.a,{onClick:function(){alert(JSON.stringify(v))}},m.a.createElement(ma.a,null))))))},ha=function(){return m.a.createElement(Ce.a,{item:!0,xs:12,sm:!0,md:!0},m.a.createElement(Re,null,m.a.createElement(He,null,"User info"),"UserInfo paceholder."))},ga=function(){var e=m.a.useContext(R),t=Object(b.a)(e,1)[0];return m.a.createElement(we.a,{maxWidth:"xl"},m.a.createElement(Ce.a,{container:!0,spacing:3},m.a.createElement(Ce.a,{item:!0,direction:"row",container:!0,spacing:3},m.a.createElement(ha,null),m.a.createElement(qe,null)),m.a.createElement(Ce.a,{item:!0,direction:"row",container:!0,spacing:3},m.a.createElement(pa,null),null!==t.selectedDeck&&m.a.createElement(ra,{deckName:t.selectedDeck}))))},va=function(){return m.a.createElement("div",null,"Not found")},ba=n(158),Ea=n.n(ba),ya=function(e){var t=e.variant,n=e.onClick;return m.a.createElement(De.a,{variant:t,onClick:n,startIcon:m.a.createElement(Yn,null)},m.a.createElement(w.a,{noWrap:!0},"Sign in with Google"))},Oa=function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(Ce.a,{container:!0,justify:"center",alignItems:"center",style:{padding:25}},m.a.createElement("img",{src:Ea.a,alt:"",width:"150px",height:"150px",draggable:!1})),m.a.createElement(Ce.a,{container:!0,justify:"center",alignItems:"center"},m.a.createElement(ya,{variant:"contained",onClick:te.signIn})))};function ka(){var e=Object(E.a)(["\n    margin-right: ","px;\n"]);return ka=function(){return e},e}function ja(){var e=Object(E.a)(["\n    flex-grow: 1;\n    padding: ","px;\n    margin-left: ",";\n    ","\n    ","\n"]);return ja=function(){return e},e}function wa(){var e=Object(E.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    padding: ","px;\n"]);return wa=function(){return e},e}function Ca(){var e=Object(E.a)(["\n    width: ",";\n    flex-shrink: 0;\n    white-space: nowrap;\n    ","\n\n    .MuiDrawer-paper {\n        ","\n    }\n"]);return Ca=function(){return e},e}function xa(){var e=Object(E.a)(["\n    transition: ",";\n    overflow-x: hidden;\n    width: ",";\n"]);return xa=function(){return e},e}function Sa(){var e=Object(E.a)(["\n    width: ",";\n    transition: ",";\n"]);return Sa=function(){return e},e}function Da(){var e=Object(E.a)(["\n            display: none;\n        "]);return Da=function(){return e},e}function Na(){var e=Object(E.a)(["\n    margin-right: 36px;\n    ","\n"]);return Na=function(){return e},e}function Wa(){var e=Object(E.a)(["\n    z-index: ",";\n    ","\n    ","\n"]);return Wa=function(){return e},e}function Ia(){var e=Object(E.a)(["\n    transition: ",";\n"]);return Ia=function(){return e},e}function Aa(){var e=Object(E.a)(["\n    margin-left: ",";\n    width: calc(100% - ",");\n    transition: ",";\n"]);return Aa=function(){return e},e}var za=Ee(Aa(),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.theme.transitions.create(["width","margin"],{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.enteringScreen})})),Ta=Ee(Ia(),(function(e){return e.theme.transitions.create(["width","margin"],{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.leavingScreen})})),Pa=ye(y.a)(Wa(),(function(e){return e.theme.zIndex.drawer+1}),Ta,(function(e){return e.open&&za})),Ua=ye(O.a)(Na(),(function(e){return e.open&&Ee(Da())})),La=Ee(Sa(),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.theme.transitions.create("width",{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.enteringScreen})})),Ma=Ee(xa(),(function(e){return e.theme.transitions.create("width",{easing:e.theme.transitions.easing.sharp,duration:e.theme.transitions.duration.leavingScreen})}),(function(e){return e.theme.constants.drawerWidthClosed})),_a=ye(k.a).attrs((function(){return{variant:"permanent"}}))(Ca(),(function(e){return e.theme.constants.drawerWidth}),(function(e){return e.open?La:Ma}),(function(e){return e.open?La:Ma})),Ba=ye(j.a)(wa(),(function(e){return e.theme.spacing(0,1)})),Ga=ye.div(ja(),(function(e){return e.theme.spacing(3)}),(function(e){return e.theme.constants.drawerWidthClosed}),Ta,(function(e){return e.open&&za})),Fa=ye.div(ka(),(function(e){return e.theme.spacing(1)})),Ra=function(){var e=m.a.useReducer(H,F),t=Object(b.a)(e,2),n=t[0],a=t[1],r=m.a.useState(),c=Object(b.a)(r,2),i=c[0],o=c[1],l=m.a.useState(!1),u=Object(b.a)(l,2),s=u[0],d=u[1],f=m.a.useState(!1),p=Object(b.a)(f,2),g=p[0],E=p[1];return ie("keydown",(function(e){"Shift"!==e.key||n.modifierKeys.shift||a({type:"SetModifierKey",key:"shift",value:!0})})),ie("keyup",(function(e){"Shift"===e.key&&n.modifierKeys.shift&&a({type:"SetModifierKey",key:"shift",value:!1})})),m.a.useEffect((function(){te.initClient((function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(d(e),e){t.next=3;break}return t.abrupt("return");case 3:o(te.getProfile()),te.prepareAppData()(a);case 5:case"end":return t.stop()}}))})),ce.Symbology.All().then((function(e){var t=ae.a.create({baseURL:"",responseType:"text",headers:{"Content-Type":"image/svg+xml"}});return Promise.all(e.map((function(e){return t.get(e.svg_uri,{data:e})})))})).then((function(e){a({type:"AddSymbols",symbols:e.map((function(e){return Object(h.a)({},JSON.parse(e.config.data),{svg:e.data})}))})})).then(ce.Sets.All).then((function(e){var t=ae.a.create({baseURL:"",responseType:"text",headers:{"Content-Type":"image/svg+xml"}});return Promise.all(e.map((function(e){return t.get(e.icon_svg_uri,{data:e})})))})).then((function(e){a({type:"AddSets",sets:e.map((function(e){return Object(h.a)({},JSON.parse(e.config.data),{icon_svg:e.data})}))})}))}),[]),m.a.createElement(R.Provider,{value:[n,a]},m.a.createElement(Pa,{position:"sticky",open:g},m.a.createElement(j.a,null,m.a.createElement(Ua,{color:"inherit","aria-label":"open drawer",onClick:function(){return E(!0)},edge:"start",open:g},m.a.createElement(P.a,null)),m.a.createElement(w.a,{variant:"h6"},"MTGCollection"),m.a.createElement(Fe,null),s?m.a.createElement(m.a.Fragment,null,!Object(M.isNullOrUndefined)(i)&&m.a.createElement(Fa,null,m.a.createElement(C.a,{title:"Signed in as ".concat(i.getGivenName()," (").concat(i.getEmail(),")")},m.a.createElement(x.a,{alt:i.getGivenName(),src:i.getImageUrl()}))),m.a.createElement(zt,{title:"SignOut",onClick:function(){te.signOut(),o(void 0)}},m.a.createElement(z.a,null))):m.a.createElement(ya,{onClick:te.signIn}))),m.a.createElement(_a,{open:g},m.a.createElement(Ba,null,m.a.createElement(O.a,{onClick:function(){return E(!1)}},"rtl"===be.direction?m.a.createElement(I.a,null):m.a.createElement(N.a,null))),m.a.createElement(S.a,null),m.a.createElement(je,{open:g})),m.a.createElement(Ga,{open:g},m.a.createElement(U.a,{basename:"/MTGCollection"},m.a.createElement(L.a,{to:s?"/":"/signin/"}),m.a.createElement(L.d,null,m.a.createElement(L.b,{exact:!0,path:"/",component:ga}),m.a.createElement(L.b,{exact:!0,path:"/signin/",component:Oa}),m.a.createElement(L.b,{component:va})))))},Ka=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ha(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}f.a.render(m.a.createElement(l.b,{injectFirst:!0},m.a.createElement(p.a,{theme:be},m.a.createElement(u.a,{theme:be},m.a.createElement(o.a,null),m.a.createElement(Ra,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/MTGCollection",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/MTGCollection","/service-worker.js");Ka?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ha(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ha(t,e)}))}}()}},[[190,1,2]]]);
//# sourceMappingURL=main.4146d0b8.chunk.js.map