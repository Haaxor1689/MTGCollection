{"version":3,"sources":["Assets/logo.png","State/index.ts","State/Reducers.ts","Utility/CollectionParser.ts","Utility/GoogleApi.ts","Utility/Scry/index.ts","Utility/useEventListener.ts","Components/Styled/Theme.ts","Components/DrawerDeckList.tsx","Components/Styled/Grid.tsx","Components/Applets/AddDeck.tsx","Utility/Assert.ts","Utility/useCardAction.ts","Components/Styled/IncrementNumber.tsx","Components/Styled/SymbolIcon.tsx","Components/Styled/SymbolTypography.tsx","Components/Previews/CompressedCard.tsx","Components/Styled/IndentedTypography.tsx","Components/Previews/CompressedCollection.tsx","Components/Styled/TooltipButton.tsx","Components/Previews/ActionButtons/ChangeSectionButton.tsx","Components/Previews/ActionButtons/DeleteButton.tsx","Components/Previews/ActionButtons/WishlistButton.tsx","Components/Previews/ImagesCard.tsx","Components/Previews/ImagesCollection.tsx","Components/Styled/SetIcon.tsx","Components/Previews/ListCard.tsx","Components/Previews/ListCollection.tsx","Components/Previews/CollectionPreview.tsx","Components/Previews/Common/PreviewStyleToggle.tsx","Components/Previews/Common/ShowGroupsToggle.tsx","Components/Previews/Common/SortToggle.tsx","Components/Styled/Icons.tsx","Components/Applets/DeckPreview.tsx","Components/Applets/CardSearch.tsx","Components/Applets/UserInfo.tsx","Components/Home.tsx","Components/NotFound.tsx","Components/SignInButton.tsx","Components/SignIn.tsx","Components/App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","DeckName","SectionName","reducers","EmptyCards","sections","reduce","obj","s","Default","initialState","files","Collection","Wishlist","decks","name","cards","cardList","symbolList","setList","selectedDeck","modifierKeys","shift","State","React","createContext","undefined","reducer","state","action","type","link","omit","card","symbols","symbol","sets","code","isDirty","amount","deckName","sectionName","key","value","temp","i","CollectionParser","serialize","collection","split","map","section","index","lines","line","match","filter","isNull","parseInt","comment","prev","val","p","v","deserialize","deck","Object","entries","str","values","GoogleApiInit","apiKey","process","clientId","discoveryDocs","scope","createNewFile","a","async","props","fileContent","folder","file","Blob","metadata","mimeType","appProperties","parents","accessToken","gapi","auth","getToken","access_token","form","FormData","append","JSON","stringify","fetch","method","headers","Headers","Authorization","body","res","json","id","getFileContents","client","drive","get","fileId","alt","deleteFile","delete","createNewDeck","dispatch","restProps","Sideboard","Maybeboard","GoogleApi","initClient","onUpdateStatus","load","init","then","auth2","getAuthInstance","isSignedIn","listen","console","error","getProfile","currentUser","getBasicProfile","signIn","signOut","prepareAppData","list","spaces","fields","response","collectionFile","result","find","f","info","wishlistFile","otherFiles","length","previewUrl","updateFile","deleteDeck","Api","endpoint","Axios","create","baseURL","responseType","Symbology","All","r","data","ParseMana","cost","params","Cards","Autocomplete","q","include_extras","Named","fuzzy","Sets","Scry","getImage","images","layout","card_faces","image_uris","getPlaceholder","cardName","replace","useEventListener","eventName","handler","element","window","savedHandler","useRef","useEffect","current","addEventListener","eventListener","event","removeEventListener","MainTheme","createMuiTheme","palette","primary","main","colors","deepOrange","secondary","blueGrey","constants","drawerWidth","drawerWidthClosed","appletHeight","css","ThemeProv","styledCss","styled","baseStyled","StyledItemText","ListItemText","DrawerDeckList","open","useContext","selectDeck","renderItem","icon","Tooltip","title","placement","ListItem","button","onClick","ListItemAvatar","Badge","invisible","color","overlap","badgeContent","anchorOrigin","vertical","horizontal","Avatar","src","List","Divider","FlexCol","div","AppletPaper","Paper","theme","spacing","AppletActions","Title","Typography","attrs","component","variant","gutterBottom","PreviewRow","AddDeck","useState","importText","setImportText","setDeckName","setOpen","invalidName","setInvalidName","previewCard","setPreviewCard","previewAutocomplete","setPreviewAutocomplete","setPreviewUrl","handleClose","handleImport","validateName","Grid","item","xs","sm","md","TextField","label","helperText","onChange","e","target","fullWidth","autoHighlight","disableClearable","options","inputValue","onInputChange","names","onBlur","catch","reason","renderInput","ButtonGroup","size","Button","disabled","Dialog","onClose","aria-labelledby","maxWidth","DialogTitle","DialogContent","DialogContentText","autoFocus","multiline","rows","DialogActions","assert","condition","message","AssertionError","useCardActions","targetDeck","isOnWishlist","keys","updateCardQuantity","isNullOrUndefined","openScryfallPage","scryfall_uri","toggleWishlist","wishlistTooltip","removeCard","changeSection","newSection","addToDeck","StyledAvatar","className","text","IncrementNumber","stopPropagation","Symbol","svg","SymbolIcon","symbolObj","setSymbolObj","loose_variant","dangerouslySetInnerHTML","__html","SymbolTypography","typographyProps","parsed","setParsed","m","CustomChip","Chip","CompressedCard","deleteIcon","mana_cost","noWrap","avatar","onDelete","IndentedTypography","CompressedCollecion","sortBy","sortOrder","showGroups","container","direction","c","zeroMinWidth","StyledIconButton","IconButton","background","dark","TooltipButton","children","aria-label","ChangeSectionButton","actions","anchorRef","contains","ref","prevOpen","Popper","anchorEl","role","transition","TransitionProps","Grow","style","transformOrigin","elevation","ClickAwayListener","onClickAway","MenuList","MenuItem","DeleteButton","WishlistButton","Body","Image","img","IncrementActions","BottomActions","ActionsMenu","ImagesCard","actionsOpen","setActionsOpen","Fab","ImagesCollecion","alignItems","lg","xl","Set","rarity","SetIcon","set","setObj","setSetObj","offset","stopColor","gradientTransform","icon_svg","Actions","ListCard","TableRow","NumberCell","align","TableCell","Link","href","type_line","CustomPaddingTable","Table","ListCollecion","TableHead","TableBody","colSpan","desc","b","orderBy","func","getSorting","order","StableSort","array","cmp","stabilizedThis","el","sort","rarityOrder","GetSortFunction","indexOf","CollectionPreview","passedProps","renderCollection","PreviewStyleToggle","onToggle","Error","IconForStyle","ShowGroupsToggle","show","setShow","SortToggle","setSortBy","setSortOrder","startIcon","by","selected","IconWrap","CompressIcon","faCompressAlt","ExpandIcon","faExpandAlt","GoogleIcon","faGoogle","ClipboardIcon","faClipboard","SectionRow","ExportRow","DeckPreview","expanded","setExpanded","exportOpened","setExportOpened","setStyle","setShowGroups","missingCards","byName","on","justify","copy","InputProps","readOnly","CardSearch","setCardName","autoompleteOptions","setAutocompleteOptions","dialogOpen","setDialogOpen","closeDialog","g","u","w","colorExactMatch","cmc","cmcType","setFilter","handleColors","newFilter","checked","freeSolo","FormGroup","row","FormControlLabel","control","Checkbox","alert","UserInfo","Home","Container","NotFound","SignInButton","SignIn","padding","Logo","width","height","draggable","bodyOpen","transitions","easing","sharp","duration","enteringScreen","bodyClose","leavingScreen","CustomAppBar","AppBar","zIndex","drawer","MenuButton","drawerOpen","drawerClose","CustomDrawer","Drawer","DrawerToolbar","Toolbar","MainContent","ProfileAvatar","App","useReducer","profile","setProfile","setIsSignedIn","Promise","all","svg_uri","responses","parse","config","icon_svg_uri","Provider","position","edge","toString","getGivenName","getEmail","getImageUrl","basename","to","exact","path","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","ReactDOM","render","StylesProvider","injectFirst","CssBaseline","document","getElementById","URL","origin","contentType","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.8731e218.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.81aa9e7e.png\";","import React from \"react\";\nimport Scry from \"scryfall-sdk\";\nimport DeepReadonly from \"../Utility/DeepReadonly\";\nimport { ScryCardSymbol, ScrySet } from \"../Utility/Scry/Types\";\nimport { Action } from \"./Actions\";\n\nexport enum DeckName {\n    Collection = \"_collection\",\n    Wishlist = \"_wishlist\",\n}\n\nexport enum SectionName {\n    Default = \"_default\",\n    Sideboard = \"Sideboard\",\n    Maybeboard = \"Maybeboard\",\n}\n\nexport const EmptyCards = (...sections: string[]): DeckCards => sections.reduce((obj, s) => ({ ...obj, [s]: {} }), { [SectionName.Default]: {} });\n\nexport type DeckCardList = DeepReadonly<{\n    [cardName: string]: DeckCard;\n}>;\n\nexport type DeckCards = DeepReadonly<{\n    [SectionName.Default]: DeckCardList;\n    [section: string]: DeckCardList;\n}>;\n\nexport type DeckCard = DeepReadonly<{\n    amount: number;\n    name: string;\n    comment?: string;\n}>;\n\nexport type DeckProps = Omit<Deck, \"cards\">;\n\nexport type Deck = DeepReadonly<{\n    name: string;\n    previewUrl?: string;\n    cards: DeckCards;\n    isDirty?: boolean;\n}>;\n\nexport type FileIds = DeepReadonly<{\n    [DeckName.Collection]: string;\n    [DeckName.Wishlist]: string;\n    [deckName: string]: string;\n}>;\n\nexport type Decks = DeepReadonly<{\n    [DeckName.Collection]: Deck;\n    [DeckName.Wishlist]: Deck;\n    [deckName: string]: Deck;\n}>;\n\nexport type CardList = DeepReadonly<{\n    [cardName: string]: Scry.Card;\n}>;\n\nexport type SymbolList = DeepReadonly<{\n    [symbol: string]: ScryCardSymbol;\n}>;\n\nexport type SetList = DeepReadonly<{\n    [setName: string]: ScrySet;\n}>;\n\nexport type ModifierKeys = DeepReadonly<{\n    shift: boolean;\n}>\n\nexport type AppState = DeepReadonly<{\n    files: FileIds;\n    decks: Decks;\n    cardList: CardList;\n    symbolList: SymbolList;\n    setList: SetList;\n    selectedDeck: string | null;\n    modifierKeys: ModifierKeys;\n}>;\n\nexport const initialState: AppState = {\n    files: {\n        [DeckName.Collection]: \"\",\n        [DeckName.Wishlist]: \"\",\n    },\n    decks: {\n        [DeckName.Collection]: { name: DeckName.Collection, cards: EmptyCards() },\n        [DeckName.Wishlist]: { name: DeckName.Wishlist, cards: EmptyCards() },\n    },\n    cardList: {},\n    symbolList: {},\n    setList: {},\n    selectedDeck: null,\n    modifierKeys: {\n        shift: false,\n    }\n};\n\nexport const State = React.createContext<[AppState, React.Dispatch<Action>]>([initialState, undefined as any]);\n","import { omit } from \"lodash\";\nimport { AppState, CardList, Decks, EmptyCards, FileIds, ModifierKeys, SetList, SymbolList } from \".\";\nimport { Action } from \"./Actions\";\n\nconst filesReducer = (state: FileIds, action: Action): FileIds => {\n    switch (action.type) {\n        case \"CreateDeck\":\n            return {\n                ...state,\n                [action.name]: action.link,\n            };\n        case \"DeleteDeck\":\n            return { ...omit(state, [action.name]) } as FileIds;\n    }\n    return state;\n};\n\nconst cardListReducer = (state: CardList, action: Action): CardList => {\n    switch (action.type) {\n        case \"AddCard\":\n            return {\n                ...state,\n                [action.card.name]: action.card,\n            };\n    }\n    return state;\n};\n\nconst symbolListReducer = (state: SymbolList, action: Action): SymbolList => {\n    switch (action.type) {\n        case \"AddSymbols\":\n            return action.symbols.reduce((obj, s) => ({ ...obj, [s.symbol]: s }), {});\n    }\n    return state;\n};\n\nconst setListReducer = (state: SetList, action: Action): SetList => {\n    switch (action.type) {\n        case \"AddSets\":\n            return action.sets.reduce((obj, s) => ({ ...obj, [s.code]: s }), {});\n    }\n    return state;\n};\n\nconst decksReducer = (state: Decks, action: Action): Decks => {\n    switch (action.type) {\n        case \"CreateDeck\":\n            return {\n                ...state,\n                [action.name]: {\n                    cards: EmptyCards(),\n                    ...omit(action, [\"type\", \"link\"]),\n                },\n            };\n        case \"UpdateDeck\":\n            return {\n                ...state,\n                [action.name]: {\n                    ...state[action.name],\n                    isDirty: true,\n                    ...omit(action, [\"type\"]),\n                },\n            };\n        case \"UpdateDeckCard\":\n            if (action.card.amount === 0) {\n                return {\n                    ...state,\n                    [action.deckName]: {\n                        ...state[action.deckName],\n                        cards: {\n                            ...state[action.deckName].cards,\n                            [action.sectionName]: omit(state[action.deckName].cards[action.sectionName], action.card.name),\n                        },\n                        isDirty: true,\n                    },\n                };\n            }\n            return {\n                ...state,\n                [action.deckName]: {\n                    ...state[action.deckName],\n                    cards: {\n                        ...state[action.deckName].cards,\n                        [action.sectionName]: {\n                            ...state[action.deckName].cards[action.sectionName],\n                            [action.card.name]: {\n                                ...state[action.deckName].cards[action.sectionName][action.card.name],\n                                ...action.card,\n                            },\n                        },\n                    },\n                    isDirty: true,\n                },\n            };\n        case \"DeleteDeck\":\n            return { ...omit(state, [action.name]) } as Decks;\n    }\n    return state;\n};\n\nconst selectedDeckReducer = (state: string | null, action: Action): string | null => {\n    switch (action.type) {\n        case \"SelectDeck\":\n            return action.name;\n        case \"DeleteDeck\":\n            return action.name === state ? null : state;\n    }\n    return state;\n};\n\nconst modifierKeysReducer = (state: ModifierKeys, action: Action): ModifierKeys => {\n    switch (action.type) {\n        case \"SetModifierKey\":\n            return {\n                ...state,\n                [action.key]: action.value,\n            };\n    }\n    return state;\n};\n\nconst combineReducers = <State, Action>(reducers: { [P in keyof State]: (state: State[P], action: Action) => State[P] }) => {\n    return (state: State, action: Action) => {\n        const temp: State = {} as any;\n        for (const i in reducers) {\n            temp[i] = reducers[i](state[i], action);\n        }\n        return temp;\n    };\n};\n\nexport const reducer = combineReducers<AppState, Action>({\n    files: filesReducer,\n    cardList: cardListReducer,\n    symbolList: symbolListReducer,\n    setList: setListReducer,\n    decks: decksReducer,\n    selectedDeck: selectedDeckReducer,\n    modifierKeys: modifierKeysReducer,\n});\n","import { isNull } from \"lodash\";\nimport { DeckCard, DeckCards, EmptyCards, SectionName } from \"../State\";\n\nconst serialize = (collection?: string, ...sections: string[]): DeckCards => {\n    if (!collection || collection === \"\") {\n        return EmptyCards(...sections);\n    }\n    return collection\n        .split(\"##\")\n        .map((section, index) => {\n            let name: string, lines: string[];\n            if (index === 0) {\n                name = SectionName.Default;\n                lines = section.split(/\\r?\\n/);\n            } else {\n                [name, ...lines] = section.split(/\\r?\\n/);\n            }\n            return [\n                name,\n                lines\n                    .map(line => line.match(/^(\\d*) +(.*?)(?: # (.*))?$/))\n                    .filter(match => !isNull(match))\n                    .map(match => ({\n                        amount: parseInt(match![1]),\n                        name: match![2],\n                        comment: match![3],\n                    })),\n            ] as [string, DeckCard[]];\n        })\n        .reduce(\n            (prev, val) => ({ ...prev, [val[0]]: val[1].reduce((p, v) => ({ ...p, [v.name]: v }), {}) }),\n            EmptyCards(...sections)\n        );\n};\n\nconst deserialize = (deck: DeckCards) =>\n    Object.entries(deck).reduce(\n        (str, section) =>\n            `${str}${section[0] !== SectionName.Default ? `#${section[0]}\\n` : \"\"}${Object.values(section[1]).reduce(\n                (s, card) => `${s}${card.amount} ${card.name}${card.comment ? ` # ${card.comment}` : \"\"}\\n`,\n                \"\"\n            )}\\n`,\n        \"\"\n    );\n\nconst CollectionParser = {\n    serialize,\n    deserialize,\n};\n\nexport default CollectionParser;\n","/* global gapi */\nimport React from \"react\";\nimport { DeckName, DeckProps, SectionName } from \"../State\";\nimport { Action } from \"../State/Actions\";\nimport CollectionParser from \"./CollectionParser\";\n\nconst GoogleApiInit = {\n    apiKey: process.env.REACT_APP_API_KEY,\n    clientId: process.env.REACT_APP_CLIENT_ID,\n    discoveryDocs: [\"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"],\n    scope: \"profile https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file\",\n};\n\nconst initClient = (onUpdateStatus: (isSignedIn: boolean) => void) => {\n    gapi.load(\"client:auth2\", () => {\n        gapi.client.init(GoogleApiInit).then(() => {\n            gapi.auth2.getAuthInstance().isSignedIn.listen(onUpdateStatus);\n            onUpdateStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n        }, console.error);\n    });\n};\n\nconst prepareAppData = () => async (dispatch: React.Dispatch<Action>) => {\n    var response = await gapi.client.drive.files.list({\n        spaces: \"appDataFolder\",\n        fields: \"nextPageToken, files(id, name, appProperties)\",\n    });\n\n    const collectionFile = response.result?.files?.find(f => f.appProperties?.name === DeckName.Collection);\n    if (!collectionFile) {\n        console.info(\"Creating collection...\");\n        createNewDeck(dispatch, { name: DeckName.Collection });\n    } else {\n        console.info(\"Loading collection...\");\n        dispatch({ type: \"CreateDeck\", name: DeckName.Collection, link: collectionFile.id! });\n        dispatch({\n            type: \"UpdateDeck\",\n            name: DeckName.Collection,\n            cards: CollectionParser.serialize(await getFileContents({ id: collectionFile.id! })),\n            isDirty: false,\n        });\n    }\n\n    const wishlistFile = response.result?.files?.find(f => f.appProperties?.name === DeckName.Wishlist);\n    if (!wishlistFile) {\n        console.info(\"Creating wishlist...\");\n        createNewDeck(dispatch, { name: DeckName.Wishlist });\n    } else {\n        console.info(\"Loading wishlist...\");\n        dispatch({ type: \"CreateDeck\", name: DeckName.Wishlist, link: wishlistFile.id! });\n        dispatch({\n            type: \"UpdateDeck\",\n            name: DeckName.Wishlist,\n            cards: CollectionParser.serialize(await getFileContents({ id: wishlistFile.id! })),\n            isDirty: false,\n        });\n    }\n\n    const otherFiles = response.result?.files?.filter(f => f.appProperties?.name !== DeckName.Collection && f.appProperties?.name !== DeckName.Wishlist)!;\n    for (let i = 0; i < otherFiles.length; i++) {\n        const file = otherFiles[i];\n        const name = file.appProperties?.name ?? file.name?.match(/(.*?)\\.txt/)?.[0] ?? \"unnamed\";\n        dispatch({ type: \"CreateDeck\", name, link: file.id! });\n        dispatch({\n            type: \"UpdateDeck\",\n            name,\n            previewUrl: file.appProperties?.previewUrl,\n            cards: CollectionParser.serialize(await getFileContents({ id: file.id! }), SectionName.Sideboard, SectionName.Maybeboard),\n            isDirty: false,\n        });\n    }\n};\n\nconst createNewFile = async ({\n    name,\n    props,\n    fileContent,\n    folder,\n}: {\n    name: string;\n    props?: object;\n    fileContent?: string;\n    folder?: string[];\n}): Promise<string> => {\n    const file = new Blob([fileContent ?? \"\"], { type: \"text/plain\" });\n    const metadata = {\n        name,\n        mimeType: \"text/plain\",\n        appProperties: props ?? {},\n        parents: [\"appDataFolder\", ...(folder ?? [])],\n    };\n\n    const accessToken = gapi.auth.getToken().access_token;\n    const form = new FormData();\n    form.append(\"metadata\", new Blob([JSON.stringify(metadata)], { type: \"application/json\" }));\n    form.append(\"file\", file);\n\n    const res = await fetch(\"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id\", {\n        method: \"POST\",\n        headers: new Headers({ Authorization: \"Bearer \" + accessToken }),\n        body: form,\n    });\n    const val = await res.json();\n    return val.id;\n};\n\nconst updateFile = async ({ id, fileContent }: { id: string; fileContent: string }) => {\n    const file = new Blob([fileContent], { type: \"text/plain\" });\n\n    const accessToken = gapi.auth.getToken().access_token;\n    const form = new FormData();\n    form.append(\"file\", file);\n\n    const res = await fetch(`https://www.googleapis.com/upload/drive/v3/files/${id}?uploadType=media&fields=id`, {\n        method: \"PATCH\",\n        headers: new Headers({ Authorization: \"Bearer \" + accessToken }),\n        body: form,\n    });\n    const val = await res.json();\n    return val.id;\n};\n\nconst getFileContents = async ({ id }: { id: string }) => {\n    const res = await gapi.client.drive.files.get({\n        fileId: id,\n        alt: \"media\",\n    });\n    return res.body;\n};\n\nconst deleteFile = async ({ id }: { id: string }) => gapi.client.drive.files.delete({ fileId: id });\n\nconst createNewDeck = async (dispatch: React.Dispatch<Action>, { name, fileContent, ...restProps }: DeckProps & { fileContent?: string }) => {\n    dispatch({\n        type: \"CreateDeck\",\n        name,\n        link: await createNewFile({\n            name: `${name}.txt`,\n            props: {\n                name,\n                ...restProps,\n            },\n            fileContent,\n        }),\n        cards: CollectionParser.serialize(fileContent, SectionName.Sideboard, SectionName.Maybeboard),\n        isDirty: false,\n        ...restProps,\n    });\n};\n\nconst deleteDeck = async (dispatch: React.Dispatch<Action>, { name, id }: { name: string; id: string }) => {\n    await deleteFile({ id });\n    dispatch({ type: \"DeleteDeck\", name });\n};\n\nconst getProfile = () => {\n    return gapi.auth2\n        .getAuthInstance()\n        .currentUser.get()\n        .getBasicProfile();\n};\n\nconst signIn = () => gapi.auth2.getAuthInstance().signIn();\nconst signOut = () => gapi.auth2.getAuthInstance().signOut();\n\nexport type GoogleProfile = gapi.auth2.BasicProfile;\n\nconst GoogleApi = {\n    initClient,\n    getProfile,\n    signIn,\n    signOut,\n    prepareAppData,\n    createNewFile,\n    updateFile,\n    deleteFile,\n    createNewDeck,\n    deleteDeck,\n    getFileContents,\n};\nexport default GoogleApi;\n","import ScrySdk from \"scryfall-sdk\";\nimport DeepReadonly from \"../DeepReadonly\";\nimport Axios from \"axios\";\nimport { ScryCardSymbol, ScryManaCost, ScrySet } from \"./Types\";\n\ntype List<T = any> = {\n    data: T[];\n};\n\nconst Api = (() => {\n    let endpoint = Axios.create({\n        baseURL: \"https://api.scryfall.com\",\n        responseType: \"json\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n    });\n\n    return {\n        endpoint,\n        Symbology: {\n            All: () => endpoint.get<List<ScryCardSymbol>>(\"/symbology\").then(r => r.data.data),\n            ParseMana: (cost: string) => endpoint.get<ScryManaCost>(\"/symbology/parse-mana\", { params: { cost } }).then(r => r.data),\n        },\n        Cards: {\n            Autocomplete: (q: string) =>\n                endpoint\n                    .get<List<string>>(\"/cards/autocomplete\", { params: { q, include_extras: true } })\n                    .then(r => r.data.data),\n            Named: (fuzzy: string) => endpoint.get<ScrySdk.Card>(\"/cards/named\", { params: { fuzzy } }).then(r => r.data),\n        },\n        Sets: {\n            All: () => endpoint.get<List<ScrySet>>(\"/sets\").then(r => r.data.data),\n        }\n    };\n})();\n\nconst getImage = (card: DeepReadonly<ScrySdk.Card>, type: keyof ScrySdk.ImageUris): string | null => {\n    var images: ScrySdk.ImageUris | null | undefined;\n    switch (card.layout) {\n        case \"transform\":\n        case \"double_faced_token\":\n            images = card.card_faces![0].image_uris;\n            break;\n        default:\n            images = card.image_uris;\n    }\n    return images?.[type] ?? null;\n};\n\nconst getPlaceholder = (cardName: string): string => `https://via.placeholder.com/146x204?text=${cardName.replace(/\\s/, \"+\")}`;\n\nconst Scry = {\n    ...Api,\n    getImage,\n    getPlaceholder,\n};\nexport default Scry;\n","import React from \"react\";\r\n\r\nconst useEventListener = <K extends keyof WindowEventMap>(eventName: K, handler: (this: Window, ev: WindowEventMap[K]) => any, element = window) => {\r\n    const savedHandler = React.useRef<any>();\r\n    \r\n    React.useEffect(() => {\r\n        savedHandler.current = handler;\r\n    }, [handler]);\r\n\r\n    React.useEffect(\r\n        () => {\r\n            if (!element || !element.addEventListener) return;\r\n            const eventListener = (event: WindowEventMap[K]) => savedHandler.current(event);\r\n            element.addEventListener(eventName, eventListener);\r\n            return () => {\r\n                element.removeEventListener(eventName, eventListener);\r\n            };\r\n        },\r\n        [eventName, element]\r\n    );\r\n};\r\nexport default useEventListener;\r\n","import { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport baseStyled, { css as styledCss, ThemedStyledInterface, ThemedStyledProps, ThemeProvider as ThemeProv } from \"styled-components\";\r\nimport { colors } from \"@material-ui/core\";\r\n\r\nconst additionalArgs = {\r\n    constants: {\r\n        drawerWidth: \"260px\",\r\n        drawerWidthClosed: \"72px\",\r\n        appletHeight: \"280px\",\r\n    },\r\n};\r\n\r\nexport const MainTheme = createMuiTheme(\r\n    {\r\n        palette: {\r\n            type: \"dark\",\r\n            primary: { main: colors.deepOrange[700] },\r\n            secondary: { main: colors.blueGrey[500] },\r\n        },\r\n    },\r\n    additionalArgs\r\n);\r\n\r\nexport const ThemeProvider = ThemeProv;\r\nexport const css = styledCss;\r\n\r\nexport type Theme = typeof MainTheme & typeof additionalArgs;\r\nexport type ComponentProps<T = {}> = ThemedStyledProps<T, Theme>;\r\nconst styled = baseStyled as ThemedStyledInterface<Theme>;\r\nexport default styled;\r\n","import { Avatar, Badge, Divider, List, ListItem, ListItemAvatar, ListItemText, Tooltip } from \"@material-ui/core\";\r\nimport CollectionsIcon from \"@material-ui/icons/Collections\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport React from \"react\";\r\nimport { Deck, DeckName, State } from \"../State\";\r\nimport styled from \"./Styled/Theme\";\r\n\r\nconst StyledItemText = styled(ListItemText)`\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n`;\r\n\r\ntype Props = {\r\n    open: boolean;\r\n};\r\n\r\nconst DrawerDeckList: React.FC<Props> = ({ open }) => {\r\n    const [state, dispatch] = React.useContext(State);\r\n    const selectDeck = (name: string) => () => {\r\n        dispatch({ type: \"SelectDeck\", name });\r\n    };\r\n\r\n    const renderItem = (deck: Deck, name?: string, icon?: JSX.Element) => (\r\n        <Tooltip key={deck.name} title={open ? \"\" : (state.decks[deck.name].isDirty ? \"*\" : \"\") + (name ?? deck.name)} placement=\"right\">\r\n            <ListItem button onClick={selectDeck(deck.name)}>\r\n                <ListItemAvatar>\r\n                    <Badge\r\n                        invisible={!state.decks[deck.name].isDirty}\r\n                        color=\"primary\"\r\n                        overlap=\"circle\"\r\n                        badgeContent=\" \"\r\n                        anchorOrigin={{\r\n                            vertical: \"bottom\",\r\n                            horizontal: \"right\",\r\n                        }}\r\n                    >\r\n                        <Avatar alt={name ?? deck.name} src={deck.previewUrl}>\r\n                            {icon ?? <CollectionsIcon />}\r\n                        </Avatar>\r\n                    </Badge>\r\n                </ListItemAvatar>\r\n                <StyledItemText primary={name ?? deck.name} />\r\n            </ListItem>\r\n        </Tooltip>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <List>\r\n                {renderItem(state.decks[DeckName.Collection], \"Collection\")}\r\n                {renderItem(state.decks[DeckName.Wishlist], \"Wishlist\", <FavoriteIcon />)}\r\n            </List>\r\n            <Divider />\r\n            <List>\r\n                {Object.values(state.decks)\r\n                    .filter(deck => deck.name !== DeckName.Collection && deck.name !== DeckName.Wishlist)\r\n                    .map(deck => renderItem(deck))}\r\n            </List>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default DrawerDeckList;\r\n","import { Paper, Typography } from \"@material-ui/core\";\r\nimport styled from \"./Theme\";\r\n\r\nexport const FlexCol = styled.div`\r\n    flex: 1 1 auto;\r\n`;\r\n\r\nexport const AppletPaper = styled(Paper)`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    min-height: ${p => p.theme.constants.appletHeight};\r\n    padding: ${p => p.theme.spacing(2)}px;\r\n`;\r\n\r\nexport const AppletActions = styled.div`\r\n    align-self: flex-end;\r\n`;\r\n\r\nexport const Title = styled(Typography).attrs(p => ({\r\n    component: \"h2\",\r\n    variant: \"h6\",\r\n    color: \"primary\",\r\n    gutterBottom: true,\r\n}))``;\r\n","import { Avatar, Button, ButtonGroup, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Grid, TextField } from \"@material-ui/core\";\nimport CollectionsIcon from \"@material-ui/icons/Collections\";\nimport { Autocomplete } from \"@material-ui/lab\";\nimport React from \"react\";\nimport { State } from \"../../State\";\nimport GoogleApi from \"../../Utility/GoogleApi\";\nimport Scry from \"../../Utility/Scry\";\nimport { AppletActions, AppletPaper, FlexCol, Title } from \"../Styled/Grid\";\nimport styled from \"../Styled/Theme\";\n\nconst PreviewRow = styled.div`\n    display: flex;\n    margin-top: ${p => p.theme.spacing(1)}px;\n    align-items: center;\n\n    & .MuiAutocomplete-root {\n        flex-grow: 1;\n        margin-right: ${p => p.theme.spacing(1)}px;\n    }\n`;\n\nconst AddDeck: React.FC = () => {\n    const [state, dispatch] = React.useContext(State);\n\n    const [importText, setImportText] = React.useState<string>(\"\");\n    const [deckName, setDeckName] = React.useState<string>(\"\");\n    const [open, setOpen] = React.useState(false);\n    const [invalidName, setInvalidName] = React.useState<string | null>(null);\n\n    const [previewCard, setPreviewCard] = React.useState<string>(\"\");\n    const [previewAutocomplete, setPreviewAutocomplete] = React.useState<string[]>([]);\n    const [previewUrl, setPreviewUrl] = React.useState<string>(\"\");\n\n    const handleClickOpen = () => setOpen(true);\n    const handleClose = () => setOpen(false);\n\n    const handleImport = () => {\n        setOpen(false);\n        GoogleApi.createNewDeck(dispatch, { name: deckName, fileContent: importText, previewUrl });\n        setImportText(\"\");\n        validateName(\"\");\n        setPreviewCard(\"\");\n        setPreviewAutocomplete([]);\n        setPreviewUrl(\"\");\n    };\n\n    const validateName = (name: string) => {\n        setDeckName(name);\n        if (name === \"\") {\n            setInvalidName(\"Deck name can't be empty\");\n            return;\n        }\n        if (state.decks[name]) {\n            setInvalidName(\"Deck with this name already exists\");\n            return;\n        }\n        setInvalidName(null);\n        setPreviewCard(\"\");\n        setPreviewAutocomplete([]);\n    };\n\n    const updatePreviewCard = (name: string) => {\n        setPreviewCard(name);\n        Scry.Cards.Autocomplete(previewCard).then(names => setPreviewAutocomplete(names));\n    };\n\n    const updatePreview = () => {\n        if (previewCard === \"\") {\n            setPreviewUrl(\"\");\n            return;\n        }\n        Scry.Cards.Named(previewCard)\n            .then(card => {\n                setPreviewUrl(Scry.getImage(card, \"art_crop\") ?? \"\");\n            })\n            .catch(reason => {\n                setPreviewCard(\"\");\n            });\n    };\n\n    React.useEffect(() => validateName(\"\"), []);\n\n    return (\n        <Grid item xs={12} sm={6} md={4}>\n            <AppletPaper>\n                <Title>Add deck</Title>\n                <FlexCol>\n                    <TextField\n                        label=\"Deck name\"\n                        variant=\"outlined\"\n                        error={!!invalidName}\n                        helperText={invalidName}\n                        value={deckName}\n                        onChange={e => validateName(e.target.value)}\n                        fullWidth\n                    />\n                    <PreviewRow>\n                        <Autocomplete\n                            autoHighlight\n                            disableClearable\n                            options={previewAutocomplete}\n                            inputValue={previewCard}\n                            onInputChange={(e, value) => updatePreviewCard(value)}\n                            onBlur={updatePreview}\n                            renderInput={params => <TextField {...params} label=\"Preview card\" variant=\"outlined\" fullWidth />}\n                        />\n                        <Avatar alt=\"Preview icon\" src={previewUrl}>\n                            <CollectionsIcon />\n                        </Avatar>\n                    </PreviewRow>\n                </FlexCol>\n                <AppletActions>\n                    <ButtonGroup size=\"small\">\n                        <Button disabled={!!invalidName} onClick={handleClickOpen}>\n                            Import\n                        </Button>\n                        <Button disabled={!!invalidName} color=\"primary\" onClick={handleImport}>\n                            Create empty\n                        </Button>\n                    </ButtonGroup>\n                </AppletActions>\n                <Dialog open={open} onClose={handleClose} aria-labelledby=\"import-deck-dialog\" fullWidth maxWidth=\"md\">\n                    <DialogTitle id=\"import-deck-dialog\">Import</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>Paste exported deck below.</DialogContentText>\n                        <TextField\n                            autoFocus\n                            fullWidth\n                            label=\"Import\"\n                            multiline\n                            rows=\"15\"\n                            variant=\"outlined\"\n                            value={importText}\n                            onChange={e => setImportText(e.target.value)}\n                        />\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            Cancel\n                        </Button>\n                        <Button onClick={handleImport} color=\"primary\">\n                            Import\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </AppletPaper>\n        </Grid>\n    );\n};\n\nexport default AddDeck;\n","import { AssertionError } from \"assert\";\r\n\r\nfunction assert(condition: any, message: string): asserts condition {\r\n    if (!condition) {\r\n        throw new AssertionError({ message });\r\n    }\r\n}\r\nexport default assert;","import React from \"react\";\r\nimport { isNullOrUndefined } from \"util\";\r\nimport { CollectionCardProps } from \"../Components/Previews/CollectionPreview\";\r\nimport { DeckName, SectionName, State } from \"../State\";\r\nimport assert from \"./Assert\";\r\n\r\nconst useCardActions = ({ card, deckName, sectionName }: CollectionCardProps) => {\r\n    const [state, dispatch] = React.useContext(State);\r\n\r\n    const targetDeck = deckName ?? state.selectedDeck ?? null;\r\n    const isOnWishlist = () => state.decks[DeckName.Wishlist].cards[SectionName.Default][card.name] !== undefined;\r\n    const sections = (targetDeck ? Object.keys(state.decks[targetDeck].cards) : []).filter(s => s !== sectionName);\r\n    return {\r\n        updateCardQuantity: (val: number) => {\r\n            assert(!isNullOrUndefined(deckName), \"DeckName should not be empty if the preview actions are Deck\");\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName,\r\n                sectionName: sectionName ?? SectionName.Default,\r\n                card: {\r\n                    ...card,\r\n                    amount: val,\r\n                },\r\n            });\r\n        },\r\n        openScryfallPage: () => card.scryfall_uri && window.open(card.scryfall_uri, \"_blank\"),\r\n        isOnWishlist,\r\n        toggleWishlist: () =>\r\n            isOnWishlist()\r\n                ? dispatch({\r\n                    type: \"UpdateDeckCard\",\r\n                    deckName: DeckName.Wishlist,\r\n                    sectionName: SectionName.Default,\r\n                    card: {\r\n                        ...card,\r\n                        amount: 0,\r\n                    },\r\n                })\r\n                : dispatch({\r\n                    type: \"UpdateDeckCard\",\r\n                    deckName: DeckName.Wishlist,\r\n                    sectionName: SectionName.Default,\r\n                    card: {\r\n                        ...card,\r\n                        amount: 1,\r\n                    },\r\n                }),\r\n        wishlistTooltip: () => (isOnWishlist() ? \"Remove from wishlist\" : \"Add to wishlist\"),\r\n        removeCard: () => {\r\n            assert(!isNullOrUndefined(deckName), \"DeckName should not be empty if the preview actions are Deck\");\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName,\r\n                sectionName: sectionName ?? SectionName.Default,\r\n                card: {\r\n                    ...card,\r\n                    amount: 0,\r\n                },\r\n            });\r\n        },\r\n        sections,\r\n        changeSection: (newSection: string) => {\r\n            assert(!isNullOrUndefined(deckName), \"DeckName should not be empty if the preview actions are Deck\");\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName,\r\n                sectionName: sectionName ?? SectionName.Default,\r\n                card: {\r\n                    ...card,\r\n                    amount: 0,\r\n                },\r\n            });\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName,\r\n                sectionName: newSection,\r\n                card: {\r\n                    ...card,\r\n                    amount: card.amount,\r\n                },\r\n            });\r\n        },\r\n        addToDeck: (section: string = SectionName.Default) => {\r\n            assert(!isNullOrUndefined(targetDeck), \"TargetDeck should not be empty if the preview actions are SearchDeck\");\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName: targetDeck,\r\n                sectionName: section,\r\n                card: {\r\n                    ...card,\r\n                    amount: 1,\r\n                },\r\n            });\r\n        }\r\n    } as const;\r\n};\r\nexport default useCardActions;\r\n","import { Avatar } from \"@material-ui/core\";\r\nimport { AvatarProps } from \"@material-ui/core/Avatar\";\r\nimport React from \"react\";\r\nimport { State } from \"../../State\";\r\nimport styled, { ComponentProps, css } from \"./Theme\";\r\n\r\ntype StyledAvatarProps = { action: \"+\" | \"-\"; size: Props[\"size\"] } & AvatarProps;\r\n\r\nconst StyledAvatar = styled(Avatar).attrs((p: ComponentProps<StyledAvatarProps>) => ({\r\n    className: p.size === \"chip\" ? p.className + \" MuiChip-avatar MuiChip-avatarSmall\" : p.className,\r\n}))<StyledAvatarProps>`\r\n    cursor: pointer;\r\n    color: ${p => p.theme.palette.text.primary};\r\n\r\n    ${p =>\r\n        p.size === \"inline\" &&\r\n        css`\r\n            width: ${p.theme.spacing(3)}px;\r\n            height: ${p.theme.spacing(3)}px;\r\n            font-size: 0.875rem;\r\n        `}\r\n\r\n    &:hover:before {\r\n        content: \"${p => p.action}\";\r\n    }\r\n`;\r\n\r\ntype Props = {\r\n    val: number;\r\n    onChange: (val: number) => void;\r\n    size?: \"chip\" | \"inline\";\r\n};\r\n\r\nconst IncrementNumber: React.FC<Props> = ({ val, onChange, size }) => {\r\n    const state = React.useContext(State)[0];\r\n\r\n    const onClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n        e.stopPropagation();\r\n        onChange(val + (state.modifierKeys.shift ? 1 : -1));\r\n    };\r\n    return (\r\n        <StyledAvatar title=\"\" onClick={onClick} action={state.modifierKeys.shift ? \"+\" : \"-\"} size={size}>\r\n            {val}\r\n        </StyledAvatar>\r\n    );\r\n};\r\nexport default IncrementNumber;\r\n","import React from \"react\";\r\nimport { State } from \"../../State\";\r\nimport { ScryCardSymbol } from \"../../Utility/Scry/Types\";\r\nimport styled from \"./Theme\";\r\n\r\nconst Symbol = styled.svg`\r\n    display: inline-block;\r\n    height: 16px;\r\n    width: 16px;\r\n    margin: 1px 1px -2px 1px;\r\n`;\r\n\r\ntype Props = {\r\n    symbol: string;\r\n};\r\n\r\nconst SymbolIcon: React.FC<Props> = ({ symbol }) => {\r\n    const [state] = React.useContext(State);\r\n    const [symbolObj, setSymbolObj] = React.useState<ScryCardSymbol>();\r\n    React.useEffect(() => {\r\n        setSymbolObj(state.symbolList[symbol] ?? Object.values(state.symbolList).find(s => s.loose_variant === symbol));\r\n    }, [symbol, state.symbolList]);\r\n    return symbolObj ? <Symbol dangerouslySetInnerHTML={{ __html: symbolObj.svg }} /> : <>{symbol}</>;\r\n};\r\n\r\nexport default SymbolIcon;\r\n","import React from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { TypographyProps } from \"@material-ui/core/Typography\";\r\nimport SymbolIcon from \"./SymbolIcon\";\r\n\r\ntype Props = TypographyProps & {\r\n    text: string;\r\n};\r\n\r\nconst SymbolTypography: React.FC<Props> = ({ text, ...typographyProps }) => {\r\n    const [parsed, setParsed] = React.useState<JSX.Element[]>([]);\r\n    React.useEffect(() => {\r\n        setParsed((text.match(/({.*?})|([^{]+)/g) ?? []).map((m, i) => (m[0] === \"{\" ? <SymbolIcon key={i} symbol={m} /> : <span key={i}>{m}</span>)));\r\n    }, [text]);\r\n    return <Typography {...typographyProps}>{parsed}</Typography>;\r\n};\r\n\r\nexport default SymbolTypography;\r\n","import { Chip } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport useCardActions from \"../../Utility/useCardAction\";\r\nimport IncrementNumber from \"../Styled/IncrementNumber\";\r\nimport styled from \"../Styled/Theme\";\r\nimport SymbolTypography from \"../Styled/SymbolTypography\";\r\nimport { CollectionCardProps } from \"./CollectionPreview\";\r\n\r\nconst CustomChip = styled(Chip)`\r\n    width: 100%;\r\n\r\n    & .MuiChip-label {\r\n        flex: 1 1 auto;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    & .MuiChip-deleteIcon {\r\n        width: unset;\r\n        height: unset;\r\n        flex-shrink: 0;\r\n        margin-left: ${p => p.theme.spacing(1)}px;\r\n        margin-top: 1px;\r\n    }\r\n`;\r\n\r\nconst CompressedCard: React.FC<CollectionCardProps> = props => {\r\n    const { updateCardQuantity, openScryfallPage } = useCardActions(props);\r\n    const { card } = props;\r\n    return (\r\n        <CustomChip\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            label={card.name}\r\n            deleteIcon={<SymbolTypography text={card.mana_cost ?? \"\"} noWrap />}\r\n            avatar={<IncrementNumber size=\"chip\" val={card.amount} onChange={updateCardQuantity} />}\r\n            onDelete={openScryfallPage}\r\n            onClick={openScryfallPage}\r\n            title=\"Open on scryfall\"\r\n        />\r\n    );\r\n};\r\nexport default CompressedCard;\r\n","import styled from \"./Theme\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nconst IndentedTypography = styled(Typography)`\r\n    text-indent: ${p => p.theme.spacing(1)}px;\r\n`;\r\nexport default IndentedTypography;\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { CollectionPreviewProps } from \"./CollectionPreview\";\r\nimport CompressedCard from \"./CompressedCard\";\r\nimport IndentedTypography from \"../Styled/IndentedTypography\";\r\n\r\nconst CompressedCollecion: React.FC<CollectionPreviewProps> = ({ cards, sortBy, sortOrder, showGroups, ...props }) => {\r\n    return (\r\n        <Grid container direction=\"column\">\r\n            {cards.length >= 1 ? (\r\n                cards.map(c => (\r\n                    <Grid item key={c.name} xs zeroMinWidth>\r\n                        <CompressedCard card={c} {...props} />\r\n                    </Grid>\r\n                ))\r\n            ) : (\r\n                <Grid item xs={12}>\r\n                    <IndentedTypography color=\"textSecondary\" variant=\"subtitle2\">Empty</IndentedTypography>\r\n                </Grid>\r\n            )}\r\n        </Grid>\r\n    );\r\n};\r\nexport default CompressedCollecion;\r\n","import { IconButton, Tooltip, Typography } from \"@material-ui/core\";\r\nimport { IconButtonProps } from \"@material-ui/core/IconButton/IconButton\";\r\nimport React from \"react\";\r\nimport styled, { css } from \"./Theme\";\r\n\r\nconst StyledIconButton = styled(IconButton)<{ background?: \"primary\" | \"secondary\" }>`\r\n    ${p =>\r\n        p.background &&\r\n        css`\r\n            background-color: ${p.theme.palette[p.background].main};\r\n        `};\r\n    &:hover {\r\n        ${p =>\r\n        p.background &&\r\n            css`\r\n                background-color: ${p.theme.palette[p.background].dark};\r\n            `};\r\n    }\r\n`;\r\n\r\ntype Props = {\r\n    onClick: () => void;\r\n    title: string;\r\n    size?: IconButtonProps[\"size\"];\r\n    disabled?: boolean;\r\n    background?: \"primary\" | \"secondary\";\r\n};\r\n\r\nconst TooltipButton: React.FC<Props> = ({ onClick, title, size, background, disabled, children }) => {\r\n    return (\r\n        <Tooltip title={title}>\r\n            <span>\r\n                <StyledIconButton size={size} background={background} disabled={disabled} onClick={onClick} aria-label={title}>\r\n                    {children}\r\n                    <Typography variant=\"srOnly\">{title}</Typography>\r\n                </StyledIconButton>\r\n            </span>\r\n        </Tooltip>\r\n    );\r\n};\r\nexport default TooltipButton;\r\n","import { IconButtonProps } from \"@material-ui/core/IconButton\";\r\nimport React from \"react\";\r\nimport useCardActions from \"../../../Utility/useCardAction\";\r\nimport SwapVertIcon from \"@material-ui/icons/SwapVert\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\nimport { ClickAwayListener, Grow, MenuItem, MenuList, Paper, Popper } from \"@material-ui/core\";\r\nimport { SectionName } from \"../../../State\";\r\n\r\ntype Props = {\r\n    actions: ReturnType<typeof useCardActions>;\r\n    size?: IconButtonProps[\"size\"];\r\n    background?: \"primary\" | \"secondary\";\r\n};\r\n\r\nconst ChangeSectionButton: React.FC<Props> = ({ actions, size, background }) => {\r\n    const [open, setOpen] = React.useState(false);\r\n    const anchorRef = React.useRef<HTMLDivElement>(null);\r\n\r\n    const handleToggle = () => setOpen(prevOpen => !prevOpen);\r\n    const handleClose = (event: React.MouseEvent<Document, MouseEvent>) => {\r\n        if (anchorRef.current && anchorRef.current.contains(event.target as HTMLElement)) {\r\n            return;\r\n        }\r\n\r\n        setOpen(false);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <span ref={anchorRef}>\r\n                <TooltipButton title=\"Change section\" onClick={handleToggle} disabled={actions.sections.length <= 0} background={background} size={size}>\r\n                    <SwapVertIcon />\r\n                </TooltipButton>\r\n            </span>\r\n            <Popper open={open} anchorEl={anchorRef.current} role={undefined} transition>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                        {...TransitionProps}\r\n                        style={{\r\n                            transformOrigin: placement === \"bottom\" ? \"center top\" : \"center bottom\",\r\n                        }}\r\n                    >\r\n                        <Paper elevation={5}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList>\r\n                                    {(actions.sections).map(s => (\r\n                                        <MenuItem\r\n                                            key={s}\r\n                                            onClick={() => actions.changeSection(s)}\r\n                                        >\r\n                                            {s === SectionName.Default ? \"Default\" : s}\r\n                                        </MenuItem>\r\n                                    ))}\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    );\r\n};\r\nexport default ChangeSectionButton;\r\n","import { IconButtonProps } from \"@material-ui/core/IconButton\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport React from \"react\";\r\nimport useCardActions from \"../../../Utility/useCardAction\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\n\r\ntype Props = {\r\n    actions: ReturnType<typeof useCardActions>;\r\n    size?: IconButtonProps[\"size\"];\r\n    background?: \"primary\" | \"secondary\";\r\n};\r\n\r\nconst DeleteButton: React.FC<Props> = ({ actions, size, background }) => {\r\n    return (\r\n        <TooltipButton title=\"Remove card\" onClick={actions.removeCard} background={background} size={size}>\r\n            <DeleteIcon />\r\n        </TooltipButton>\r\n    );\r\n};\r\nexport default DeleteButton;\r\n","import { IconButtonProps } from \"@material-ui/core/IconButton\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\r\nimport React from \"react\";\r\nimport useCardActions from \"../../../Utility/useCardAction\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\n\r\ntype Props = {\r\n    actions: ReturnType<typeof useCardActions>;\r\n    size?: IconButtonProps[\"size\"];\r\n    background?: \"primary\" | \"secondary\";\r\n};\r\n\r\nconst WishlistButton: React.FC<Props> = ({ actions, size, background }) => {\r\n    return (\r\n        <TooltipButton title={actions.wishlistTooltip()} onClick={actions.toggleWishlist} background={background} size={size}>\r\n            {actions.isOnWishlist() ? <FavoriteIcon /> : <FavoriteBorderIcon />}\r\n        </TooltipButton>\r\n    );\r\n};\r\nexport default WishlistButton;\r\n","import { Fab } from \"@material-ui/core\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport React from \"react\";\r\nimport { isNullOrUndefined } from \"util\";\r\nimport Scry from \"../../Utility/Scry\";\r\nimport useCardActions from \"../../Utility/useCardAction\";\r\nimport IncrementNumber from \"../Styled/IncrementNumber\";\r\nimport styled from \"../Styled/Theme\";\r\nimport ChangeSectionButton from \"./ActionButtons/ChangeSectionButton\";\r\nimport DeleteButton from \"./ActionButtons/DeleteButton\";\r\nimport WishlistButton from \"./ActionButtons/WishlistButton\";\r\nimport { CollectionCardProps } from \"./CollectionPreview\";\r\n\r\nconst Body = styled.div`\r\n    padding-bottom: 139.344262295%;\r\n    width: 100%;\r\n    height: 0;\r\n    position: relative;\r\n`;\r\n\r\nconst Image = styled.img`\r\n    border-radius: 4.75% / 3.5%;\r\n    background-image: repeating-linear-gradient(-55deg, #ddd, #ddd 5px, #ccc 5px, #ccc 10px);\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    cursor: pointer;\r\n`;\r\n\r\nconst IncrementActions = styled.div`\r\n    position: absolute;\r\n    top: 25%;\r\n    left: ${p => p.theme.spacing(2)}px;\r\n`;\r\n\r\nconst BottomActions = styled.div`\r\n    position: absolute;\r\n    bottom: ${p => p.theme.spacing(2)}px;\r\n    right: ${p => p.theme.spacing(2)}px;\r\n\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    opacity: 0;\r\n    transition: opacity 0.2s ease-in-out;\r\n\r\n    ${Body}:hover & {\r\n        opacity: 1;\r\n    }\r\n`;\r\n\r\nconst ActionsMenu = styled.div<{ open: boolean }>`\r\n    transform: scaleX(${p => (p.open ? 1 : 0)});\r\n    transition: all 0.2s ease-in-out;\r\n\r\n    & > * {\r\n        margin-right: ${p => p.theme.spacing(1)}px;\r\n    }\r\n`;\r\n\r\nconst ImagesCard: React.FC<CollectionCardProps> = props => {\r\n    const actions = useCardActions(props);\r\n    const { card } = props;\r\n\r\n    const [actionsOpen, setActionsOpen] = React.useState(false);\r\n    const toggleActionsOpen = () => setActionsOpen(prev => !prev);\r\n\r\n    return (\r\n        <Body>\r\n            <Image src={Scry.getImage(card, \"normal\") ?? \"\"} onClick={actions.openScryfallPage} title=\"Open on scryfall\" />\r\n            {!isNullOrUndefined(card.amount) && (\r\n                <IncrementActions>\r\n                    <IncrementNumber val={card.amount} onChange={actions.updateCardQuantity} />\r\n                </IncrementActions>\r\n            )}\r\n            <BottomActions>\r\n                <ActionsMenu open={actionsOpen}>\r\n                    <WishlistButton actions={actions} background=\"secondary\" />\r\n                    <ChangeSectionButton actions={actions} background=\"secondary\" />\r\n                    <DeleteButton actions={actions} background=\"secondary\" />\r\n                </ActionsMenu>\r\n                <Fab color=\"primary\" onClick={toggleActionsOpen}>\r\n                    <MenuIcon />\r\n                </Fab>\r\n            </BottomActions>\r\n        </Body>\r\n    );\r\n};\r\nexport default ImagesCard;\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport IndentedTypography from \"../Styled/IndentedTypography\";\r\nimport { CollectionPreviewProps } from \"./CollectionPreview\";\r\nimport ImagesCard from \"./ImagesCard\";\r\n\r\nconst ImagesCollecion: React.FC<CollectionPreviewProps> = ({ cards, sortBy, sortOrder, showGroups, ...props }) => {\r\n    return (\r\n        <Grid container spacing={1} alignItems=\"center\">\r\n            {cards.length >= 1 ? (\r\n                cards.map(c => (\r\n                    <Grid key={c.name} item xs={6} lg={6} xl={4}>\r\n                        <ImagesCard card={c} {...props} />\r\n                    </Grid>\r\n                ))\r\n            ) : (\r\n                <Grid item xs={12}>\r\n                    <IndentedTypography color=\"textSecondary\">Empty</IndentedTypography>\r\n                </Grid>\r\n            )}\r\n        </Grid>\r\n    );\r\n};\r\nexport default ImagesCollecion;\r\n","import React from \"react\";\r\nimport { State } from \"../../State\";\r\nimport { ScryCardRarity, ScrySet } from \"../../Utility/Scry/Types\";\r\nimport styled from \"./Theme\";\r\n\r\nconst Set = styled.svg<{ rarity: ScryCardRarity }>`\r\n    width: 25px;\r\n    height: 20px;\r\n    fill: url(#rarity-${p => p.rarity});\r\n`;\r\n\r\ntype Props = {\r\n    set: string;\r\n    rarity: ScryCardRarity;\r\n};\r\n\r\nconst SetIcon: React.FC<Props> = ({ set, rarity }) => {\r\n    const [state] = React.useContext(State);\r\n    const [setObj, setSetObj] = React.useState<ScrySet>();\r\n    React.useEffect(() => {\r\n        setSetObj(state.setList[set]);\r\n    }, [set, state.setList]);\r\n    return setObj ? (\r\n        <Set rarity={rarity}>\r\n            <defs>\r\n                <linearGradient id=\"rarity-common\">\r\n                    <stop offset=\"0%\" stopColor=\"#000\" />\r\n                </linearGradient>\r\n                <linearGradient id=\"rarity-uncommon\" gradientTransform=\"rotate(90)\">\r\n                    <stop offset=\"0%\" stopColor=\"#4d565a\" />\r\n                    <stop offset=\"50%\" stopColor=\"#a0c3d3\" />\r\n                    <stop offset=\"100%\" stopColor=\"#4d565a\" />\r\n                </linearGradient>\r\n                <linearGradient id=\"rarity-rare\" gradientTransform=\"rotate(90)\">\r\n                    <stop offset=\"0%\" stopColor=\"#85723e\" />\r\n                    <stop offset=\"50%\" stopColor=\"#d4b975\" />\r\n                    <stop offset=\"100%\" stopColor=\"#85723e\" />\r\n                </linearGradient>\r\n                <linearGradient id=\"rarity-mythic\" gradientTransform=\"rotate(90)\">\r\n                    <stop offset=\"0%\" stopColor=\"#b02911\" />\r\n                    <stop offset=\"50%\" stopColor=\"#e87f03\" />\r\n                    <stop offset=\"100%\" stopColor=\"#b02911\" />\r\n                </linearGradient>\r\n            </defs>\r\n            <svg dangerouslySetInnerHTML={{ __html: setObj.icon_svg }} />\r\n        </Set>\r\n    ) : (\r\n        <>{set}</>\r\n    );\r\n};\r\n\r\nexport default SetIcon;\r\n","import { Link, TableCell, TableRow } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { isNullOrUndefined } from \"util\";\r\nimport useCardActions from \"../../Utility/useCardAction\";\r\nimport IncrementNumber from \"../Styled/IncrementNumber\";\r\nimport SetIcon from \"../Styled/SetIcon\";\r\nimport SymbolTypography from \"../Styled/SymbolTypography\";\r\nimport styled from \"../Styled/Theme\";\r\nimport ChangeSectionButton from \"./ActionButtons/ChangeSectionButton\";\r\nimport DeleteButton from \"./ActionButtons/DeleteButton\";\r\nimport WishlistButton from \"./ActionButtons/WishlistButton\";\r\nimport { CollectionCardProps } from \"./CollectionPreview\";\r\nimport { NumberCell } from \"./ListCollection\";\r\n\r\nconst Actions = styled.div`\r\n    white-space: nowrap;\r\n    & > *:not(:last-child) {\r\n        margin-right: ${p => p.theme.spacing(0.5)}px;\r\n    }\r\n`;\r\n\r\nconst ListCard: React.FC<CollectionCardProps> = props => {\r\n    const actions = useCardActions(props);\r\n    const { card } = props;\r\n\r\n    return (\r\n        <TableRow>\r\n            <NumberCell component=\"th\" scope=\"row\" align=\"center\">\r\n                {!isNullOrUndefined(card.amount) ? <IncrementNumber size=\"inline\" val={card.amount} onChange={actions.updateCardQuantity} /> : \"-\"}\r\n            </NumberCell>\r\n            <TableCell>\r\n                <Link href=\"#\" onClick={actions.openScryfallPage} color=\"inherit\" title=\"Open on scryfall\">\r\n                    {card.name}\r\n                </Link>\r\n            </TableCell>\r\n            <TableCell align=\"center\">\r\n                <SetIcon set={card.set} rarity={card.rarity} />\r\n            </TableCell>\r\n            <TableCell>\r\n                <SymbolTypography text={card.mana_cost ?? \"\"} noWrap />\r\n            </TableCell>\r\n            <TableCell>{card.type_line}</TableCell>\r\n            <TableCell>\r\n                <Actions>\r\n                    <WishlistButton actions={actions} size=\"small\" />\r\n                    <ChangeSectionButton actions={actions} size=\"small\" />\r\n                    <DeleteButton actions={actions} size=\"small\" />\r\n                </Actions>\r\n            </TableCell>\r\n        </TableRow>\r\n    );\r\n};\r\nexport default ListCard;\r\n","import { Table, TableBody, TableCell, TableHead, TableRow } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport IndentedTypography from \"../Styled/IndentedTypography\";\r\nimport styled from \"../Styled/Theme\";\r\nimport { CollectionPreviewProps } from \"./CollectionPreview\";\r\nimport ListCard from \"./ListCard\";\r\n\r\nconst CustomPaddingTable = styled(Table)`\r\n    & .MuiTableCell-sizeSmall {\r\n        padding: ${p => p.theme.spacing(0.25, 1)};\r\n    }\r\n`;\r\n\r\nexport const NumberCell = styled(TableCell)`\r\n    width: 40px;\r\n`;\r\n\r\nconst ListCollecion: React.FC<CollectionPreviewProps> = ({ cards, sortBy, sortOrder, showGroups, ...props }) => {\r\n    return (\r\n        <CustomPaddingTable size=\"small\" aria-label=\"card table\">\r\n            <TableHead>\r\n                <TableRow>\r\n                    <NumberCell align=\"center\">#</NumberCell>\r\n                    <TableCell>Name</TableCell>\r\n                    <TableCell align=\"center\">Set</TableCell>\r\n                    <TableCell>Cost</TableCell>\r\n                    <TableCell>Type</TableCell>\r\n                    <TableCell>Actions</TableCell>\r\n                </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n                {cards.length >= 1 ? (\r\n                    cards.map(c => <ListCard key={c.name} card={c} {...props} />)\r\n                ) : (\r\n                    <TableRow>\r\n                        <TableCell colSpan={6}>\r\n                            <IndentedTypography color=\"textSecondary\">Empty</IndentedTypography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                )}\r\n            </TableBody>\r\n        </CustomPaddingTable>\r\n    );\r\n};\r\nexport default ListCollecion;\r\n","import { Typography } from \"@material-ui/core\";\r\nimport omit from \"lodash.omit\";\r\nimport React from \"react\";\r\nimport ScrySdk from \"scryfall-sdk\";\r\nimport { DeckCard, SectionName } from \"../../State\";\r\nimport CompressedCollecion from \"./CompressedCollection\";\r\nimport ImagesCollecion from \"./ImagesCollection\";\r\nimport ListCollecion from \"./ListCollection\";\r\n\r\nexport type PreviewStyle = \"Standard\" | \"List\" | \"Images\" | \"Compressed\";\r\nexport type PreviewActions = \"SearchDeck\" | \"SearchWishlist\" | \"Deck\";\r\nexport type SortByOptions = \"Name\" | \"Cmc\" | \"Type\" | \"Rarity\";\r\nexport type SortOrderOptions = \"Asc\" | \"Desc\";\r\n\r\nexport type CollectionPreviewProps = {\r\n    cards: (DeckCard & ScrySdk.Card)[];\r\n    actions: PreviewActions;\r\n    sortBy: SortByOptions;\r\n    sortOrder: SortOrderOptions;\r\n    showGroups: boolean;\r\n    deckName?: string;\r\n    sectionName?: string;\r\n};\r\n\r\nexport type CollectionCardProps = {\r\n    card: DeckCard & ScrySdk.Card;\r\n    actions: PreviewActions;\r\n    deckName?: string;\r\n    sectionName?: string;\r\n};\r\n\r\nconst desc = <T extends object>(a: T, b: T, orderBy: keyof T, func: <U extends any>(v: U) => U | number) => {\r\n    if (func(b[orderBy]) < func(a[orderBy])) {\r\n        return -1;\r\n    }\r\n    if (func(b[orderBy]) > func(a[orderBy])) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n};\r\n\r\nconst getSorting = <T extends object>(order: SortOrderOptions, orderBy: keyof T, func: <U extends any>(v: U) => U | number = v => v): ((a: T, b: T) => number) => {\r\n    return order === \"Desc\" ? (a, b) => desc(a, b, orderBy, func) : (a, b) => -desc(a, b, orderBy, func);\r\n};\r\n\r\n\r\nconst StableSort = <T extends object>(array: T[], cmp: (a: T, b: T) => number) => {\r\n    const stabilizedThis = array.map((el, index) => [el, index] as [T, number]);\r\n    stabilizedThis.sort((a, b) => {\r\n        const order = cmp(a[0], b[0]);\r\n        if (order !== 0) return order;\r\n        return a[1] - b[1];\r\n    });\r\n    return stabilizedThis.map(el => el[0]);\r\n};\r\n\r\nconst rarityOrder = [\"common\", \"uncommon\", \"rare\", \"mythic\"] as const;\r\nconst GetSortFunction = (sortBy: SortByOptions, sortOrder: SortOrderOptions) => {\r\n    switch (sortBy) {\r\n        case \"Name\":\r\n            return getSorting<DeckCard & ScrySdk.Card>(sortOrder, \"name\");\r\n        case \"Cmc\":\r\n            return getSorting<DeckCard & ScrySdk.Card>(sortOrder, \"mana_cost\");\r\n        case \"Type\":\r\n            return getSorting<DeckCard & ScrySdk.Card>(sortOrder, \"type_line\");\r\n        case \"Rarity\":\r\n            return getSorting<DeckCard & ScrySdk.Card>(sortOrder, \"rarity\", v => rarityOrder.indexOf(v));\r\n    }\r\n};\r\n\r\ntype Props = CollectionPreviewProps & {\r\n    style: PreviewStyle;\r\n};\r\n\r\nconst CollectionPreview: React.FC<Props> = props => {\r\n    const renderCollection = () => {\r\n        const passedProps = {\r\n            ...omit(props, \"style\", \"cards\"),\r\n            cards: StableSort(props.cards, GetSortFunction(props.sortBy, props.sortOrder)),\r\n        };\r\n        switch (props.style) {\r\n            case \"List\":\r\n                return <ListCollecion {...passedProps} />;\r\n            case \"Images\":\r\n                return <ImagesCollecion {...passedProps} />;\r\n            case \"Compressed\":\r\n                return <CompressedCollecion {...passedProps} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {props.sectionName !== SectionName.Default && <Typography variant=\"h6\">{props.sectionName}</Typography>}\r\n            {renderCollection()}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default CollectionPreview;\r\n","import { Button, ButtonGroup, Tooltip, Typography } from \"@material-ui/core\";\r\nimport ViewHeadlineIcon from \"@material-ui/icons/ViewHeadline\";\r\nimport ViewListIcon from \"@material-ui/icons/ViewList\";\r\nimport ViewModuleIcon from \"@material-ui/icons/ViewModule\";\r\nimport React from \"react\";\r\nimport styled from \"../../Styled/Theme\";\r\nimport { PreviewStyle } from \"../CollectionPreview\";\r\n\r\nconst Body = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: ${p => p.theme.spacing(1)}px;\r\n\r\n    & .MuiTypography-root {\r\n        margin-right: ${p => p.theme.spacing(1)}px;\r\n    }\r\n\r\n    & .MuiButton-root {\r\n        padding-left: 0;\r\n        padding-right: 0;\r\n    }\r\n`;\r\n\r\nconst IconForStyle = (style: PreviewStyle) => {\r\n    switch (style) {\r\n        case \"Standard\":\r\n            return <ViewListIcon />;\r\n        case \"List\":\r\n            return <ViewHeadlineIcon />;\r\n        case \"Images\":\r\n            return <ViewModuleIcon />;\r\n    }\r\n    throw Error(`Style ${style} does not have an icon.`);\r\n};\r\n\r\ntype Props = {\r\n    style: PreviewStyle;\r\n    onToggle: (style: PreviewStyle) => void;\r\n};\r\n\r\nconst PreviewStyleToggle: React.FC<Props> = ({ style, onToggle }) => {\r\n    return (\r\n        <Body>\r\n            <Typography variant=\"caption\">Display:</Typography>\r\n            <ButtonGroup variant=\"outlined\" size=\"small\">\r\n                {([\"Standard\", \"List\", \"Images\"] as const).map(s => (\r\n                    <Button key={s} onClick={() => onToggle(s)} variant={style === s ? \"contained\" : undefined}>\r\n                        <Tooltip title={s}>{IconForStyle(s)}</Tooltip>\r\n                    </Button>\r\n                ))}\r\n            </ButtonGroup>\r\n        </Body>\r\n    );\r\n};\r\nexport default PreviewStyleToggle;\r\n","import ListAltIcon from \"@material-ui/icons/ListAlt\";\r\nimport React from \"react\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\nimport styled from \"../../Styled/Theme\";\r\n\r\nconst Body = styled.div`\r\n    margin-bottom: ${p => p.theme.spacing(1)}px;\r\n    margin-left: ${p => p.theme.spacing(1)}px;\r\n`;\r\n\r\ntype Props = {\r\n    show: boolean;\r\n    setShow: (show: boolean) => void;\r\n};\r\n\r\nconst ShowGroupsToggle: React.FC<Props> = ({ show, setShow }) => {\r\n    return (\r\n        <Body>\r\n            <TooltipButton size=\"small\" title={show ? \"Hide groups\" : \"Show groups\"} onClick={() => setShow(!show)}>\r\n                <ListAltIcon />\r\n            </TooltipButton>\r\n        </Body>\r\n    );\r\n};\r\nexport default ShowGroupsToggle;\r\n","import { Button, ClickAwayListener, Grow, MenuItem, MenuList, Paper, Popper } from \"@material-ui/core\";\r\nimport SortIcon from \"@material-ui/icons/Sort\";\r\nimport React from \"react\";\r\nimport styled from \"../../Styled/Theme\";\r\nimport { SortByOptions, SortOrderOptions } from \"../CollectionPreview\";\r\n\r\nconst Body = styled.div`\r\n    margin-bottom: ${p => p.theme.spacing(1)}px;\r\n`;\r\n\r\ntype Props = {\r\n    sortBy: SortByOptions;\r\n    setSortBy: (sortBy: SortByOptions) => void;\r\n    sortOrder: SortOrderOptions;\r\n    setSortOrder: (sortOrder: SortOrderOptions) => void;\r\n};\r\n\r\nconst SortToggle: React.FC<Props> = ({ sortBy, setSortBy, sortOrder, setSortOrder }) => {\r\n    const [open, setOpen] = React.useState(false);\r\n    const anchorRef = React.useRef<HTMLButtonElement>(null);\r\n\r\n    const handleToggle = () => setOpen(prevOpen => !prevOpen);\r\n    const handleClose = (event: React.MouseEvent<Document, MouseEvent>) => {\r\n        if (anchorRef.current && anchorRef.current.contains(event.target as HTMLElement)) {\r\n            return;\r\n        }\r\n\r\n        setOpen(false);\r\n    };\r\n\r\n    return (\r\n        <Body>\r\n            <Button ref={anchorRef} size=\"small\" onClick={handleToggle} startIcon={<SortIcon />}>\r\n                Sort by\r\n            </Button>\r\n            <Popper open={open} anchorEl={anchorRef.current} role={undefined} transition>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                        {...TransitionProps}\r\n                        style={{\r\n                            transformOrigin: placement === \"bottom\" ? \"center top\" : \"center bottom\",\r\n                        }}\r\n                    >\r\n                        <Paper elevation={5}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList>\r\n                                    {([\r\n                                        [\"Name\", \"Asc\"],\r\n                                        [\"Name\", \"Desc\"],\r\n                                        [\"Cmc\", \"Asc\"],\r\n                                        [\"Cmc\", \"Desc\"],\r\n                                        [\"Type\", \"Asc\"],\r\n                                        [\"Type\", \"Desc\"],\r\n                                        [\"Rarity\", \"Asc\"],\r\n                                        [\"Rarity\", \"Desc\"],\r\n                                    ] as const).map(([by, order]) => (\r\n                                        <MenuItem\r\n                                            key={`${by} (${order})`}\r\n                                            selected={by === sortBy && order === sortOrder}\r\n                                            onClick={event => {\r\n                                                setSortBy(by);\r\n                                                setSortOrder(order);\r\n                                            }}\r\n                                        >\r\n                                            {`${by} (${order})`}\r\n                                        </MenuItem>\r\n                                    ))}\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </Body>\r\n    );\r\n};\r\nexport default SortToggle;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faClipboard, faCompressAlt, faExpandAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faGoogle } from \"@fortawesome/free-brands-svg-icons\";\r\nimport styled from \"./Theme\";\r\n\r\nconst IconWrap = styled.div`\r\n    width: 24px;\r\n    height: 24px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n`;\r\n\r\nexport const CompressIcon: React.FC = () => (\r\n    <IconWrap>\r\n        <FontAwesomeIcon icon={faCompressAlt} />\r\n    </IconWrap>\r\n);\r\n\r\nexport const ExpandIcon: React.FC = () => (\r\n    <IconWrap>\r\n        <FontAwesomeIcon icon={faExpandAlt} />\r\n    </IconWrap>\r\n);\r\n\r\nexport const GoogleIcon: React.FC = () => (\r\n    <IconWrap>\r\n        <FontAwesomeIcon icon={faGoogle} />\r\n    </IconWrap>\r\n);\r\n\r\nexport const ClipboardIcon: React.FC = () => (\r\n    <IconWrap>\r\n        <FontAwesomeIcon icon={faClipboard} />\r\n    </IconWrap>\r\n);\r\n","import { Dialog, DialogContent, DialogContentText, DialogTitle, Grid, TextField } from \"@material-ui/core\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport copy from \"clipboard-copy\";\nimport React from \"react\";\nimport * as Scry from \"scryfall-sdk\";\nimport { DeckCard, DeckName, State } from \"../../State\";\nimport CollectionParser from \"../../Utility/CollectionParser\";\nimport GoogleApi from \"../../Utility/GoogleApi\";\nimport CollectionPreview, { PreviewStyle, SortByOptions, SortOrderOptions } from \"../Previews/CollectionPreview\";\nimport PreviewStyleToggle from \"../Previews/Common/PreviewStyleToggle\";\nimport ShowGroupsToggle from \"../Previews/Common/ShowGroupsToggle\";\nimport SortToggle from \"../Previews/Common/SortToggle\";\nimport { AppletActions, AppletPaper, FlexCol, Title } from \"../Styled/Grid\";\nimport { ClipboardIcon, CompressIcon, ExpandIcon } from \"../Styled/Icons\";\nimport styled from \"../Styled/Theme\";\nimport TooltipButton from \"../Styled/TooltipButton\";\n\nconst SectionRow = styled.div`\n    margin-bottom: ${p => p.theme.spacing(2)}px;\n`;\n\nconst ExportRow = styled(FlexCol)`\n    display: flex;\n    align-items: center;\n    margin-bottom: ${p => p.theme.spacing(1)}px;\n\n    & .MuiDialogContentText-root {\n        flex-grow: 1;\n        margin-bottom: 0;\n    }\n`;\n\ntype Props = {\n    deckName: string;\n};\n\nconst DeckPreview = ({ deckName }: Props) => {\n    const [state, dispatch] = React.useContext(State);\n    const deck = state.decks[deckName];\n\n    const [expanded, setExpanded] = React.useState(true);\n    const [exportOpened, setExportOpened] = React.useState(false);\n    const [style, setStyle] = React.useState<PreviewStyle>(\"List\");\n    const [sortBy, setSortBy] = React.useState<SortByOptions>(\"Cmc\");\n    const [sortOrder, setSortOrder] = React.useState<SortOrderOptions>(\"Asc\");\n    const [showGroups, setShowGroups] = React.useState(false);\n\n    React.useEffect(() => {\n        const missingCards = Object.values(deck.cards)\n            .reduce((prev, val) => [...prev, ...Object.values(val)], [] as DeckCard[])\n            .filter(card => !state.cardList[card.name]);\n        Scry.Cards.collection(...missingCards.map(card => Scry.CardIdentifier.byName(card.name))).on(\"data\", (card: any) =>\n            dispatch({ type: \"AddCard\", card })\n        );\n    }, [deckName]);\n\n    const closePreview = () => dispatch({ type: \"SelectDeck\", name: null });\n    const toggleExpanded = () => setExpanded(e => !e);\n    const onDeleteDeck = () => GoogleApi.deleteDeck(dispatch, { name: deckName, id: state.files[deckName] });\n    const onSaveChanges = () =>\n        GoogleApi.updateFile({ id: state.files[deckName], fileContent: CollectionParser.deserialize(deck.cards) }).then(() =>\n            dispatch({ type: \"UpdateDeck\", name: deckName, isDirty: false })\n        );\n    const onExportOpen = () => setExportOpened(true);\n    const onExportClose = () => setExportOpened(false);\n\n    return (\n        <Grid item xs={12} md={expanded ? 6 : 4}>\n            <AppletPaper>\n                <Grid container direction=\"row\" justify=\"space-between\">\n                    <Grid item>\n                        <Title>Deck preview</Title>\n                    </Grid>\n                    <Grid item>\n                        <TooltipButton title={expanded ? \"Compress\" : \"Expand\"} size=\"small\" onClick={toggleExpanded}>\n                            {expanded ? <CompressIcon /> : <ExpandIcon />}\n                        </TooltipButton>\n                        <TooltipButton title=\"Close preview\" size=\"small\" onClick={closePreview}>\n                            <CloseIcon />\n                        </TooltipButton>\n                    </Grid>\n                </Grid>\n                <Grid container justify=\"space-between\">\n                    <SortToggle sortBy={sortBy} setSortBy={setSortBy} sortOrder={sortOrder} setSortOrder={setSortOrder} />\n                    <ShowGroupsToggle show={showGroups} setShow={setShowGroups} />\n                    <FlexCol />\n                    {expanded && <PreviewStyleToggle style={style} onToggle={setStyle} />}\n                </Grid>\n                <FlexCol>\n                    {Object.entries(deck.cards).map(([sectionName, cards]) => (\n                        <SectionRow key={sectionName}>\n                            <CollectionPreview\n                                cards={Object.values(cards).map(c => ({ ...c, ...(state.cardList[c.name] ?? {}) })) as any}\n                                style={expanded ? style : \"Compressed\"}\n                                actions={deckName === DeckName.Wishlist ? \"SearchWishlist\" : \"Deck\"}\n                                sortBy={sortBy}\n                                sortOrder={sortOrder}\n                                showGroups={showGroups}\n                                deckName={deckName}\n                                sectionName={sectionName}\n                            />\n                        </SectionRow>\n                    ))}\n                </FlexCol>\n                <AppletActions>\n                    <TooltipButton title=\"Export deck\" onClick={onExportOpen}>\n                        <GetAppIcon />\n                    </TooltipButton>\n                    {deckName !== DeckName.Collection && deckName !== DeckName.Wishlist && (\n                        <TooltipButton title=\"Delete deck\" onClick={onDeleteDeck}>\n                            <DeleteIcon />\n                        </TooltipButton>\n                    )}\n                    {state.decks[deck.name].isDirty && (\n                        <TooltipButton title=\"Save changes\" onClick={onSaveChanges} background=\"primary\">\n                            <SaveIcon />\n                        </TooltipButton>\n                    )}\n                </AppletActions>\n                <Dialog open={exportOpened} onClose={onExportClose} aria-labelledby=\"export-deck-dialog\" fullWidth maxWidth=\"md\">\n                    <DialogTitle id=\"import-deck-dialog\">Export</DialogTitle>\n                    <DialogContent>\n                        <ExportRow>\n                            <DialogContentText>Copy exported text below.</DialogContentText>\n                            <TooltipButton title=\"Copy to clipboard\" onClick={() => copy(CollectionParser.deserialize(deck.cards))}>\n                                <ClipboardIcon />\n                            </TooltipButton>\n                        </ExportRow>\n                        <TextField\n                            label=\"Export\"\n                            multiline\n                            rows=\"15\"\n                            fullWidth\n                            variant=\"outlined\"\n                            value={CollectionParser.deserialize(deck.cards)}\n                            InputProps={{\n                                readOnly: true,\n                            }}\n                        />\n                    </DialogContent>\n                </Dialog>\n            </AppletPaper>\n        </Grid>\n    );\n};\n\nexport default DeckPreview;\n","import {\n    Button,\n    Checkbox,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    FormControlLabel,\n    FormGroup,\n    Grid,\n    TextField,\n    Tooltip,\n    Typography,\n} from \"@material-ui/core\";\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport { Autocomplete } from \"@material-ui/lab\";\nimport React from \"react\";\nimport Scry from \"../../Utility/Scry\";\nimport { AppletActions, AppletPaper, FlexCol, Title } from \"../Styled/Grid\";\nimport styled from \"../Styled/Theme\";\nimport SymbolTypography from \"../Styled/SymbolTypography\";\n\n// TODO: remove from here & make it reusable?\nconst PreviewRow = styled.div`\n    display: flex;\n    margin-top: ${p => p.theme.spacing(1)}px;\n    align-items: center;\n\n    & .MuiAutocomplete-root {\n        flex-grow: 1;\n        margin-right: ${p => p.theme.spacing(1)}px;\n    }\n`;\n\n// Reusable?\ninterface CardSearchFilter {\n    /** Array of selected colors inside advanced search */\n    colors: {\n        r: boolean; // Red\n        g: boolean; // Green\n        u: boolean; // Blue\n        b: boolean; // Black\n        w: boolean; // White\n    };\n    /** Checkbox whether the search should match exact colors */\n    colorExactMatch: boolean;\n\n    /** Converted Mana Cost */\n    cmc: number;\n    /** Type: equal [=], less than [<], more than [>] */\n    cmcType: string;\n\n    // type: string;\n    // subtype: string;\n\n    // legality: string;\n}\n\nconst initCardSearchFilter = (): CardSearchFilter => {\n    return {\n        colors: { r: false, g: false, u: false, b: false, w: false },\n        colorExactMatch: false,\n        cmc: 0,\n        cmcType: \"=\",\n    };\n};\n\nconst CardSearch: React.FC = () => {\n    // Card name & autocomplete structures\n    const [cardName, setCardName] = React.useState<string>(\"\");\n    const [autoompleteOptions, setAutocompleteOptions] = React.useState<string[]>([]);\n\n    const updateAutoComplete = (name: string) => {\n        setCardName(name);\n        Scry.Cards.Autocomplete(cardName).then(names => setAutocompleteOptions(names));\n    };\n\n    const performSearch = () => {\n        alert(JSON.stringify(filter));\n    };\n\n    // Advanced Filters Dialog structures\n    const [dialogOpen, setDialogOpen] = React.useState<boolean>(false);\n    const openDialog = () => setDialogOpen(true);\n    const closeDialog = () => setDialogOpen(false);\n\n    // Filter structures\n    const [filter, setFilter] = React.useState<CardSearchFilter>(initCardSearchFilter());\n\n    const resetFilter = () => setFilter(initCardSearchFilter());\n    const handleColors = (color: \"r\" | \"g\" | \"u\" | \"b\" | \"w\") => (event: React.ChangeEvent<HTMLInputElement>) => {\n        const newFilter = { ...filter };\n        newFilter.colors[color] = event.target.checked;\n        setFilter(newFilter);\n    };\n\n    return (\n        <Grid item xs={12} md>\n            <AppletPaper>\n                <Title>Card search</Title>\n\n                <FlexCol>\n                    <PreviewRow>\n                        <Autocomplete\n                            freeSolo\n                            autoHighlight\n                            disableClearable\n                            options={autoompleteOptions}\n                            inputValue={cardName}\n                            onInputChange={(e, value) => updateAutoComplete(value)}\n                            renderInput={params => <TextField {...params} label=\"Card name\" variant=\"outlined\" fullWidth />}\n                        />\n                    </PreviewRow>\n                </FlexCol>\n\n                <Dialog open={dialogOpen} onClose={closeDialog} aria-labelledby=\"advanced-card-search-dialog\" maxWidth=\"md\" fullWidth>\n                    <DialogTitle id=\"advanced-card-search-dialog\">Advanced card search</DialogTitle>\n                    <DialogContent>\n                        <Typography variant=\"subtitle2\">Filter by color</Typography>\n                        <FormGroup row>\n                            <FormControlLabel\n                                label={<SymbolTypography text=\"{R} Red\" />}\n                                control={<Checkbox checked={filter.colors.r} onChange={handleColors(\"r\")} />}\n                            />\n                            <FormControlLabel\n                                label={<SymbolTypography text=\"{G} Green\" />}\n                                control={<Checkbox checked={filter.colors.g} onChange={handleColors(\"g\")} />}\n                            />\n                            <FormControlLabel\n                                label={<SymbolTypography text=\"{U} Blue\" />}\n                                control={<Checkbox checked={filter.colors.u} onChange={handleColors(\"u\")} />}\n                            />\n                            <FormControlLabel\n                                label={<SymbolTypography text=\"{B} Black\" />}\n                                control={<Checkbox checked={filter.colors.b} onChange={handleColors(\"b\")} />}\n                            />\n                            <FormControlLabel\n                                label={<SymbolTypography text=\"{W} White\" />}\n                                control={<Checkbox checked={filter.colors.w} onChange={handleColors(\"w\")} />}\n                            />\n                        </FormGroup>\n\n                        <FormControlLabel\n                            label=\"Exact color match?\"\n                            control={<Checkbox checked={filter.colorExactMatch} onChange={e => setFilter({ ...filter, colorExactMatch: e.target.checked })} />}\n                        />\n\n                        {/* <br />\n\n                        <ul>\n                            <li>[DONE] Filter by color identity (only selected colors or all cards with selected colors)</li>\n                            <li>Filter by converted mana cost (equal, less than, more than)</li>\n                            <li>Filter by type/subtype (restrict subtype options based on type)</li>\n                            <li>Filter by format legality (choose one)</li>\n                        </ul> */}\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={resetFilter} color=\"primary\">\n                            Reset\n                        </Button>\n                        <Button onClick={closeDialog} color=\"primary\">\n                            OK\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n\n                <AppletActions>\n                    <Tooltip title=\"Advanced search filter\">\n                        <Button onClick={openDialog}>\n                            <FilterListIcon />\n                        </Button>\n                    </Tooltip>\n                    <Tooltip title=\"Search for results\">\n                        <Button onClick={performSearch}>\n                            <SearchIcon />\n                        </Button>\n                    </Tooltip>\n                </AppletActions>\n            </AppletPaper>\n        </Grid>\n    );\n};\n\nexport default CardSearch;\n","import { Grid } from \"@material-ui/core\";\nimport React from \"react\";\nimport { AppletPaper, Title } from \"../Styled/Grid\";\n\nconst UserInfo: React.FC = () => {\n    return (\n        <Grid item xs={12} sm md>\n            <AppletPaper>\n                <Title>User info</Title>\n                UserInfo paceholder.\n            </AppletPaper>\n        </Grid>\n    );\n};\n\nexport default UserInfo;\n","import { Container, Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport AddDeck from \"./Applets/AddDeck\";\r\nimport DeckPreview from \"./Applets/DeckPreview\";\r\nimport CardSearch from \"./Applets/CardSearch\";\r\nimport UserInfo from \"./Applets/UserInfo\";\r\nimport { State } from \"../State\";\r\n\r\nconst Home: React.FC = () => {\r\n    const [state] = React.useContext(State);\r\n    return (\r\n        <Container maxWidth=\"xl\">\r\n            <Grid container spacing={3}>\r\n                <Grid item direction=\"row\" container spacing={3}>\r\n                    <UserInfo />\r\n                    <AddDeck />\r\n                </Grid>\r\n                <Grid item direction=\"row\" container spacing={3}>\r\n                    <CardSearch />\r\n                    {state.selectedDeck !== null && <DeckPreview deckName={state.selectedDeck} />}\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\n\r\nconst NotFound: React.FC = () => {\r\n    return <div>Not found</div>;\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\nimport { Button, Typography } from \"@material-ui/core\";\r\nimport { GoogleIcon } from \"./Styled/Icons\";\r\n\r\ntype Props = {\r\n    variant?: \"text\" | \"outlined\" | \"contained\";\r\n    onClick: () => void;\r\n};\r\n\r\nconst SignInButton: React.FC<Props> = ({ variant, onClick }: Props) => {\r\n    return (\r\n        <Button variant={variant} onClick={onClick} startIcon={<GoogleIcon />}>\r\n            <Typography noWrap>Sign in with Google</Typography>\r\n        </Button>\r\n    );\r\n};\r\n\r\nexport default SignInButton;\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport Logo from \"../Assets/logo.png\";\r\nimport GoogleApi from \"../Utility/GoogleApi\";\r\nimport SignInButton from \"./SignInButton\";\r\n\r\nconst SignIn: React.FC = () => {\r\n    return (\r\n        <>\r\n            <Grid container justify=\"center\" alignItems=\"center\" style={{ padding: 25 }}>\r\n                <img src={Logo} alt=\"\" width=\"150px\" height=\"150px\" draggable={false} />\r\n            </Grid>\r\n            <Grid container justify=\"center\" alignItems=\"center\">\r\n                <SignInButton variant=\"contained\" onClick={GoogleApi.signIn} />\r\n            </Grid>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SignIn;\r\n","import { AppBar, Avatar, Divider, Drawer, IconButton, Toolbar, Tooltip, Typography } from \"@material-ui/core\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport React from \"react\";\nimport { BrowserRouter, Redirect, Route, Switch } from \"react-router-dom\";\nimport { isNullOrUndefined } from \"util\";\nimport { initialState, State } from \"../State\";\nimport { reducer } from \"../State/Reducers\";\nimport GoogleApi, { GoogleProfile } from \"../Utility/GoogleApi\";\nimport Scry from \"../Utility/Scry\";\nimport useEventListener from \"../Utility/useEventListener\";\nimport DrawerDeckList from \"./DrawerDeckList\";\nimport Home from \"./Home\";\nimport NotFound from \"./NotFound\";\nimport SignIn from \"./SignIn\";\nimport SignInButton from \"./SignInButton\";\nimport { FlexCol } from \"./Styled/Grid\";\nimport styled, { ComponentProps, css, MainTheme } from \"./Styled/Theme\";\nimport TooltipButton from \"./Styled/TooltipButton\";\nimport Axios from \"axios\";\nimport { ScryCardSymbol, ScrySet } from \"../Utility/Scry/Types\";\n\nconst bodyOpen = css<ComponentProps<any>>`\n    margin-left: ${p => p.theme.constants.drawerWidth};\n    width: calc(100% - ${p => p.theme.constants.drawerWidth});\n    transition: ${p =>\n        p.theme.transitions.create([\"width\", \"margin\"], {\n            easing: p.theme.transitions.easing.sharp,\n            duration: p.theme.transitions.duration.enteringScreen,\n        })};\n`;\n\nconst bodyClose = css<ComponentProps<any>>`\n    transition: ${p =>\n        p.theme.transitions.create([\"width\", \"margin\"], {\n            easing: p.theme.transitions.easing.sharp,\n            duration: p.theme.transitions.duration.leavingScreen,\n        })};\n`;\n\nconst CustomAppBar = styled(AppBar)<{ open: boolean }>`\n    z-index: ${p => p.theme.zIndex.drawer + 1};\n    ${bodyClose}\n    ${p => p.open && bodyOpen}\n`;\n\nconst MenuButton = styled(IconButton)<{ open: boolean }>`\n    margin-right: 36px;\n    ${p =>\n        p.open &&\n        css`\n            display: none;\n        `}\n`;\n\nconst drawerOpen = css<ComponentProps<any>>`\n    width: ${p => p.theme.constants.drawerWidth};\n    transition: ${p =>\n        p.theme.transitions.create(\"width\", {\n            easing: p.theme.transitions.easing.sharp,\n            duration: p.theme.transitions.duration.enteringScreen,\n        })};\n`;\n\nconst drawerClose = css<ComponentProps<any>>`\n    transition: ${p =>\n        p.theme.transitions.create(\"width\", {\n            easing: p.theme.transitions.easing.sharp,\n            duration: p.theme.transitions.duration.leavingScreen,\n        })};\n    overflow-x: hidden;\n    width: ${p => p.theme.constants.drawerWidthClosed};\n`;\n\nconst CustomDrawer = styled(Drawer).attrs(() => ({\n    variant: \"permanent\",\n}))<{ open?: boolean }>`\n    width: ${p => p.theme.constants.drawerWidth};\n    flex-shrink: 0;\n    white-space: nowrap;\n    ${p => (p.open ? drawerOpen : drawerClose)}\n\n    .MuiDrawer-paper {\n        ${p => (p.open ? drawerOpen : drawerClose)}\n    }\n`;\n\nconst DrawerToolbar = styled(Toolbar)`\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    padding: ${p => p.theme.spacing(0, 1)}px;\n`;\n\nconst MainContent = styled.div<{ open: boolean }>`\n    flex-grow: 1;\n    padding: ${p => p.theme.spacing(3)}px;\n    margin-left: ${p => p.theme.constants.drawerWidthClosed};\n    ${bodyClose}\n    ${p => p.open && bodyOpen}\n`;\n\nconst ProfileAvatar = styled.div`\n    margin-right: ${p => p.theme.spacing(1)}px;\n`;\n\nconst App: React.FC = () => {\n    const [state, dispatch] = React.useReducer(reducer, initialState);\n\n    const [profile, setProfile] = React.useState<GoogleProfile>();\n    const [isSignedIn, setIsSignedIn] = React.useState(false);\n\n    const handleSignoutClick = () => {\n        GoogleApi.signOut();\n        setProfile(undefined);\n    };\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleDrawerOpen = () => setOpen(true);\n    const handleDrawerClose = () => setOpen(false);\n\n    useEventListener(\"keydown\", e => {\n        if (e.key === \"Shift\" && !state.modifierKeys.shift) dispatch({ type: \"SetModifierKey\", key: \"shift\", value: true });\n    });\n    useEventListener(\"keyup\", e => {\n        if (e.key === \"Shift\" && state.modifierKeys.shift) dispatch({ type: \"SetModifierKey\", key: \"shift\", value: false });\n    });\n\n    /**\n     * Called at app init, sets Google API signin callback\n     * info stored in React profile state\n     */\n    React.useEffect(() => {\n        GoogleApi.initClient(async (isSignedIn: boolean) => {\n            setIsSignedIn(isSignedIn);\n            if (!isSignedIn) {\n                return;\n            }\n            setProfile(GoogleApi.getProfile());\n            GoogleApi.prepareAppData()(dispatch);\n        });\n        Scry.Symbology.All()\n            .then(symbols => {\n                const endpoint = Axios.create({\n                    baseURL: \"\",\n                    responseType: \"text\",\n                    headers: {\n                        \"Content-Type\": \"image/svg+xml\",\n                    },\n                });\n                return Promise.all(\n                    symbols.map(symbol => endpoint.get<string>(symbol.svg_uri, { data: symbol }))\n                );\n            })\n            .then(responses => {\n                dispatch({\n                    type: \"AddSymbols\",\n                    symbols: responses.map(\n                        response =>\n                            ({\n                                ...JSON.parse(response.config.data),\n                                svg: response.data,\n                            } as ScryCardSymbol)\n                    ),\n                });\n            })\n            .then(Scry.Sets.All)\n            .then(sets => {\n                const endpoint = Axios.create({\n                    baseURL: \"\",\n                    responseType: \"text\",\n                    headers: {\n                        \"Content-Type\": \"image/svg+xml\",\n                    },\n                });\n                return Promise.all(\n                    sets.map(set => endpoint.get<string>(set.icon_svg_uri, { data: set }))\n                );\n            })\n            .then(responses => {\n                dispatch({\n                    type: \"AddSets\",\n                    sets: responses.map(\n                        response =>\n                            ({\n                                ...JSON.parse(response.config.data),\n                                icon_svg: response.data,\n                            } as ScrySet)\n                    ),\n                });\n            });\n    }, []);\n\n    return (\n        <State.Provider value={[state, dispatch]}>\n            <CustomAppBar position=\"sticky\" open={open}>\n                <Toolbar>\n                    <MenuButton color=\"inherit\" aria-label=\"open drawer\" onClick={handleDrawerOpen} edge=\"start\" open={open}>\n                        <MenuIcon />\n                    </MenuButton>\n                    <Typography variant=\"h6\">MTGCollection</Typography>\n                    <Typography>Shift: {state.modifierKeys.shift.toString()}</Typography>\n                    <FlexCol />\n                    {isSignedIn ? (\n                        <>\n                            {!isNullOrUndefined(profile) && (\n                                <ProfileAvatar>\n                                    <Tooltip title={`Signed in as ${profile.getGivenName()} (${profile.getEmail()})`}>\n                                        <Avatar alt={profile.getGivenName()} src={profile.getImageUrl()} />\n                                    </Tooltip>\n                                </ProfileAvatar>\n                            )}\n                            <TooltipButton title=\"SignOut\" onClick={handleSignoutClick}>\n                                <ExitToAppIcon />\n                            </TooltipButton>\n                        </>\n                    ) : (\n                        <SignInButton onClick={GoogleApi.signIn} />\n                    )}\n                </Toolbar>\n            </CustomAppBar>\n            <CustomDrawer open={open}>\n                <DrawerToolbar>\n                    <IconButton onClick={handleDrawerClose}>{MainTheme.direction === \"rtl\" ? <ChevronRightIcon /> : <ChevronLeftIcon />}</IconButton>\n                </DrawerToolbar>\n                <Divider />\n                <DrawerDeckList open={open} />\n            </CustomDrawer>\n            <MainContent open={open}>\n                <BrowserRouter basename={process.env.PUBLIC_URL}>\n                    <Redirect to={isSignedIn ? \"/\" : \"/signin/\"} />\n                    <Switch>\n                        <Route exact path=\"/\" component={Home} />\n                        <Route exact path=\"/signin/\" component={SignIn} />\n                        <Route component={NotFound} />\n                    </Switch>\n                </BrowserRouter>\n            </MainContent>\n        </State.Provider>\n    );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === \"localhost\" ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === \"[::1]\" ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL((process as { env: { [key: string]: string } }).env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener(\"load\", () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === \"installed\") {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log(\"Content is cached for offline use.\");\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error(\"Error during service worker registration:\", error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get(\"content-type\");\n            if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\"No internet connection found. App is running in offline mode.\");\n        });\n}\n\nexport function unregister() {\n    if (\"serviceWorker\" in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n","import { CssBaseline } from \"@material-ui/core\";\nimport { ThemeProvider as MUIThemeProvider, StylesProvider } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ThemeProvider } from \"styled-components\";\nimport App from \"./Components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { MainTheme } from \"./Components/Styled/Theme\";\n\nReactDOM.render(\n    <StylesProvider injectFirst>\n        <ThemeProvider theme={MainTheme}>\n            <MUIThemeProvider theme={MainTheme}>\n                <CssBaseline />\n                <App />\n            </MUIThemeProvider>\n        </ThemeProvider>\n    </StylesProvider>,\n    document.getElementById(\"root\")\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}