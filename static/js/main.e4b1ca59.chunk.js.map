{"version":3,"sources":["Assets/logo.png","State/index.ts","Components/NotFound.tsx","Utility/index.ts","Utility/Scry/index.ts","State/Thunks.ts","Utility/CollectionParser.ts","Utility/GoogleApi.ts","Utility/useThunk.ts","Components/Styled/CardNameAutocomplete.tsx","Components/Styled/Theme.ts","Components/Styled/Grid.tsx","Components/Applets/AddDeck.tsx","Components/Loading.tsx","Utility/Assert.ts","Utility/useCardAction.ts","Components/Styled/IncrementNumber.tsx","Components/Styled/SymbolIcon.tsx","Components/Styled/SymbolTypography.tsx","Components/Previews/CompressedCard.tsx","Components/Styled/IndentedTypography.tsx","Components/Previews/CompressedCollection.tsx","Components/Styled/TooltipButton.tsx","Components/Previews/ActionButtons/WishlistButton.tsx","Components/Previews/ActionButtons/ChangeSectionButton.tsx","Components/Previews/ActionButtons/DeleteButton.tsx","Assets/scryfallLogo.svg","Components/Previews/ActionButtons/OpenScryfallButton.tsx","Components/Previews/ActionButtons/CardActions.tsx","Components/Previews/ImagesCard.tsx","Components/Previews/ImagesCollection.tsx","Components/Styled/SetIcon.tsx","Components/Previews/ListCard.tsx","Components/Previews/ListCollection.tsx","Components/Previews/CollectionPreview.tsx","Components/Previews/Common/PreviewStyleToggle.tsx","Components/Previews/Common/ShowGroupsToggle.tsx","Components/Previews/Common/SortToggle.tsx","Components/Styled/Icons.tsx","Components/Applets/DeckPreview.tsx","Components/Applets/CardSearch.tsx","Components/Applets/DeckBox.tsx","Components/Applets/DeckList.tsx","Components/Applets/Home.tsx","State/Lifecounter/index.ts","State/Lifecounter/Reducers.ts","Utility/useDimensions.ts","Components/Applets/Lifecounter/PlayerCard.tsx","Components/Applets/Lifecounter/LifecounterDialog.tsx","Components/Applets/Lifecounter/PlayerSettings.tsx","Components/Applets/Lifecounter/index.tsx","Components/Applets/UserInfo.tsx","Components/SignInButton.tsx","Routes/Routes.ts","Components/SignIn.tsx","Routes/AppRouter.tsx","State/Reducers.ts","Utility/useClickaway.ts","Components/Drawer/DrawerSubtitle.tsx","Components/Drawer/DrawerApps.tsx","Components/Drawer/DeckAvatar.tsx","Components/Drawer/DrawerDeckList.tsx","Components/Drawer/MobileNavigation.tsx","Components/App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","DeckName","NotFound","SectionName","getDeckName","name","Collection","Wishlist","EmptyCards","sections","reduce","obj","s","Default","initialState","files","decks","cards","cardList","symbolList","setList","selectedDeck","AppState","React","createContext","undefined","LoginState","signOut","Arr","v","i","self","indexOf","combineReducers","reducers","state","action","temp","PxFromAvatarSize","size","Api","endpoint","Axios","create","baseURL","responseType","headers","Symbology","All","get","then","r","data","ParseMana","cost","params","Cards","Autocomplete","q","include_extras","Named","fuzzy","length","Promise","resolve","all","ArrayChunk","arr","n","slice","concat","map","identifiers","post","flatMap","Sets","Scry","getImage","card","type","images","layout","card_faces","image_uris","getPlaceholder","cardName","replace","getColorIdentity","filter","c","color_identity","join","downloadCards","dispatch","deck","missingCards","Object","values","prev","val","CollectionParser","serialize","collection","split","section","index","lines","line","match","isNull","amount","parseInt","comment","p","deserialize","entries","str","GoogleApiInit","apiKey","process","clientId","discoveryDocs","scope","createNewFile","a","async","props","fileContent","folder","file","Blob","metadata","mimeType","appProperties","parents","accessToken","gapi","auth","getToken","access_token","form","FormData","append","JSON","stringify","fetch","method","Headers","Authorization","body","res","json","id","deleteFile","client","drive","delete","fileId","createNewDeck","restProps","Sideboard","Maybeboard","isDirty","link","downloadDeck","GoogleApi","getFileContents","previewUrl","initClient","onUpdateStatus","load","init","auth2","getAuthInstance","isSignedIn","listen","console","error","getProfile","currentUser","getBasicProfile","signIn","prepareAppData","list","spaces","fields","response","collectionFile","result","find","f","info","wishlistFile","otherFiles","updateFile","deleteDeck","alt","useThunk","context","func","useContext","CardNameAutocomplete","label","onNameSelect","useState","value","setValue","open","setOpen","options","setOptions","isLoading","setIsLoading","typingTimer","setTypingTimer","onChange","newValue","useEffect","style","width","onOpen","onClose","_","onInputChange","e","reason","clearTimeout","setTimeout","names","toLowerCase","includes","loading","renderInput","TextField","fullWidth","variant","InputProps","endAdornment","Fragment","CircularProgress","color","MainTheme","createMuiTheme","palette","primary","main","colors","deepOrange","secondary","blueGrey","constants","drawerWidth","drawerWidthClosed","appletHeight","css","ThemeProv","styledCss","styled","baseStyled","FlexCol","div","AppletContent","Paper","theme","spacing","breakpoints","down","AppletActions","Title","Typography","attrs","component","gutterBottom","DrawerAvatar","Avatar","background","paper","text","PreviewRow","AddDeck","history","useHistory","importText","setImportText","deckName","setDeckName","invalidName","setInvalidName","setPreviewUrl","handleClose","handleImport","push","encodeURIComponent","validateName","helperText","target","src","ButtonGroup","Button","disabled","onClick","Dialog","aria-labelledby","maxWidth","DialogTitle","DialogContent","DialogContentText","autoFocus","multiline","rows","DialogActions","Body","MarginedTypography","Loading","assert","condition","message","AssertionError","useCardActions","sectionName","targetDeck","isOnWishlist","keys","updateCardQuantity","isNullOrUndefined","openScryfallPage","scryfall_uri","window","openScryfallSetPage","scryfall_set_uri","toggleWishlist","wishlistTooltip","removeCard","changeSection","newSection","addToDeck","StyledAvatar","className","grey","Arrows","IconButton","IncrementNumber","anchorEl","setAnchorEl","onIncrement","incr","stopPropagation","title","currentTarget","Popper","ClickAwayListener","onClickAway","Symbol","svg","SymbolIcon","symbol","symbolObj","setSymbolObj","loose_variant","dangerouslySetInnerHTML","__html","SymbolTypography","typographyProps","parsed","setParsed","m","key","CustomChip","Chip","CompressedCard","deleteIcon","mana_cost","noWrap","avatar","onDelete","IndentedTypography","CompressedCollecion","sortBy","sortOrder","showGroups","Grid","container","direction","item","xs","zeroMinWidth","StyledIconButton","darken","dark","TooltipButton","children","Tooltip","aria-label","WishlistButton","actions","ChangeSectionButton","anchorRef","useRef","event","current","contains","ref","prevOpen","role","transition","TransitionProps","placement","Grow","transformOrigin","elevation","MenuList","MenuItem","DeleteButton","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","transform","fill","fillRule","cx","cy","d","_ref","svgRef","focusable","height","viewBox","ForwardRef","forwardRef","OpenScryfallButton","CardActions","Image","img","Actions","StyledIncrement","default","ImagesCard","ImagesCollecion","alignItems","sm","lg","xl","Set","rarity","SetIcon","set","setObj","setSetObj","offset","stopColor","gradientTransform","icon_svg","StyledRow","TableRow","ActionsMenu","ListCard","actionsOpen","setActionsOpen","SetWidthCell","align","NameCell","Link","href","TableCell","position","CustomPaddingTable","Table","ListCollecion","TableHead","TableBody","colSpan","desc","b","orderBy","getSorting","order","StableSort","array","cmp","stabilizedThis","el","sort","rarityOrder","GetSortFunction","CollectionPreview","passedProps","omit","renderCollection","PreviewStyleToggle","onToggle","Error","IconForStyle","ShowGroupsToggle","show","setShow","SortToggle","setSortBy","setSortOrder","startIcon","by","selected","IconWrap","CompressIcon","icon","faCompressAlt","ExpandIcon","faExpandAlt","GoogleIcon","faGoogle","ClipboardIcon","faClipboard","LifecounterIcon","faDiceD20","SectionRow","scrollable","ExportRow","AppletBackground","fade","DeckPreview","useParams","decodeURIComponent","expanded","setExpanded","exportOpened","setExportOpened","setStyle","setShowGroups","justify","copy","readOnly","CardSearch","setCardName","autoompleteOptions","setAutocompleteOptions","dialogOpen","setDialogOpen","closeDialog","R","G","U","B","W","colorExactMatch","cmc","cmcType","setFilter","handleColors","newFilter","checked","freeSolo","autoHighlight","disableClearable","inputValue","FormGroup","row","FormControlLabel","control","Checkbox","alert","DeckBoxBody","DeckBoxAvatar","DeckBoxTitle","DeckColorIdentity","LargeIcon","LargeFavoriteIcon","FavoriteIcon","LargeCollectionsIcon","CollectionsIcon","LargeAddCircleOutlineIcon","AddCircleOutlineIcon","DeckBox","to","DeckList","Home","instantiatePlayers","count","Array","from","life","counters","Counters","args","MakeTuple","players","startingLife","startingPlayer","LifecounterState","reducer","curr","chainReducers","player","counter","mapValues","useDimensions","setWidth","setHeight","clientWidth","clientHeight","Wrapper","flexBasis","Flex","rotate","Math","abs","h","w","Counter","IncrementButton","CounterBackground","DebouncedValue","tight","StartingPlayerOverlay","PlayerTransforms","2","3","4","5","6","PlayerCard","activeCounter","setActiveCounter","debouncedValue","setDebouncedValue","activeValue","activeDiff","debouncedSet","useCallback","debounce","setCounter","isMobile","useMediaQuery","valueTextVariant","useMemo","flexGrow","flexDirection","justifyContent","Fade","in","py","mx","OptionsButton","LifecounterDialog","optionsOpen","setOptionsOpen","noSleep","NoSleep","disable","handleOptionsClose","setStartingPlayer","round","random","restartGame","enable","fullScreen","flexWrap","SymbolButton","CenteredTextField","PlayerSettings","toggleCounter","my","pb","SliderLabel","SliderValue","Lifecounter","useReducer","playersCount","setPlayersCount","Provider","Slider","onChangeCommitted","step","min","max","marks","valueLabelDisplay","StyledTitle","ContainedDeleteButton","light","UserInfo","forEach","SignInButton","Public","path","Routes","IsPublic","route","some","RegExp","PathMatch","SignIn","padding","Logo","draggable","Private","AppRouter","exact","keyBy","symbols","sets","code","useClickaway","onClickaway","elemRef","createRef","handleClickaway","document","addEventListener","removeEventListener","DrawerSubtitle","StyledItemText","ListItemText","DrawerApps","closeDrawer","pathname","useLocation","List","ListItem","button","ListItemAvatar","DeckAvatar","Badge","invisible","overlap","badgeContent","anchorOrigin","vertical","horizontal","DrawerDeckList","renderItem","Divider","StyledNavigation","BottomNavigation","DeckAction","BottomNavigationAction","DeckIcon","MobileNavigation","toggleOpen","tab","showLabels","bodyOpen","transitions","easing","sharp","duration","enteringScreen","bodyClose","leavingScreen","CustomAppBar","AppBar","zIndex","drawer","MenuButton","drawerOpen","drawerClose","CustomDrawer","Drawer","DrawerToolbar","Toolbar","DrawerBody","NoGutterContainer","Container","MainContent","ProfileAvatar","App","isSmall","profile","setProfile","setIsSignedIn","handleSignoutClick","handleDrawerToggle","drawerRef","signedIn","redirect","location","svg_uri","transformResponse","responses","icon_svg_uri","edge","overflow","underline","getGivenName","getEmail","getImageUrl","anchor","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","catch","ReactDOM","render","basename","StylesProvider","injectFirst","CssBaseline","getElementById","URL","origin","contentType","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.e4b1ca59.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.81aa9e7e.png\";","import React from \"react\";\r\nimport DeepReadonly from \"../Utility/DeepReadonly\";\r\nimport { ScryCard, ScryCardSymbol, ScrySet } from \"../Utility/Scry/Types\";\r\nimport { Action } from \"./Actions\";\r\nimport { GoogleProfile } from \"../Utility/GoogleApi\";\r\n\r\nexport enum DeckName {\r\n    Collection = \"_collection\",\r\n    Wishlist = \"_wishlist\",\r\n}\r\n\r\nexport const getDeckName = (name: string) => {\r\n    if (name === DeckName.Collection) return \"Collection\";\r\n    if (name === DeckName.Wishlist) return \"Wishlist\";\r\n    return name;\r\n};\r\n\r\nexport enum SectionName {\r\n    Default = \"_default\",\r\n    Sideboard = \"Sideboard\",\r\n    Maybeboard = \"Maybeboard\",\r\n}\r\n\r\nexport const EmptyCards = (...sections: string[]): DeckCards => sections.reduce((obj, s) => ({ ...obj, [s]: {} }), { [SectionName.Default]: {} });\r\n\r\nexport type DeckCardList = DeepReadonly<{\r\n    [cardName: string]: DeckCard;\r\n}>;\r\n\r\nexport type DeckCards = DeepReadonly<{\r\n    [SectionName.Default]: DeckCardList;\r\n    [section: string]: DeckCardList;\r\n}>;\r\n\r\nexport type DeckCard = DeepReadonly<{\r\n    amount: number;\r\n    name: string;\r\n    comment?: string;\r\n}>;\r\n\r\nexport type DeckProps = Omit<Deck, \"cards\">;\r\n\r\nexport type Deck = DeepReadonly<{\r\n    name: string;\r\n    previewUrl?: string;\r\n    cards: DeckCards;\r\n    isDirty?: boolean;\r\n}>;\r\n\r\nexport type FileIds = DeepReadonly<{\r\n    [DeckName.Collection]: string;\r\n    [DeckName.Wishlist]: string;\r\n    [deckName: string]: string;\r\n}>;\r\n\r\nexport type Decks = DeepReadonly<{\r\n    [DeckName.Collection]: Deck;\r\n    [DeckName.Wishlist]: Deck;\r\n    [deckName: string]: Deck;\r\n}>;\r\n\r\nexport type CardList = DeepReadonly<{\r\n    [cardName: string]: ScryCard;\r\n}>;\r\n\r\nexport type SymbolList = DeepReadonly<{\r\n    [symbol: string]: ScryCardSymbol;\r\n}>;\r\n\r\nexport type SetList = DeepReadonly<{\r\n    [setName: string]: ScrySet;\r\n}>;\r\n\r\nexport type AppStateT = DeepReadonly<{\r\n    files: FileIds;\r\n    decks: Decks;\r\n    cardList: CardList;\r\n    symbolList: SymbolList;\r\n    setList: SetList;\r\n    selectedDeck: string;\r\n}>;\r\n\r\nexport const initialState: AppStateT = {\r\n    files: {\r\n        [DeckName.Collection]: \"\",\r\n        [DeckName.Wishlist]: \"\",\r\n    },\r\n    decks: {\r\n        [DeckName.Collection]: { name: DeckName.Collection, cards: EmptyCards() },\r\n        [DeckName.Wishlist]: { name: DeckName.Wishlist, cards: EmptyCards() },\r\n    },\r\n    cardList: {},\r\n    symbolList: {},\r\n    setList: {},\r\n    selectedDeck: DeckName.Collection,\r\n};\r\n\r\nexport const AppState = React.createContext<[AppStateT, React.Dispatch<Action>]>([initialState, undefined as any]);\r\n\r\nexport type LoginStateT = {\r\n    profile?: GoogleProfile;\r\n    signOut: () => void;\r\n};\r\n\r\nexport const LoginState = React.createContext<LoginStateT>({ signOut: () => {} });\r\n","import React from \"react\";\r\n\r\nconst NotFound: React.FC = () => {\r\n    return <div>Not found</div>;\r\n};\r\n\r\nexport default NotFound;\r\n","export const ArrayChunk = <T>(arr: T[], n: number): T[][] => (arr.length <= n ? [arr] : [arr.slice(0, n)].concat(ArrayChunk(arr.slice(n), n)));\r\n\r\nexport const Arr = {\r\n    Unique: <T>(v: T, i: number, self: T[]) => self.indexOf(v) === i,\r\n    NotNull: <T>(v: T) => v !== null && v !== undefined,\r\n};\r\n\r\nexport const MakeTuple = <T extends string[]>(...args: T) => args;\r\n\r\nexport const combineReducers = <State, Action>(reducers: { [P in keyof State]: (state: State[P], action: Action) => State[P] }) => {\r\n    return (state: State, action: Action) => {\r\n        const temp: State = {} as any;\r\n        for (const i in reducers) {\r\n            temp[i] = reducers[i](state[i], action);\r\n        }\r\n        return temp;\r\n    };\r\n};\r\n\r\nexport const chainReducers = <State, Action>(...reducers: ((state: State, action: Action) => State)[]) => {\r\n    return (state: State, action: Action) => {\r\n        return reducers.reduce((curr, reducer) => reducer(curr, action), state);\r\n    };\r\n};\r\n\r\nexport const PxFromAvatarSize = (size?: \"chip\" | \"inline\") => {\r\n    switch (size) {\r\n        case \"chip\":\r\n            return 9;\r\n        case \"inline\":\r\n            return 12;\r\n        case undefined:\r\n            return 24;\r\n    }\r\n};\r\n","import Axios from \"axios\";\r\nimport { Arr, ArrayChunk } from \"..\";\r\nimport DeepReadonly from \"../DeepReadonly\";\r\nimport { ScryCard, ScryCardIdentifier, ScryCardImageUris, ScryCardSymbol, ScryManaCost, ScrySet } from \"./Types\";\r\n\r\ntype List<T = any> = {\r\n    data: T[];\r\n};\r\n\r\nconst Api = (() => {\r\n    let endpoint = Axios.create({\r\n        baseURL: \"https://api.scryfall.com\",\r\n        responseType: \"json\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n    });\r\n\r\n    return {\r\n        endpoint,\r\n        Symbology: {\r\n            All: () => endpoint.get<List<ScryCardSymbol>>(\"/symbology\").then(r => r.data.data),\r\n            ParseMana: (cost: string) =>\r\n                endpoint\r\n                    .get<ScryManaCost>(\"/symbology/parse-mana\", { params: { cost } })\r\n                    .then(r => r.data),\r\n        },\r\n        Cards: {\r\n            Autocomplete: (q: string) =>\r\n                endpoint\r\n                    .get<List<string>>(\"/cards/autocomplete\", { params: { q, include_extras: true } })\r\n                    .then(r => r.data.data),\r\n            Named: (fuzzy: string) =>\r\n                endpoint\r\n                    .get<ScryCard>(\"/cards/named\", { params: { fuzzy } })\r\n                    .then(r => r.data),\r\n            Collection: (cards: ScryCardIdentifier[]) =>\r\n                (cards?.length ?? 0) <= 0\r\n                    ? Promise.resolve([])\r\n                    : Promise.all(\r\n                        ArrayChunk(cards, 75).map(identifiers => endpoint.post<List<ScryCard>>(\"/cards/collection\", { identifiers }))\r\n                    ).then(r => r.flatMap(v => v.data.data)),\r\n        },\r\n        Sets: {\r\n            All: () => endpoint.get<List<ScrySet>>(\"/sets\").then(r => r.data.data),\r\n        },\r\n    };\r\n})();\r\n\r\nconst getImage = (card: DeepReadonly<ScryCard>, type: keyof ScryCardImageUris): string | null => {\r\n    let images: ScryCardImageUris | null | undefined;\r\n    switch (card.layout) {\r\n        case \"transform\":\r\n        case \"double_faced_token\":\r\n            images = card.card_faces![0].image_uris;\r\n            break;\r\n        default:\r\n            images = card.image_uris;\r\n    }\r\n    return images?.[type] ?? null;\r\n};\r\n\r\nconst getPlaceholder = (cardName: string): string => `https://via.placeholder.com/146x204?text=${cardName.replace(/\\s/, \"+\")}`;\r\n\r\nconst getColorIdentity = (...cards: DeepReadonly<ScryCard>[]): string =>\r\n    cards\r\n        .filter(Arr.NotNull)\r\n        .flatMap(c => c.color_identity)\r\n        .filter(Arr.Unique)\r\n        .map(c => `{${c}}`)\r\n        .join(\"\");\r\n\r\nconst Scry = {\r\n    ...Api,\r\n    getImage,\r\n    getPlaceholder,\r\n    getColorIdentity,\r\n};\r\nexport default Scry;\r\n","import React from \"react\";\r\nimport { AppStateT, Deck, DeckCard } from \".\";\r\nimport Scry from \"../Utility/Scry\";\r\nimport { Action } from \"./Actions\";\r\n\r\nexport const downloadCards = (dispatch: React.Dispatch<Action>, state: AppStateT) => (deck: Deck) => {\r\n    const missingCards = Object.values(deck?.cards ?? {})\r\n        .reduce((prev, val) => [...prev, ...Object.values(val)], [] as DeckCard[])\r\n        .filter(card => !state.cardList[card.name]);\r\n    Scry.Cards.Collection(missingCards.map(card => ({ name: card.name }))).then(cards => dispatch({ type: \"AddCards\", cards }));\r\n};\r\n","import { isNull } from \"lodash\";\r\nimport { DeckCard, DeckCards, EmptyCards, SectionName } from \"../State\";\r\n\r\nconst serialize = (collection?: string, ...sections: string[]): DeckCards => {\r\n    if (!collection || collection === \"\") {\r\n        return EmptyCards(...sections);\r\n    }\r\n    return collection\r\n        .split(\"##\")\r\n        .map((section, index) => {\r\n            let name: string, lines: string[];\r\n            if (index === 0) {\r\n                name = SectionName.Default;\r\n                lines = section.split(/\\r?\\n/);\r\n            } else {\r\n                [name, ...lines] = section.split(/\\r?\\n/);\r\n            }\r\n            return [\r\n                name,\r\n                lines\r\n                    .map(line => line.match(/^(\\d*) +(.*?)(?: # (.*))?$/))\r\n                    .filter(match => !isNull(match))\r\n                    .map(match => ({\r\n                        amount: parseInt(match![1]),\r\n                        name: match![2],\r\n                        comment: match![3],\r\n                    })),\r\n            ] as [string, DeckCard[]];\r\n        })\r\n        .reduce(\r\n            (prev, val) => ({ ...prev, [val[0]]: val[1].reduce((p, v) => ({ ...p, [v.name]: v }), {}) }),\r\n            EmptyCards(...sections)\r\n        );\r\n};\r\n\r\nconst deserialize = (deck: DeckCards) =>\r\n    Object.entries(deck).reduce(\r\n        (str, section) =>\r\n            `${str}${section[0] !== SectionName.Default ? `#${section[0]}\\n` : \"\"}${Object.values(section[1]).reduce(\r\n                (s, card) => `${s}${card.amount} ${card.name}${card.comment ? ` # ${card.comment}` : \"\"}\\n`,\r\n                \"\"\r\n            )}\\n`,\r\n        \"\"\r\n    );\r\n\r\nconst CollectionParser = {\r\n    serialize,\r\n    deserialize,\r\n};\r\n\r\nexport default CollectionParser;\r\n","/* global gapi */\r\nimport React from \"react\";\r\nimport { AppStateT, Deck, DeckName, DeckProps, SectionName } from \"../State\";\r\nimport { Action } from \"../State/Actions\";\r\nimport { downloadCards } from \"../State/Thunks\";\r\nimport CollectionParser from \"./CollectionParser\";\r\n\r\nconst GoogleApiInit = {\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    clientId: process.env.REACT_APP_CLIENT_ID,\r\n    discoveryDocs: [\"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"],\r\n    scope: \"profile https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file\",\r\n};\r\n\r\nconst initClient = (onUpdateStatus: (isSignedIn: boolean) => void) => {\r\n    gapi.load(\"client:auth2\", () => {\r\n        gapi.client.init(GoogleApiInit).then(() => {\r\n            gapi.auth2.getAuthInstance().isSignedIn.listen(onUpdateStatus);\r\n            onUpdateStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\r\n        }, console.error);\r\n    });\r\n};\r\n\r\nconst prepareAppData = (dispatch: React.Dispatch<Action>, state: AppStateT) => async () => {\r\n    var response = await gapi.client.drive.files.list({\r\n        spaces: \"appDataFolder\",\r\n        fields: \"nextPageToken, files(id, name, appProperties)\",\r\n    });\r\n\r\n    const collectionFile = response.result?.files?.find(f => f.appProperties?.name === DeckName.Collection);\r\n    if (!collectionFile) {\r\n        console.info(\"Creating collection...\");\r\n        await createNewDeck(dispatch, state)({ name: DeckName.Collection });\r\n    } else {\r\n        console.info(\"Loading collection...\");\r\n        await downloadDeck(dispatch, state)(DeckName.Collection, collectionFile);\r\n    }\r\n\r\n    const wishlistFile = response.result?.files?.find(f => f.appProperties?.name === DeckName.Wishlist);\r\n    if (!wishlistFile) {\r\n        console.info(\"Creating wishlist...\");\r\n        await createNewDeck(dispatch, state)({ name: DeckName.Wishlist });\r\n    } else {\r\n        console.info(\"Loading wishlist...\");\r\n        await downloadDeck(dispatch, state)(DeckName.Wishlist, wishlistFile);\r\n    }\r\n\r\n    const otherFiles = response.result?.files?.filter(f => f.appProperties?.name !== DeckName.Collection && f.appProperties?.name !== DeckName.Wishlist)!;\r\n    for (let i = 0; i < otherFiles.length; i++) {\r\n        const file = otherFiles[i];\r\n        const name = file.appProperties?.name ?? file.name?.match(/(.*?)\\.txt/)?.[0] ?? \"unnamed\";\r\n        downloadDeck(dispatch, state)(name, file);\r\n    }\r\n};\r\n\r\nconst createNewFile = async ({\r\n    name,\r\n    props,\r\n    fileContent,\r\n    folder,\r\n}: {\r\n    name: string;\r\n    props?: object;\r\n    fileContent?: string;\r\n    folder?: string[];\r\n}): Promise<string> => {\r\n    const file = new Blob([fileContent ?? \"\"], { type: \"text/plain\" });\r\n    const metadata = {\r\n        name,\r\n        mimeType: \"text/plain\",\r\n        appProperties: props ?? {},\r\n        parents: [\"appDataFolder\", ...(folder ?? [])],\r\n    };\r\n\r\n    const accessToken = gapi.auth.getToken().access_token;\r\n    const form = new FormData();\r\n    form.append(\"metadata\", new Blob([JSON.stringify(metadata)], { type: \"application/json\" }));\r\n    form.append(\"file\", file);\r\n\r\n    const res = await fetch(\"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id\", {\r\n        method: \"POST\",\r\n        headers: new Headers({ Authorization: \"Bearer \" + accessToken }),\r\n        body: form,\r\n    });\r\n    const val = await res.json();\r\n    return val.id;\r\n};\r\n\r\nconst updateFile = async ({ id, fileContent }: { id: string; fileContent: string }) => {\r\n    const file = new Blob([fileContent], { type: \"text/plain\" });\r\n\r\n    const accessToken = gapi.auth.getToken().access_token;\r\n    const form = new FormData();\r\n    form.append(\"file\", file);\r\n\r\n    const res = await fetch(`https://www.googleapis.com/upload/drive/v3/files/${id}?uploadType=media&fields=id`, {\r\n        method: \"PATCH\",\r\n        headers: new Headers({ Authorization: \"Bearer \" + accessToken }),\r\n        body: form,\r\n    });\r\n    const val = await res.json();\r\n    return val.id;\r\n};\r\n\r\nconst getFileContents = async ({ id }: { id: string }) => {\r\n    const res = await gapi.client.drive.files.get({\r\n        fileId: id,\r\n        alt: \"media\",\r\n    });\r\n    return res.body;\r\n};\r\n\r\nconst deleteFile = async ({ id }: { id: string }) => gapi.client.drive.files.delete({ fileId: id });\r\n\r\nconst createNewDeck = (dispatch: React.Dispatch<Action>, state: AppStateT) => async ({\r\n    name,\r\n    fileContent,\r\n    ...restProps\r\n}: DeckProps & { fileContent?: string }) => {\r\n    const deck: Deck = {\r\n        name,\r\n        cards: CollectionParser.serialize(fileContent, SectionName.Sideboard, SectionName.Maybeboard),\r\n        isDirty: false,\r\n        ...restProps,\r\n    };\r\n    dispatch({\r\n        type: \"CreateDeck\",\r\n        link: await createNewFile({\r\n            name: `${name}.txt`,\r\n            props: {\r\n                name,\r\n                ...restProps,\r\n            },\r\n            fileContent,\r\n        }),\r\n        ...deck,\r\n    });\r\n    downloadCards(dispatch, state)(deck);\r\n};\r\n\r\nconst downloadDeck = (dispatch: React.Dispatch<Action>, state: AppStateT) => async (name: string, file: gapi.client.drive.File) => {\r\n    const deck: Deck = {\r\n        name,\r\n        cards: CollectionParser.serialize(await GoogleApi.getFileContents({ id: file.id! }), SectionName.Sideboard, SectionName.Maybeboard),\r\n        isDirty: false,\r\n        previewUrl: file.appProperties?.previewUrl,\r\n    };\r\n    dispatch({ type: \"CreateDeck\", link: file.id!, ...deck });\r\n    downloadCards(dispatch, state)(deck);\r\n};\r\n\r\nconst deleteDeck = (dispatch: React.Dispatch<Action>) => async ({ name, id }: { name: string; id: string }) => {\r\n    await deleteFile({ id });\r\n    dispatch({ type: \"DeleteDeck\", name });\r\n};\r\n\r\nconst getProfile = () => {\r\n    return gapi.auth2\r\n        .getAuthInstance()\r\n        .currentUser.get()\r\n        .getBasicProfile();\r\n};\r\n\r\nconst signIn = () => gapi.auth2.getAuthInstance().signIn();\r\nconst signOut = () => gapi.auth2.getAuthInstance().signOut();\r\n\r\nexport type GoogleProfile = gapi.auth2.BasicProfile;\r\n\r\nconst GoogleApi = {\r\n    initClient,\r\n    getProfile,\r\n    signIn,\r\n    signOut,\r\n    prepareAppData,\r\n    createNewFile,\r\n    updateFile,\r\n    deleteFile,\r\n    createNewDeck,\r\n    downloadDeck,\r\n    deleteDeck,\r\n    getFileContents,\r\n};\r\nexport default GoogleApi;\r\n","import React from \"react\";\r\n\r\nexport const useThunk = <StateT, DispatchT, Func>(\r\n    context: React.Context<[StateT, React.Dispatch<DispatchT>]>,\r\n    func: (dispatch: React.Dispatch<DispatchT>, state: StateT) => Func\r\n) => {\r\n    const [state, dispatch] = React.useContext(context);\r\n    return func(dispatch, state);\r\n};\r\nexport default useThunk;\r\n","import React from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Scry from \"../../Utility/Scry\";\r\n\r\ntype Props = {\r\n    label: string;\r\n    onNameSelect?: (name: string) => void;\r\n};\r\n\r\nconst CardNameAutocomplete: React.FC<Props> = ({ label, onNameSelect }) => {\r\n    const [value, setValue] = React.useState<string>(\"\");\r\n    const [open, setOpen] = React.useState(false);\r\n    const [options, setOptions] = React.useState<string[]>([]);\r\n    const [isLoading, setIsLoading] = React.useState<boolean>(false);\r\n    const [typingTimer, setTypingTimer] = React.useState<number | undefined>(undefined);\r\n\r\n    const onInputChange = (newValue: string, reason: \"input\" | \"reset\" | \"clear\") => {\r\n        if (value === newValue || reason === \"reset\") {\r\n            return;\r\n        }\r\n        setValue(newValue);\r\n\r\n        clearTimeout(typingTimer);\r\n        setTypingTimer(\r\n            setTimeout(() => {\r\n                if (newValue.length < 2) {\r\n                    return;\r\n                }\r\n                setIsLoading(true);\r\n                Scry.Cards.Autocomplete(newValue).then(names => {\r\n                    setOptions(names);\r\n                    setIsLoading(false);\r\n                    if (names.length === 1 && names[0].toLowerCase().includes(newValue.toLowerCase())) {\r\n                        setValue(names[0]);\r\n                        onChange(names[0]);\r\n                        setOpen(false);\r\n                    }\r\n                });\r\n            }, 500)\r\n        );\r\n    };\r\n\r\n    const onChange = (newValue: string) => {\r\n        setValue(newValue);\r\n        setOptions([]);\r\n        onNameSelect && onNameSelect(newValue);\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        if (!open) {\r\n            setOptions([]);\r\n        }\r\n    }, [open]);\r\n\r\n    return (\r\n        <Autocomplete\r\n            style={{ width: 300 }}\r\n            open={open}\r\n            value={value}\r\n            onOpen={() => setOpen(true)}\r\n            onClose={() => setOpen(false)}\r\n            onChange={(_: any, val: any) => onChange(val)}\r\n            onInputChange={(e, val, reason) => onInputChange(val, reason)}\r\n            options={options}\r\n            loading={isLoading}\r\n            renderInput={params => (\r\n                <TextField\r\n                    {...params}\r\n                    label={label}\r\n                    fullWidth\r\n                    variant=\"outlined\"\r\n                    InputProps={{\r\n                        ...params.InputProps,\r\n                        endAdornment: (\r\n                            <React.Fragment>\r\n                                {isLoading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                                {params.InputProps.endAdornment}\r\n                            </React.Fragment>\r\n                        ),\r\n                    }}\r\n                />\r\n            )}\r\n        />\r\n    );\r\n};\r\nexport default CardNameAutocomplete;\r\n","import { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport baseStyled, { css as styledCss, ThemedStyledInterface, ThemedStyledProps, ThemeProvider as ThemeProv } from \"styled-components\";\r\nimport { colors } from \"@material-ui/core\";\r\n\r\nconst additionalArgs = {\r\n    constants: {\r\n        drawerWidth: \"260px\",\r\n        drawerWidthClosed: \"72px\",\r\n        appletHeight: \"280px\",\r\n    },\r\n};\r\n\r\nexport const MainTheme = createMuiTheme(\r\n    {\r\n        palette: {\r\n            type: \"dark\",\r\n            primary: { main: colors.deepOrange[700] },\r\n            secondary: { main: colors.blueGrey[500] },\r\n        },\r\n    },\r\n    additionalArgs\r\n);\r\n\r\nexport const ThemeProvider = ThemeProv;\r\nexport const css = styledCss;\r\n\r\nexport type Theme = typeof MainTheme & typeof additionalArgs;\r\nexport type ComponentProps<T = {}> = ThemedStyledProps<T, Theme>;\r\nconst styled = baseStyled as ThemedStyledInterface<Theme>;\r\nexport default styled;\r\n","import { Avatar, Paper, Typography } from \"@material-ui/core\";\r\nimport styled from \"./Theme\";\r\n\r\nexport const FlexCol = styled.div`\r\n    flex: 1 1 auto;\r\n`;\r\n\r\nexport const AppletContent = styled(Paper)`\r\n    position: relative;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    min-height: ${p => p.theme.constants.appletHeight};\r\n    overflow: hidden;\r\n    padding: ${p => p.theme.spacing(4)}px;\r\n    ${p => p.theme.breakpoints.down(\"xs\")} {\r\n        & {\r\n            padding: ${p => p.theme.spacing(2)}px;\r\n        }\r\n    }\r\n`;\r\n\r\nexport const AppletActions = styled.div`\r\n    align-self: flex-end;\r\n`;\r\n\r\nexport const Title = styled(Typography).attrs(p => ({\r\n    component: \"h2\",\r\n    variant: \"h4\",\r\n    color: \"primary\",\r\n    gutterBottom: true,\r\n}))``;\r\n\r\nexport const DrawerAvatar = styled(Avatar)`\r\n    background-color: ${p => p.theme.palette.background.paper};\r\n    color: ${p => p.theme.palette.text.secondary};\r\n`;\r\n","import { Avatar, Button, ButtonGroup, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, TextField } from \"@material-ui/core\";\r\nimport CollectionsIcon from \"@material-ui/icons/Collections\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { AppState } from \"../../State\";\r\nimport GoogleApi from \"../../Utility/GoogleApi\";\r\nimport Scry from \"../../Utility/Scry\";\r\nimport useThunk from \"../../Utility/useThunk\";\r\nimport CardNameAutocomplete from \"../Styled/CardNameAutocomplete\";\r\nimport { AppletActions, AppletContent, FlexCol, Title } from \"../Styled/Grid\";\r\nimport styled from \"../Styled/Theme\";\r\n\r\nconst PreviewRow = styled.div`\r\n    display: flex;\r\n    margin-top: ${p => p.theme.spacing(1)}px;\r\n    align-items: center;\r\n\r\n    & .MuiAutocomplete-root {\r\n        flex-grow: 1;\r\n        margin-right: ${p => p.theme.spacing(1)}px;\r\n    }\r\n`;\r\n\r\nconst AddDeck: React.FC = () => {\r\n    const history = useHistory();\r\n    const [state] = React.useContext(AppState);\r\n    const createNewDeck = useThunk(AppState, GoogleApi.createNewDeck);\r\n\r\n    const [importText, setImportText] = React.useState<string>(\"\");\r\n    const [deckName, setDeckName] = React.useState<string>(\"\");\r\n    const [open, setOpen] = React.useState(false);\r\n    const [invalidName, setInvalidName] = React.useState<string | null>(null);\r\n\r\n    const [previewUrl, setPreviewUrl] = React.useState<string>(\"\");\r\n\r\n    const handleClickOpen = () => setOpen(true);\r\n    const handleClose = () => setOpen(false);\r\n\r\n    const handleImport = () => {\r\n        createNewDeck({ name: deckName, fileContent: importText, previewUrl });\r\n        history.push(`/decks/${encodeURIComponent(deckName)}`);\r\n    };\r\n\r\n    const validateName = (name: string) => {\r\n        setDeckName(name);\r\n        if (name === \"\") {\r\n            setInvalidName(\"Deck name can't be empty\");\r\n            return;\r\n        }\r\n        if (name.indexOf(\"%\") >= 0) {\r\n            setInvalidName(\"Deck name can't contain '%'\");\r\n            return;\r\n        }\r\n        if (state.decks[name]) {\r\n            setInvalidName(\"Deck with this name already exists\");\r\n            return;\r\n        }\r\n        setInvalidName(null);\r\n    };\r\n\r\n    const updatePreview = (name: string) => {\r\n        if (!name) {\r\n            setPreviewUrl(\"\");\r\n            return;\r\n        }\r\n        Scry.Cards.Named(name).then(card => {\r\n            setPreviewUrl(Scry.getImage(card, \"art_crop\") ?? \"\");\r\n        });\r\n    };\r\n\r\n    // eslint-disable-next-line\r\n    React.useEffect(() => validateName(\"\"), []);\r\n\r\n    return (\r\n        <AppletContent>\r\n            <Title>Add deck</Title>\r\n            <FlexCol>\r\n                <TextField\r\n                    label=\"Deck name\"\r\n                    variant=\"outlined\"\r\n                    error={!!invalidName}\r\n                    helperText={invalidName}\r\n                    value={deckName}\r\n                    onChange={e => validateName(e.target.value)}\r\n                    fullWidth\r\n                />\r\n                <PreviewRow>\r\n                    <CardNameAutocomplete label=\"Preview card\" onNameSelect={updatePreview} />\r\n                    <Avatar alt=\"Preview icon\" src={previewUrl}>\r\n                        <CollectionsIcon />\r\n                    </Avatar>\r\n                </PreviewRow>\r\n            </FlexCol>\r\n            <AppletActions>\r\n                <ButtonGroup size=\"small\">\r\n                    <Button disabled={!!invalidName} onClick={handleClickOpen}>\r\n                        Import\r\n                    </Button>\r\n                    <Button disabled={!!invalidName} color=\"primary\" onClick={handleImport}>\r\n                        Create empty\r\n                    </Button>\r\n                </ButtonGroup>\r\n            </AppletActions>\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"import-deck-dialog\" fullWidth maxWidth=\"md\">\r\n                <DialogTitle id=\"import-deck-dialog\">Import</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>Paste exported deck below.</DialogContentText>\r\n                    <TextField\r\n                        autoFocus\r\n                        fullWidth\r\n                        label=\"Import\"\r\n                        multiline\r\n                        rows=\"15\"\r\n                        variant=\"outlined\"\r\n                        value={importText}\r\n                        onChange={e => setImportText(e.target.value)}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={handleImport} color=\"primary\">\r\n                        Import\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </AppletContent>\r\n    );\r\n};\r\n\r\nexport default AddDeck;\r\n","import { CircularProgress, Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { AppletContent } from \"./Styled/Grid\";\r\nimport styled from \"./Styled/Theme\";\r\n\r\nconst Body = styled(AppletContent)`\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n`;\r\n\r\nconst MarginedTypography = styled(Typography)`\r\n    margin-top: ${p => p.theme.spacing(2)}px;\r\n`;\r\n\r\nconst Loading: React.FC = () => (\r\n    <Body>\r\n        <CircularProgress size={60} />\r\n        <MarginedTypography variant=\"h6\">\r\n            Loading...\r\n        </MarginedTypography>\r\n    </Body>\r\n);\r\nexport default Loading;\r\n","import { AssertionError } from \"assert\";\r\n\r\nfunction assert(condition: any, message: string): asserts condition {\r\n    if (!condition) {\r\n        throw new AssertionError({ message });\r\n    }\r\n}\r\nexport default assert;","import React from \"react\";\r\nimport { isNullOrUndefined } from \"util\";\r\nimport { CollectionCardProps } from \"../Components/Previews/CollectionPreview\";\r\nimport { AppState, DeckName, SectionName } from \"../State\";\r\nimport assert from \"./Assert\";\r\n\r\nconst useCardActions = ({ card, deckName, sectionName }: CollectionCardProps) => {\r\n    const [state, dispatch] = React.useContext(AppState);\r\n\r\n    const targetDeck = deckName ?? state.selectedDeck ?? null;\r\n    const isOnWishlist = () => state.decks[DeckName.Wishlist].cards[SectionName.Default][card.name] !== undefined;\r\n    const sections = (targetDeck ? Object.keys(state.decks[targetDeck].cards) : []).filter(s => s !== sectionName);\r\n    return {\r\n        updateCardQuantity: (val: number) => {\r\n            assert(!isNullOrUndefined(deckName), \"DeckName should not be empty if the preview actions are Deck\");\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName,\r\n                sectionName: sectionName ?? SectionName.Default,\r\n                card: {\r\n                    ...card,\r\n                    amount: val,\r\n                },\r\n            });\r\n        },\r\n        openScryfallPage: () => card.scryfall_uri && window.open(card.scryfall_uri, \"_blank\"),\r\n        openScryfallSetPage: () => card.scryfall_set_uri && window.open(card.scryfall_set_uri, \"_blank\"),\r\n        isOnWishlist,\r\n        toggleWishlist: () =>\r\n            isOnWishlist()\r\n                ? dispatch({\r\n                    type: \"UpdateDeckCard\",\r\n                    deckName: DeckName.Wishlist,\r\n                    sectionName: SectionName.Default,\r\n                    card: {\r\n                        ...card,\r\n                        amount: 0,\r\n                    },\r\n                })\r\n                : dispatch({\r\n                    type: \"UpdateDeckCard\",\r\n                    deckName: DeckName.Wishlist,\r\n                    sectionName: SectionName.Default,\r\n                    card: {\r\n                        ...card,\r\n                        amount: 1,\r\n                    },\r\n                }),\r\n        wishlistTooltip: () => (isOnWishlist() ? \"Remove from wishlist\" : \"Add to wishlist\"),\r\n        removeCard: () => {\r\n            assert(!isNullOrUndefined(deckName), \"DeckName should not be empty if the preview actions are Deck\");\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName,\r\n                sectionName: sectionName ?? SectionName.Default,\r\n                card: {\r\n                    ...card,\r\n                    amount: 0,\r\n                },\r\n            });\r\n        },\r\n        sections,\r\n        changeSection: (newSection: string) => {\r\n            assert(!isNullOrUndefined(deckName), \"DeckName should not be empty if the preview actions are Deck\");\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName,\r\n                sectionName: sectionName ?? SectionName.Default,\r\n                card: {\r\n                    ...card,\r\n                    amount: 0,\r\n                },\r\n            });\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName,\r\n                sectionName: newSection,\r\n                card: {\r\n                    ...card,\r\n                    amount: card.amount,\r\n                },\r\n            });\r\n        },\r\n        addToDeck: (section: string = SectionName.Default) => {\r\n            assert(!isNullOrUndefined(targetDeck), \"TargetDeck should not be empty if the preview actions are SearchDeck\");\r\n            dispatch({\r\n                type: \"UpdateDeckCard\",\r\n                deckName: targetDeck,\r\n                sectionName: section,\r\n                card: {\r\n                    ...card,\r\n                    amount: 1,\r\n                },\r\n            });\r\n        }\r\n    } as const;\r\n};\r\nexport default useCardActions;\r\n","import { Avatar, ClickAwayListener, IconButton, Popper } from \"@material-ui/core\";\r\nimport { AvatarProps } from \"@material-ui/core/Avatar\";\r\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\r\nimport ArrowDropUpIcon from \"@material-ui/icons/ArrowDropUp\";\r\nimport React from \"react\";\r\nimport styled, { css } from \"./Theme\";\r\nimport { PxFromAvatarSize } from \"../../Utility\";\r\n\r\ntype StyledAvatarProps = { size: Props[\"size\"]; open: boolean } & AvatarProps;\r\n\r\nconst StyledAvatar = styled(Avatar).attrs<StyledAvatarProps>(p => ({\r\n    className: p.size === \"chip\" ? p.className + \" MuiChip-avatar MuiChip-avatarSmall\" : p.className,\r\n}))<StyledAvatarProps>`\r\n    cursor: pointer;\r\n    color: ${p => p.theme.palette.text.primary};\r\n\r\n    ${p =>\r\n        p.open &&\r\n        css`\r\n            background-color: ${p.theme.palette.grey[500]};\r\n        `}\r\n\r\n    ${p =>\r\n        p.size === \"inline\" &&\r\n        css`\r\n            width: ${p.theme.spacing(3)}px;\r\n            height: ${p.theme.spacing(3)}px;\r\n            font-size: 0.875rem;\r\n        `}\r\n\r\n    ${p =>\r\n        !p.size &&\r\n        css`\r\n            width: 48px;\r\n            height: 48px;\r\n            font-size: 2rem;\r\n        `}\r\n`;\r\n\r\nconst Body = styled.div<{ size: Props[\"size\"] }>`\r\n    display: flex;\r\n    flex-direction: column;\r\n    transform: translate(calc(50% + ${p => PxFromAvatarSize(p.size)}px), calc(-100% + ${p => PxFromAvatarSize(p.size)}px));\r\n    background-color: ${p => p.theme.palette.grey[600]};\r\n    border-radius: ${p => PxFromAvatarSize(p.size)}px;\r\n`;\r\n\r\nconst Arrows = styled(IconButton)<{ s: Props[\"size\"] }>`\r\n    height: ${p => (!p.s ? 48 : p.s === \"chip\" ? 18 : 24)}px;\r\n    width: ${p => (!p.s ? 48 : p.s === \"chip\" ? 18 : 24)}px;\r\n    padding: 0;\r\n    ${p =>\r\n        p.s === \"chip\" &&\r\n        css`\r\n            & .MuiIconButton-label {\r\n                margin-top: -3px;\r\n            }\r\n        `}\r\n    &:first-of-type {\r\n        border-bottom-left-radius: 0;\r\n        border-bottom-right-radius: 0;\r\n    }\r\n    &:last-of-type {\r\n        border-top-left-radius: 0;\r\n        border-top-right-radius: 0;\r\n    }\r\n`;\r\n\r\ntype Props = {\r\n    val: number;\r\n    onChange: (val: number) => void;\r\n    size?: \"chip\" | \"inline\";\r\n    className?: string;\r\n};\r\n\r\nconst IncrementNumber: React.FC<Props> = ({ val, onChange, size, className }) => {\r\n    const [anchorEl, setAnchorEl] = React.useState<HTMLDivElement | null>(null);\r\n    const open = !!anchorEl;\r\n\r\n    const handleClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        setAnchorEl(!anchorEl ? e.currentTarget : null);\r\n        e.stopPropagation();\r\n    };\r\n\r\n    const handleClose = () => setAnchorEl(null);\r\n\r\n    const onIncrement = (incr: number) => (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n        e.stopPropagation();\r\n        onChange(val + incr);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <StyledAvatar className={className} title=\"\" size={size} onClick={handleClick} open={open}>\r\n                {val}\r\n            </StyledAvatar>\r\n            <Popper open={open} anchorEl={anchorEl}>\r\n                <ClickAwayListener onClickAway={handleClose}>\r\n                    <Body size={size}>\r\n                        <Arrows s={size} onClick={onIncrement(1)}>\r\n                            <ArrowDropUpIcon />\r\n                        </Arrows>\r\n                        <Arrows s={size} onClick={onIncrement(-1)}>\r\n                            <ArrowDropDownIcon />\r\n                        </Arrows>\r\n                    </Body>\r\n                </ClickAwayListener>\r\n            </Popper>\r\n        </>\r\n    );\r\n};\r\nexport default IncrementNumber;\r\n","import React from \"react\";\r\nimport { AppState } from \"../../State\";\r\nimport { ScryCardSymbol } from \"../../Utility/Scry/Types\";\r\nimport styled, { css } from \"./Theme\";\r\nimport { TypographyProps } from \"@material-ui/core/Typography\";\r\n\r\nconst sizeMap: [TypographyProps[\"variant\"], number][] = [\r\n    [\"h1\", 80],\r\n    [\"h2\", 51],\r\n    [\"h3\", 42],\r\n    [\"h4\", 30],\r\n    [\"h5\", 25],\r\n    [\"h6\", 20],\r\n    [\"subtitle1\", 16],\r\n    [\"subtitle2\", 14],\r\n    [\"body1\", 16],\r\n    [\"body2\", 14],\r\n    [\"caption\", 12],\r\n    [\"button\", 16],\r\n    [\"overline\", 14],\r\n];\r\n\r\nconst Symbol = styled.svg`\r\n    display: inline-block;\r\n    height: 16px;\r\n    width: 16px;\r\n    margin: 1px 1px -2px 1px;\r\n\r\n    ${sizeMap.map(\r\n        ([v, size]) => css`\r\n            .MuiTypography-${v} & {\r\n                height: ${size}px;\r\n                width: ${size}px;\r\n            }\r\n        `\r\n    )}\r\n`;\r\n\r\ntype Props = {\r\n    symbol: string;\r\n};\r\n\r\nconst SymbolIcon: React.FC<Props> = ({ symbol }) => {\r\n    const [state] = React.useContext(AppState);\r\n    const [symbolObj, setSymbolObj] = React.useState<ScryCardSymbol>();\r\n    React.useEffect(() => {\r\n        setSymbolObj(state.symbolList[symbol] ?? Object.values(state.symbolList).find(s => s.loose_variant === symbol));\r\n    }, [symbol, state.symbolList]);\r\n    return symbolObj ? <Symbol dangerouslySetInnerHTML={{ __html: symbolObj.svg }} /> : <>{symbol}</>;\r\n};\r\n\r\nexport default SymbolIcon;\r\n","import React from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { TypographyProps } from \"@material-ui/core/Typography\";\r\nimport SymbolIcon from \"./SymbolIcon\";\r\n\r\ntype Props = TypographyProps & {\r\n    text: string;\r\n};\r\n\r\nconst SymbolTypography: React.FC<Props> = ({ text, ...typographyProps }) => {\r\n    const [parsed, setParsed] = React.useState<JSX.Element[]>([]);\r\n    React.useEffect(() => {\r\n        setParsed((text.match(/({.*?})|([^{]+)/g) ?? []).map((m, i) => (m[0] === \"{\" ? <SymbolIcon key={i} symbol={m} /> : <span key={i}>{m}</span>)));\r\n    }, [text]);\r\n    return <Typography {...typographyProps}>{parsed}</Typography>;\r\n};\r\n\r\nexport default SymbolTypography;\r\n","import { Chip } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport useCardActions from \"../../Utility/useCardAction\";\r\nimport IncrementNumber from \"../Styled/IncrementNumber\";\r\nimport styled from \"../Styled/Theme\";\r\nimport SymbolTypography from \"../Styled/SymbolTypography\";\r\nimport { CollectionCardProps } from \"./CollectionPreview\";\r\n\r\nconst CustomChip = styled(Chip)`\r\n    width: 100%;\r\n\r\n    & .MuiChip-label {\r\n        flex: 1 1 auto;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    & .MuiChip-deleteIcon {\r\n        width: unset;\r\n        height: unset;\r\n        flex-shrink: 0;\r\n        margin-left: ${p => p.theme.spacing(1)}px;\r\n        margin-top: 1px;\r\n    }\r\n`;\r\n\r\nconst CompressedCard: React.FC<CollectionCardProps> = props => {\r\n    const { updateCardQuantity, openScryfallPage } = useCardActions(props);\r\n    const { card } = props;\r\n    return (\r\n        <CustomChip\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            label={card.name}\r\n            deleteIcon={<SymbolTypography text={card.mana_cost ?? \"\"} noWrap />}\r\n            avatar={<IncrementNumber size=\"chip\" val={card.amount} onChange={updateCardQuantity} />}\r\n            onDelete={openScryfallPage}\r\n            onClick={openScryfallPage}\r\n            title=\"Open on scryfall\"\r\n        />\r\n    );\r\n};\r\nexport default CompressedCard;\r\n","import styled from \"./Theme\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nconst IndentedTypography = styled(Typography)`\r\n    text-indent: ${p => p.theme.spacing(1)}px;\r\n`;\r\nexport default IndentedTypography;\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { CollectionPreviewProps } from \"./CollectionPreview\";\r\nimport CompressedCard from \"./CompressedCard\";\r\nimport IndentedTypography from \"../Styled/IndentedTypography\";\r\n\r\nconst CompressedCollecion: React.FC<CollectionPreviewProps> = ({ cards, sortBy, sortOrder, showGroups, ...props }) => {\r\n    return (\r\n        <Grid container direction=\"column\">\r\n            {cards.length >= 1 ? (\r\n                cards.map(c => (\r\n                    <Grid item key={c.name} xs zeroMinWidth>\r\n                        <CompressedCard card={c} {...props} />\r\n                    </Grid>\r\n                ))\r\n            ) : (\r\n                <Grid item xs={12}>\r\n                    <IndentedTypography color=\"textSecondary\" variant=\"subtitle2\">Empty</IndentedTypography>\r\n                </Grid>\r\n            )}\r\n        </Grid>\r\n    );\r\n};\r\nexport default CompressedCollecion;\r\n","import { IconButton, Tooltip, Typography } from \"@material-ui/core\";\r\nimport { IconButtonProps } from \"@material-ui/core/IconButton/IconButton\";\r\nimport { darken } from \"@material-ui/core/styles\";\r\nimport React from \"react\";\r\nimport styled, { css } from \"./Theme\";\r\n\r\nconst StyledIconButton = styled(IconButton)<{ background?: \"primary\" | \"secondary\" }>`\r\n    ${p =>\r\n        p.background &&\r\n        css`\r\n            background-color: ${p.theme.palette[p.background].main};\r\n            &.Mui-disabled {\r\n                background-color: ${darken(p.theme.palette[p.background].main, 0.3)};\r\n            }\r\n        `};\r\n    &:hover {\r\n        ${p =>\r\n        p.background &&\r\n            css`\r\n                background-color: ${p.theme.palette[p.background].dark};\r\n            `};\r\n    }\r\n`;\r\n\r\ntype Props = {\r\n    onClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n    title: string;\r\n    size?: IconButtonProps[\"size\"];\r\n    disabled?: boolean;\r\n    background?: \"primary\" | \"secondary\";\r\n};\r\n\r\nconst TooltipButton: React.FC<Props> = ({ onClick, title, size, background, disabled, children }) => {\r\n    return (\r\n        <Tooltip title={title}>\r\n            <span>\r\n                <StyledIconButton size={size} background={background} disabled={disabled} onClick={onClick} aria-label={title}>\r\n                    {children}\r\n                    <Typography variant=\"srOnly\">{title}</Typography>\r\n                </StyledIconButton>\r\n            </span>\r\n        </Tooltip>\r\n    );\r\n};\r\nexport default TooltipButton;\r\n","import { IconButtonProps } from \"@material-ui/core/IconButton\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\r\nimport React from \"react\";\r\nimport useCardActions from \"../../../Utility/useCardAction\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\n\r\ntype Props = {\r\n    actions: ReturnType<typeof useCardActions>;\r\n    size?: IconButtonProps[\"size\"];\r\n    background?: \"primary\" | \"secondary\";\r\n};\r\n\r\nconst WishlistButton: React.FC<Props> = ({ actions, size, background }) => {\r\n    return (\r\n        <TooltipButton title={actions.wishlistTooltip()} onClick={actions.toggleWishlist} background={background} size={size}>\r\n            {actions.isOnWishlist() ? <FavoriteIcon /> : <FavoriteBorderIcon />}\r\n        </TooltipButton>\r\n    );\r\n};\r\nexport default WishlistButton;\r\n","import { IconButtonProps } from \"@material-ui/core/IconButton\";\r\nimport React from \"react\";\r\nimport useCardActions from \"../../../Utility/useCardAction\";\r\nimport SwapVertIcon from \"@material-ui/icons/SwapVert\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\nimport { ClickAwayListener, Grow, MenuItem, MenuList, Paper, Popper } from \"@material-ui/core\";\r\nimport { SectionName } from \"../../../State\";\r\n\r\ntype Props = {\r\n    actions: ReturnType<typeof useCardActions>;\r\n    size?: IconButtonProps[\"size\"];\r\n    background?: \"primary\" | \"secondary\";\r\n};\r\n\r\nconst ChangeSectionButton: React.FC<Props> = ({ actions, size, background }) => {\r\n    const [open, setOpen] = React.useState(false);\r\n    const anchorRef = React.useRef<HTMLDivElement>(null);\r\n\r\n    const handleToggle = () => setOpen(prevOpen => !prevOpen);\r\n    const handleClose = (event: React.MouseEvent<Document, MouseEvent>) => {\r\n        if (anchorRef.current && anchorRef.current.contains(event.target as HTMLElement)) {\r\n            return;\r\n        }\r\n\r\n        setOpen(false);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <span ref={anchorRef}>\r\n                <TooltipButton title=\"Change section\" onClick={handleToggle} disabled={actions.sections.length <= 0} background={background} size={size}>\r\n                    <SwapVertIcon />\r\n                </TooltipButton>\r\n            </span>\r\n            <Popper open={open} anchorEl={anchorRef.current} role={undefined} transition>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                        {...TransitionProps}\r\n                        style={{\r\n                            transformOrigin: placement === \"bottom\" ? \"center top\" : \"center bottom\",\r\n                        }}\r\n                    >\r\n                        <Paper elevation={5}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList>\r\n                                    {(actions.sections).map(s => (\r\n                                        <MenuItem\r\n                                            key={s}\r\n                                            onClick={() => actions.changeSection(s)}\r\n                                        >\r\n                                            {s === SectionName.Default ? \"Default\" : s}\r\n                                        </MenuItem>\r\n                                    ))}\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    );\r\n};\r\nexport default ChangeSectionButton;\r\n","import { IconButtonProps } from \"@material-ui/core/IconButton\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport React from \"react\";\r\nimport useCardActions from \"../../../Utility/useCardAction\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\n\r\ntype Props = {\r\n    actions: ReturnType<typeof useCardActions>;\r\n    size?: IconButtonProps[\"size\"];\r\n    background?: \"primary\" | \"secondary\";\r\n};\r\n\r\nconst DeleteButton: React.FC<Props> = ({ actions, size, background }) => {\r\n    return (\r\n        <TooltipButton title=\"Remove card\" onClick={actions.removeCard} background={background} size={size}>\r\n            <DeleteIcon />\r\n        </TooltipButton>\r\n    );\r\n};\r\nexport default DeleteButton;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"translate(-60 -58)\",\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"circle\", {\n  cx: 290,\n  cy: 288,\n  r: 230\n}), React.createElement(\"path\", {\n  d: \"M343.058 89.985c-109.36-29.303-221.77 35.597-251.073 144.957-29.303 109.36 35.597 221.77 144.957 251.073 109.36 29.303 221.77-35.597 251.073-144.957 29.303-109.36-35.597-221.77-144.957-251.073zM256.342 451.95l.276.71c1.172 3.187 3.562 5.776 6.644 7.2 3.082 1.422 6.603 1.562 9.788.387l48.355-17.774c3.184-1.175 6.706-1.035 9.787.388 3.082 1.424 5.472 4.013 6.644 7.2l.19.56c2.105 5.852-.304 12.37-5.71 15.448-93.23 22.17-187.912-30.724-217.912-121.736s14.67-189.84 102.81-227.453c5.144.502 9.544 3.91 11.32 8.762 2.578 6.977 10.317 10.55 17.3 7.99l15.73-5.803c3.186-1.176 6.707-1.036 9.79.387 3.08 1.423 5.47 4.012 6.643 7.198l.19.56c1.174 3.185 1.034 6.706-.39 9.788-1.422 3.082-4.01 5.472-7.197 6.644l-109.46 40.366c-3.187 1.172-5.777 3.562-7.2 6.644-1.422 3.082-1.562 6.603-.388 9.788l.19.56c1.172 3.186 3.562 5.775 6.643 7.198 3.082 1.423 6.603 1.563 9.788.388l80.06-29.483c3.184-1.174 6.705-1.034 9.787.388 3.082 1.423 5.472 4.013 6.644 7.2l.19.56c1.173 3.184 1.034 6.705-.39 9.787-1.422 3.08-4.01 5.47-7.197 6.643l-127.814 47.08c-3.186 1.17-5.776 3.56-7.2 6.643-1.42 3.082-1.56 6.603-.387 9.788l.19.56c1.172 3.186 3.562 5.775 6.643 7.198 3.08 1.423 6.602 1.563 9.787.388L297.72 226.4c3.184-1.175 6.705-1.036 9.787.387 3.082 1.423 5.472 4.012 6.644 7.198l.467 1.27c1.174 3.186 1.035 6.707-.388 9.79-1.424 3.08-4.014 5.47-7.2 6.643l-113 41.54c-3.187 1.172-5.777 3.562-7.2 6.644-1.422 3.08-1.562 6.603-.387 9.787l.19.56c1.17 3.185 3.56 5.775 6.643 7.198 3.08 1.423 6.603 1.562 9.787.388l51.798-19.06c3.186-1.174 6.707-1.034 9.79.39 3.08 1.422 5.47 4.01 6.643 7.197l.19.56c1.174 3.185 1.034 6.706-.39 9.788-1.422 3.083-4.01 5.473-7.197 6.644l-89.085 32.754c-3.185 1.17-5.774 3.56-7.197 6.643-1.423 3.083-1.562 6.604-.388 9.79l.19.56c1.17 3.185 3.56 5.775 6.643 7.197 3.082 1.423 6.603 1.563 9.788.388L304.563 336.3c3.185-1.173 6.706-1.034 9.788.39 3.083 1.422 5.473 4.01 6.644 7.197l.19.56c1.174 3.185 1.035 6.706-.388 9.788s-4.013 5.472-7.198 6.644l-74.954 27.54c-3.186 1.17-5.776 3.56-7.2 6.643-1.422 3.082-1.56 6.603-.387 9.788l.19.56c1.172 3.187 3.562 5.777 6.643 7.2 3.082 1.422 6.603 1.562 9.788.387l94.147-34.537c3.185-1.175 6.706-1.035 9.788.388s5.472 4.012 6.644 7.198c2.428 6.58-.893 13.887-7.447 16.384l-86.903 33.168c-3.18 1.18-5.764 3.574-7.18 6.658-1.414 3.083-1.547 6.603-.367 9.784l-.018-.09z\",\n  fill: \"#FFF\"\n}));\n\nvar SvgScryfallLogo = function SvgScryfallLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    className: \"\",\n    width: 460,\n    height: 460,\n    viewBox: \"0 0 460 460\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgScryfallLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/scryfallLogo.89ac5845.svg\";\nexport { ForwardRef as ReactComponent };","import { IconButtonProps } from \"@material-ui/core/IconButton\";\r\nimport React from \"react\";\r\nimport { ReactComponent as ScryfallIcon } from \"../../../Assets/scryfallLogo.svg\";\r\nimport useCardActions from \"../../../Utility/useCardAction\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\n\r\n\r\ntype Props = {\r\n    actions: ReturnType<typeof useCardActions>;\r\n    size?: IconButtonProps[\"size\"];\r\n    background?: \"primary\" | \"secondary\";\r\n};\r\n\r\nconst OpenScryfallButton: React.FC<Props> = ({ actions, size, background }) => {\r\n    return (\r\n        <TooltipButton title=\"Open on scryfall\" onClick={actions.openScryfallPage} background={background} size={size}>\r\n            <ScryfallIcon width=\"24\" height=\"24\" />\r\n        </TooltipButton>\r\n    );\r\n};\r\nexport default OpenScryfallButton;\r\n","import React from \"react\";\r\nimport { IconButtonProps } from \"@material-ui/core/IconButton\";\r\nimport { CollectionCardProps } from \"../CollectionPreview\";\r\nimport useCardActions from \"../../../Utility/useCardAction\";\r\nimport WishlistButton from \"./WishlistButton\";\r\nimport ChangeSectionButton from \"./ChangeSectionButton\";\r\nimport DeleteButton from \"./DeleteButton\";\r\nimport OpenScryfallButton from \"./OpenScryfallButton\";\r\n\r\ntype Props = {\r\n    size?: IconButtonProps[\"size\"];\r\n    className?: string;\r\n} & CollectionCardProps;\r\n\r\nconst CardActions: React.FC<Props> = ({ size, className, ...props}) => {\r\n    const actions = useCardActions(props);\r\n    return (\r\n        <div className={className}>\r\n            <WishlistButton actions={actions} size={size} />\r\n            <ChangeSectionButton actions={actions} size={size} />\r\n            <DeleteButton actions={actions} size={size} />\r\n            <OpenScryfallButton actions={actions} size={size} />\r\n        </div>\r\n    );\r\n};\r\nexport default CardActions;\r\n","import React from \"react\";\r\nimport { isNullOrUndefined } from \"util\";\r\nimport { PxFromAvatarSize } from \"../../Utility\";\r\nimport Scry from \"../../Utility/Scry\";\r\nimport useCardActions from \"../../Utility/useCardAction\";\r\nimport IncrementNumber from \"../Styled/IncrementNumber\";\r\nimport styled from \"../Styled/Theme\";\r\nimport CardActions from \"./ActionButtons/CardActions\";\r\nimport { CollectionCardProps } from \"./CollectionPreview\";\r\n\r\nconst Body = styled.div`\r\n    padding-bottom: 139.344262295%;\r\n    width: 100%;\r\n    height: 0;\r\n    position: relative;\r\n`;\r\n\r\nconst Image = styled.img`\r\n    border-radius: 4.75% / 3.5%;\r\n    background-image: repeating-linear-gradient(-55deg, #ddd, #ddd 5px, #ccc 5px, #ccc 10px);\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    cursor: pointer;\r\n`;\r\n\r\nconst Actions = styled(CardActions)`\r\n    position: absolute;\r\n    top: ${p => p.theme.spacing(1)}px;\r\n    right: ${p => p.theme.spacing(1)}px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background-color: ${p => p.theme.palette.grey[600]};\r\n    border-radius: ${PxFromAvatarSize(undefined)}px;\r\n\r\n    display: none;\r\n    ${Body}:hover & {\r\n        display: flex;\r\n    }\r\n`;\r\n\r\nconst StyledIncrement = styled(IncrementNumber)`\r\n    position: absolute;\r\n    top: ${p => p.theme.spacing(7)}px;\r\n    left: ${p => p.theme.spacing(3)}px;\r\n    background-color: ${p => p.theme.palette.background.default};\r\n`;\r\n\r\nconst ImagesCard: React.FC<CollectionCardProps> = props => {\r\n    const actions = useCardActions(props);\r\n    const { card } = props;\r\n\r\n    return (\r\n        <Body>\r\n            <Image src={Scry.getImage(card, \"normal\") ?? \"\"} title={card.name} />\r\n            {!isNullOrUndefined(card.amount) && <StyledIncrement val={card.amount} onChange={actions.updateCardQuantity} />}\r\n            <Actions {...props} />\r\n        </Body>\r\n    );\r\n};\r\nexport default ImagesCard;\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport IndentedTypography from \"../Styled/IndentedTypography\";\r\nimport { CollectionPreviewProps } from \"./CollectionPreview\";\r\nimport ImagesCard from \"./ImagesCard\";\r\n\r\nconst ImagesCollecion: React.FC<CollectionPreviewProps> = ({ cards, sortBy, sortOrder, showGroups, ...props }) => {\r\n    return (\r\n        <Grid container spacing={1} alignItems=\"center\">\r\n            {cards.length >= 1 ? (\r\n                cards.map(c => (\r\n                    <Grid key={c.name} item xs={12} sm={6} lg={4} xl={3}>\r\n                        <ImagesCard card={c} {...props} />\r\n                    </Grid>\r\n                ))\r\n            ) : (\r\n                <Grid item xs={12}>\r\n                    <IndentedTypography color=\"textSecondary\">Empty</IndentedTypography>\r\n                </Grid>\r\n            )}\r\n        </Grid>\r\n    );\r\n};\r\nexport default ImagesCollecion;\r\n","import React from \"react\";\r\nimport { AppState } from \"../../State\";\r\nimport { ScryCardRarity, ScrySet } from \"../../Utility/Scry/Types\";\r\nimport styled from \"./Theme\";\r\n\r\nconst Set = styled.svg<{ rarity: ScryCardRarity }>`\r\n    width: 25px;\r\n    height: 20px;\r\n    fill: url(#rarity-${p => p.rarity});\r\n`;\r\n\r\ntype Props = {\r\n    set: string;\r\n    rarity: ScryCardRarity;\r\n};\r\n\r\nconst SetIcon: React.FC<Props> = ({ set, rarity }) => {\r\n    const [state] = React.useContext(AppState);\r\n    const [setObj, setSetObj] = React.useState<ScrySet>();\r\n    React.useEffect(() => {\r\n        setSetObj(state.setList[set]);\r\n    }, [set, state.setList]);\r\n    return setObj ? (\r\n        <Set rarity={rarity}>\r\n            <defs>\r\n                <linearGradient id=\"rarity-common\">\r\n                    <stop offset=\"0%\" stopColor=\"#000\" />\r\n                </linearGradient>\r\n                <linearGradient id=\"rarity-uncommon\" gradientTransform=\"rotate(90)\">\r\n                    <stop offset=\"0%\" stopColor=\"#4d565a\" />\r\n                    <stop offset=\"50%\" stopColor=\"#a0c3d3\" />\r\n                    <stop offset=\"100%\" stopColor=\"#4d565a\" />\r\n                </linearGradient>\r\n                <linearGradient id=\"rarity-rare\" gradientTransform=\"rotate(90)\">\r\n                    <stop offset=\"0%\" stopColor=\"#85723e\" />\r\n                    <stop offset=\"50%\" stopColor=\"#d4b975\" />\r\n                    <stop offset=\"100%\" stopColor=\"#85723e\" />\r\n                </linearGradient>\r\n                <linearGradient id=\"rarity-mythic\" gradientTransform=\"rotate(90)\">\r\n                    <stop offset=\"0%\" stopColor=\"#b02911\" />\r\n                    <stop offset=\"50%\" stopColor=\"#e87f03\" />\r\n                    <stop offset=\"100%\" stopColor=\"#b02911\" />\r\n                </linearGradient>\r\n            </defs>\r\n            <svg dangerouslySetInnerHTML={{ __html: setObj.icon_svg }} />\r\n        </Set>\r\n    ) : (\r\n        <>{set}</>\r\n    );\r\n};\r\n\r\nexport default SetIcon;\r\n","import { Link, TableCell, TableRow } from \"@material-ui/core\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport React from \"react\";\r\nimport { isNullOrUndefined } from \"util\";\r\nimport { PxFromAvatarSize } from \"../../Utility\";\r\nimport useCardActions from \"../../Utility/useCardAction\";\r\nimport IncrementNumber from \"../Styled/IncrementNumber\";\r\nimport SetIcon from \"../Styled/SetIcon\";\r\nimport SymbolTypography from \"../Styled/SymbolTypography\";\r\nimport styled, { css } from \"../Styled/Theme\";\r\nimport TooltipButton from \"../Styled/TooltipButton\";\r\nimport CardActions from \"./ActionButtons/CardActions\";\r\nimport { CollectionCardProps } from \"./CollectionPreview\";\r\nimport { NameCell, SetWidthCell } from \"./ListCollection\";\r\n\r\nconst StyledRow = styled(TableRow)`\r\n    &:hover {\r\n        background-image: linear-gradient(\r\n            90deg,\r\n            rgba(0, 0, 0, 0),\r\n            ${p => p.theme.palette.background.default} 10%,\r\n            ${p => p.theme.palette.background.default} 90%,\r\n            rgba(0, 0, 0, 0)\r\n        );\r\n    }\r\n`;\r\n\r\nconst Actions = styled(CardActions)<{ open: boolean }>`\r\n    white-space: nowrap;\r\n\r\n    & > *:not(:last-child) {\r\n        margin-right: ${p => p.theme.spacing(0.5)}px;\r\n    }\r\n\r\n    ${p => p.theme.breakpoints.down(\"xs\")} {\r\n        & {\r\n            ${p =>\r\n        !p.open &&\r\n                css`\r\n                    display: none;\r\n                `}\r\n\r\n            ${p =>\r\n        p.open &&\r\n                css`\r\n                    background-color: ${p => p.theme.palette.grey[600]};\r\n                    border-radius: ${p => PxFromAvatarSize(\"inline\")}px;\r\n                    position: absolute;\r\n                    transform: translateX(calc(-100% - 4px));\r\n                `}\r\n        }\r\n    }\r\n`;\r\n\r\nconst ActionsMenu = styled.div`\r\n    display: none;\r\n    ${p => p.theme.breakpoints.down(\"xs\")} {\r\n        & {\r\n            display: initial;\r\n        }\r\n    }\r\n`;\r\n\r\nconst ListCard: React.FC<CollectionCardProps> = props => {\r\n    const actions = useCardActions(props);\r\n    const { card } = props;\r\n\r\n    const [actionsOpen, setActionsOpen] = React.useState(false);\r\n    const toggleActionsOpen = () => setActionsOpen(prev => !prev);\r\n\r\n    return (\r\n        <StyledRow>\r\n            <SetWidthCell width=\"40px\" component=\"th\" scope=\"row\" align=\"center\">\r\n                {!isNullOrUndefined(card.amount) ? <IncrementNumber size=\"inline\" val={card.amount} onChange={actions.updateCardQuantity} /> : \"-\"}\r\n            </SetWidthCell>\r\n            <NameCell>{card.name}</NameCell>\r\n            <SetWidthCell width=\"40px\" align=\"center\">\r\n                <Link href=\"#\" onClick={actions.openScryfallSetPage} color=\"inherit\" title=\"Open set on scryfall\">\r\n                    <SetIcon set={card.set} rarity={card.rarity} />\r\n                </Link>\r\n            </SetWidthCell>\r\n            <TableCell>\r\n                <SymbolTypography text={card.mana_cost ?? \"\"} noWrap />\r\n            </TableCell>\r\n            <TableCell style={{ position: \"relative\" }}>\r\n                <Actions {...props} open={actionsOpen} size=\"small\" />\r\n                <ActionsMenu>\r\n                    <TooltipButton title=\"Actions\" onClick={toggleActionsOpen} size=\"small\">\r\n                        <MenuIcon />\r\n                    </TooltipButton>\r\n                </ActionsMenu>\r\n            </TableCell>\r\n        </StyledRow>\r\n    );\r\n};\r\nexport default ListCard;\r\n","import { Table, TableBody, TableCell, TableHead, TableRow } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport IndentedTypography from \"../Styled/IndentedTypography\";\r\nimport styled from \"../Styled/Theme\";\r\nimport { CollectionPreviewProps } from \"./CollectionPreview\";\r\nimport ListCard from \"./ListCard\";\r\n\r\nconst CustomPaddingTable = styled(Table)`\r\n    width: 100%;\r\n    overflow-y: scroll;\r\n    & .MuiTableCell-sizeSmall {\r\n        padding: ${p => p.theme.spacing(0.25, 1)};\r\n    }\r\n`;\r\n\r\nexport const SetWidthCell = styled(TableCell).attrs<{ width: string }>(p => ({\r\n    width: p.width,\r\n}))<{ width: string }>``;\r\n\r\nexport const NameCell = styled(TableCell)`\r\n    width: 60%;\r\n    max-width: 120px;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n`;\r\n\r\nconst ListCollecion: React.FC<CollectionPreviewProps> = ({ cards, sortBy, sortOrder, showGroups, ...props }) => {\r\n    return (\r\n        <CustomPaddingTable size=\"small\" aria-label=\"card table\">\r\n            <TableHead>\r\n                <TableRow>\r\n                    <SetWidthCell width=\"40px\" align=\"center\">\r\n                        #\r\n                    </SetWidthCell>\r\n                    <NameCell>Name</NameCell>\r\n                    <SetWidthCell width=\"40px\" align=\"center\">\r\n                        Set\r\n                    </SetWidthCell>\r\n                    <TableCell>Cost</TableCell>\r\n                    <TableCell>Actions</TableCell>\r\n                </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n                {cards.length >= 1 ? (\r\n                    cards.map(c => <ListCard key={c.name} card={c} {...props} />)\r\n                ) : (\r\n                    <TableRow>\r\n                        <TableCell colSpan={6}>\r\n                            <IndentedTypography color=\"textSecondary\">Empty</IndentedTypography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                )}\r\n            </TableBody>\r\n        </CustomPaddingTable>\r\n    );\r\n};\r\nexport default ListCollecion;\r\n","import { Typography } from \"@material-ui/core\";\r\nimport omit from \"lodash-es/omit\";\r\nimport React from \"react\";\r\nimport { DeckCard, SectionName } from \"../../State\";\r\nimport { ScryCard } from \"../../Utility/Scry/Types\";\r\nimport CompressedCollecion from \"./CompressedCollection\";\r\nimport ImagesCollecion from \"./ImagesCollection\";\r\nimport ListCollecion from \"./ListCollection\";\r\n\r\nexport type PreviewStyle = \"Standard\" | \"List\" | \"Images\" | \"Compressed\";\r\nexport type PreviewActions = \"SearchDeck\" | \"SearchWishlist\" | \"Deck\";\r\nexport type SortByOptions = \"Name\" | \"Cmc\" | \"Type\" | \"Rarity\";\r\nexport type SortOrderOptions = \"Asc\" | \"Desc\";\r\n\r\nexport type CollectionPreviewProps = {\r\n    cards: (DeckCard & ScryCard)[];\r\n    actions: PreviewActions;\r\n    sortBy: SortByOptions;\r\n    sortOrder: SortOrderOptions;\r\n    showGroups: boolean;\r\n    deckName?: string;\r\n    sectionName?: string;\r\n};\r\n\r\nexport type CollectionCardProps = {\r\n    card: DeckCard & ScryCard;\r\n    actions: PreviewActions;\r\n    deckName?: string;\r\n    sectionName?: string;\r\n};\r\n\r\nconst desc = <T extends object>(a: T, b: T, orderBy: keyof T, func: <U extends any>(v: U) => U | number) => {\r\n    if (func(b[orderBy]) < func(a[orderBy])) {\r\n        return -1;\r\n    }\r\n    if (func(b[orderBy]) > func(a[orderBy])) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n};\r\n\r\nconst getSorting = <T extends object>(\r\n    order: SortOrderOptions,\r\n    orderBy: keyof T,\r\n    func: <U extends any>(v: U) => U | number = v => v\r\n): ((a: T, b: T) => number) => {\r\n    return order === \"Desc\" ? (a, b) => desc(a, b, orderBy, func) : (a, b) => -desc(a, b, orderBy, func);\r\n};\r\n\r\nconst StableSort = <T extends object>(array: T[], cmp: (a: T, b: T) => number) => {\r\n    const stabilizedThis = array.map((el, index) => [el, index] as [T, number]);\r\n    stabilizedThis.sort((a, b) => {\r\n        const order = cmp(a[0], b[0]);\r\n        if (order !== 0) return order;\r\n        return a[1] - b[1];\r\n    });\r\n    return stabilizedThis.map(el => el[0]);\r\n};\r\n\r\nconst rarityOrder = [\"common\", \"uncommon\", \"rare\", \"mythic\"] as const;\r\nconst GetSortFunction = (sortBy: SortByOptions, sortOrder: SortOrderOptions) => {\r\n    switch (sortBy) {\r\n        case \"Name\":\r\n            return getSorting<DeckCard & ScryCard>(sortOrder, \"name\");\r\n        case \"Cmc\":\r\n            return getSorting<DeckCard & ScryCard>(sortOrder, \"mana_cost\");\r\n        case \"Type\":\r\n            return getSorting<DeckCard & ScryCard>(sortOrder, \"type_line\");\r\n        case \"Rarity\":\r\n            return getSorting<DeckCard & ScryCard>(sortOrder, \"rarity\", v => rarityOrder.indexOf(v));\r\n    }\r\n};\r\n\r\ntype Props = CollectionPreviewProps & {\r\n    style: PreviewStyle;\r\n};\r\n\r\nconst CollectionPreview: React.FC<Props> = props => {\r\n    const renderCollection = () => {\r\n        const passedProps = {\r\n            ...omit(props, \"style\", \"cards\"),\r\n            cards: StableSort(props.cards, GetSortFunction(props.sortBy, props.sortOrder)),\r\n        };\r\n        switch (props.style) {\r\n            case \"List\":\r\n                return <ListCollecion {...passedProps} />;\r\n            case \"Images\":\r\n                return <ImagesCollecion {...passedProps} />;\r\n            case \"Compressed\":\r\n                return <CompressedCollecion {...passedProps} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {props.sectionName !== SectionName.Default && <Typography variant=\"h6\">{props.sectionName}</Typography>}\r\n            {renderCollection()}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default CollectionPreview;\r\n","import { Button, ButtonGroup, Tooltip, Typography } from \"@material-ui/core\";\r\nimport ViewHeadlineIcon from \"@material-ui/icons/ViewHeadline\";\r\nimport ViewListIcon from \"@material-ui/icons/ViewList\";\r\nimport ViewModuleIcon from \"@material-ui/icons/ViewModule\";\r\nimport React from \"react\";\r\nimport styled from \"../../Styled/Theme\";\r\nimport { PreviewStyle } from \"../CollectionPreview\";\r\n\r\nconst Body = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: ${p => p.theme.spacing(1)}px;\r\n\r\n    & .MuiTypography-root {\r\n        margin-right: ${p => p.theme.spacing(1)}px;\r\n    }\r\n\r\n    & .MuiButton-root {\r\n        padding-left: 0;\r\n        padding-right: 0;\r\n    }\r\n`;\r\n\r\nconst IconForStyle = (style: PreviewStyle) => {\r\n    switch (style) {\r\n        case \"Standard\":\r\n            return <ViewListIcon />;\r\n        case \"List\":\r\n            return <ViewHeadlineIcon />;\r\n        case \"Images\":\r\n            return <ViewModuleIcon />;\r\n    }\r\n    throw Error(`Style ${style} does not have an icon.`);\r\n};\r\n\r\ntype Props = {\r\n    style: PreviewStyle;\r\n    onToggle: (style: PreviewStyle) => void;\r\n};\r\n\r\nconst PreviewStyleToggle: React.FC<Props> = ({ style, onToggle }) => {\r\n    return (\r\n        <Body>\r\n            <Typography variant=\"caption\">Display:</Typography>\r\n            <ButtonGroup variant=\"outlined\" size=\"small\">\r\n                {([\"Standard\", \"List\", \"Images\"] as const).map(s => (\r\n                    <Button key={s} onClick={() => onToggle(s)} variant={style === s ? \"contained\" : undefined}>\r\n                        <Tooltip title={s}>{IconForStyle(s)}</Tooltip>\r\n                    </Button>\r\n                ))}\r\n            </ButtonGroup>\r\n        </Body>\r\n    );\r\n};\r\nexport default PreviewStyleToggle;\r\n","import ListAltIcon from \"@material-ui/icons/ListAlt\";\r\nimport React from \"react\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\nimport styled from \"../../Styled/Theme\";\r\n\r\nconst Body = styled.div`\r\n    margin-bottom: ${p => p.theme.spacing(1)}px;\r\n    margin-left: ${p => p.theme.spacing(1)}px;\r\n`;\r\n\r\ntype Props = {\r\n    show: boolean;\r\n    setShow: (show: boolean) => void;\r\n};\r\n\r\nconst ShowGroupsToggle: React.FC<Props> = ({ show, setShow }) => {\r\n    return (\r\n        <Body>\r\n            <TooltipButton size=\"small\" title={show ? \"Hide groups\" : \"Show groups\"} onClick={() => setShow(!show)}>\r\n                <ListAltIcon />\r\n            </TooltipButton>\r\n        </Body>\r\n    );\r\n};\r\nexport default ShowGroupsToggle;\r\n","import { Button, ClickAwayListener, Grow, MenuItem, MenuList, Paper, Popper } from \"@material-ui/core\";\r\nimport SortIcon from \"@material-ui/icons/Sort\";\r\nimport React from \"react\";\r\nimport styled from \"../../Styled/Theme\";\r\nimport { SortByOptions, SortOrderOptions } from \"../CollectionPreview\";\r\n\r\nconst Body = styled.div`\r\n    margin-bottom: ${p => p.theme.spacing(1)}px;\r\n`;\r\n\r\ntype Props = {\r\n    sortBy: SortByOptions;\r\n    setSortBy: (sortBy: SortByOptions) => void;\r\n    sortOrder: SortOrderOptions;\r\n    setSortOrder: (sortOrder: SortOrderOptions) => void;\r\n};\r\n\r\nconst SortToggle: React.FC<Props> = ({ sortBy, setSortBy, sortOrder, setSortOrder }) => {\r\n    const [open, setOpen] = React.useState(false);\r\n    const anchorRef = React.useRef<HTMLButtonElement>(null);\r\n\r\n    const handleToggle = () => setOpen(prevOpen => !prevOpen);\r\n    const handleClose = (event: React.MouseEvent<Document, MouseEvent>) => {\r\n        if (anchorRef.current && anchorRef.current.contains(event.target as HTMLElement)) {\r\n            return;\r\n        }\r\n\r\n        setOpen(false);\r\n    };\r\n\r\n    return (\r\n        <Body>\r\n            <Button ref={anchorRef} size=\"small\" onClick={handleToggle} startIcon={<SortIcon />}>\r\n                Sort by\r\n            </Button>\r\n            <Popper open={open} anchorEl={anchorRef.current} role={undefined} transition>\r\n                {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                        {...TransitionProps}\r\n                        style={{\r\n                            transformOrigin: placement === \"bottom\" ? \"center top\" : \"center bottom\",\r\n                        }}\r\n                    >\r\n                        <Paper elevation={5}>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MenuList>\r\n                                    {([\r\n                                        [\"Name\", \"Asc\"],\r\n                                        [\"Name\", \"Desc\"],\r\n                                        [\"Cmc\", \"Asc\"],\r\n                                        [\"Cmc\", \"Desc\"],\r\n                                        [\"Type\", \"Asc\"],\r\n                                        [\"Type\", \"Desc\"],\r\n                                        [\"Rarity\", \"Asc\"],\r\n                                        [\"Rarity\", \"Desc\"],\r\n                                    ] as const).map(([by, order]) => (\r\n                                        <MenuItem\r\n                                            key={`${by} (${order})`}\r\n                                            selected={by === sortBy && order === sortOrder}\r\n                                            onClick={event => {\r\n                                                setSortBy(by);\r\n                                                setSortOrder(order);\r\n                                            }}\r\n                                        >\r\n                                            {`${by} (${order})`}\r\n                                        </MenuItem>\r\n                                    ))}\r\n                                </MenuList>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Grow>\r\n                )}\r\n            </Popper>\r\n        </Body>\r\n    );\r\n};\r\nexport default SortToggle;\r\n","import { faGoogle } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { faClipboard, faCompressAlt, faDiceD20, faExpandAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport styled from \"./Theme\";\r\n\r\nconst IconWrap = styled.div`\r\n    width: 24px;\r\n    height: 24px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n`;\r\n\r\nexport const CompressIcon: React.FC = () => (\r\n    <IconWrap>\r\n        <FontAwesomeIcon icon={faCompressAlt} />\r\n    </IconWrap>\r\n);\r\n\r\nexport const ExpandIcon: React.FC = () => (\r\n    <IconWrap>\r\n        <FontAwesomeIcon icon={faExpandAlt} />\r\n    </IconWrap>\r\n);\r\n\r\nexport const GoogleIcon: React.FC = () => (\r\n    <IconWrap>\r\n        <FontAwesomeIcon icon={faGoogle} />\r\n    </IconWrap>\r\n);\r\n\r\nexport const ClipboardIcon: React.FC = () => (\r\n    <IconWrap>\r\n        <FontAwesomeIcon icon={faClipboard} />\r\n    </IconWrap>\r\n);\r\n\r\nexport const LifecounterIcon: React.FC = () => (\r\n    <IconWrap>\r\n        <FontAwesomeIcon icon={faDiceD20} />\r\n    </IconWrap>\r\n);\r\n","import { Dialog, DialogContent, DialogContentText, DialogTitle, Grid, TextField } from \"@material-ui/core\";\r\nimport { fade } from \"@material-ui/core/styles\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport copy from \"clipboard-copy\";\r\nimport React from \"react\";\r\nimport { useHistory, useParams } from \"react-router\";\r\nimport { AppState, DeckName, getDeckName } from \"../../State\";\r\nimport CollectionParser from \"../../Utility/CollectionParser\";\r\nimport GoogleApi from \"../../Utility/GoogleApi\";\r\nimport useThunk from \"../../Utility/useThunk\";\r\nimport Loading from \"../Loading\";\r\nimport CollectionPreview, { PreviewStyle, SortByOptions, SortOrderOptions } from \"../Previews/CollectionPreview\";\r\nimport PreviewStyleToggle from \"../Previews/Common/PreviewStyleToggle\";\r\nimport ShowGroupsToggle from \"../Previews/Common/ShowGroupsToggle\";\r\nimport SortToggle from \"../Previews/Common/SortToggle\";\r\nimport { AppletActions, AppletContent, FlexCol, Title } from \"../Styled/Grid\";\r\nimport { ClipboardIcon, CompressIcon, ExpandIcon } from \"../Styled/Icons\";\r\nimport styled, { css } from \"../Styled/Theme\";\r\nimport TooltipButton from \"../Styled/TooltipButton\";\r\n\r\nconst SectionRow = styled.div<{ scrollable: boolean }>`\r\n    margin-bottom: ${p => p.theme.spacing(2)}px;\r\n    ${p =>\r\n        p.scrollable &&\r\n        css`\r\n            width: 100%;\r\n            overflow-x: auto;\r\n            overflow-y: hidden;\r\n        `}\r\n`;\r\n\r\nconst ExportRow = styled(FlexCol)`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: ${p => p.theme.spacing(1)}px;\r\n\r\n    & .MuiDialogContentText-root {\r\n        flex-grow: 1;\r\n        margin-bottom: 0;\r\n    }\r\n`;\r\n\r\nconst AppletBackground = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    width: 75%;\r\n    z-index: 0;\r\n\r\n    & img {\r\n        width: 100%;\r\n    }\r\n\r\n    &:after {\r\n        content: \"\";\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        display: inline-block;\r\n        background-image: radial-gradient(\r\n            ellipse at top 35% right 35%,\r\n            ${p => fade(p.theme.palette.background.paper, 0.8)} 0%,\r\n            ${p => p.theme.palette.background.paper} 70%\r\n        );\r\n    }\r\n`;\r\n\r\nconst Body = styled.div`\r\n    z-index: 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n`;\r\n\r\ntype Params = {\r\n    deckName: string;\r\n};\r\n\r\nconst DeckPreview: React.FC = () => {\r\n    let { deckName } = useParams<Params>();\r\n    deckName = decodeURIComponent(deckName);\r\n\r\n    const history = useHistory();\r\n    const [state, dispatch] = React.useContext(AppState);\r\n    const deleteDeck = useThunk(AppState, GoogleApi.deleteDeck);\r\n    const deck = state.decks[deckName];\r\n\r\n    const [expanded, setExpanded] = React.useState(true);\r\n    const [exportOpened, setExportOpened] = React.useState(false);\r\n    const [style, setStyle] = React.useState<PreviewStyle>(\"List\");\r\n    const [sortBy, setSortBy] = React.useState<SortByOptions>(\"Cmc\");\r\n    const [sortOrder, setSortOrder] = React.useState<SortOrderOptions>(\"Asc\");\r\n    const [showGroups, setShowGroups] = React.useState(false);\r\n\r\n    React.useEffect(() => {\r\n        dispatch({ type: \"SelectDeck\", name: deckName });\r\n        // eslint-disable-next-line\r\n    }, [deckName, deck]);\r\n\r\n    const closePreview = () => history.push(\"/\");\r\n    const toggleExpanded = () => setExpanded(e => !e);\r\n    const onDeleteDeck = () => {\r\n        history.push(\"/\");\r\n        deleteDeck({ name: deckName, id: state.files[deckName] });\r\n    };\r\n    const onSaveChanges = () =>\r\n        GoogleApi.updateFile({ id: state.files[deckName], fileContent: CollectionParser.deserialize(deck.cards) }).then(() =>\r\n            dispatch({ type: \"UpdateDeck\", name: deckName, isDirty: false })\r\n        );\r\n    const onExportOpen = () => setExportOpened(true);\r\n    const onExportClose = () => setExportOpened(false);\r\n\r\n    if (deck === undefined) {\r\n        return <Loading />;\r\n    }\r\n\r\n    return (\r\n        <AppletContent>\r\n            <AppletBackground>\r\n                <img src={deck.previewUrl} alt=\"\" />\r\n            </AppletBackground>\r\n            <Body>\r\n                <Grid container direction=\"row\" justify=\"space-between\">\r\n                    <Grid item>\r\n                        <Title>{getDeckName(deck.name)}</Title>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <TooltipButton title={expanded ? \"Compress\" : \"Expand\"} size=\"small\" onClick={toggleExpanded}>\r\n                            {expanded ? <CompressIcon /> : <ExpandIcon />}\r\n                        </TooltipButton>\r\n                        <TooltipButton title=\"Close preview\" size=\"small\" onClick={closePreview}>\r\n                            <CloseIcon />\r\n                        </TooltipButton>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container justify=\"space-between\">\r\n                    <SortToggle sortBy={sortBy} setSortBy={setSortBy} sortOrder={sortOrder} setSortOrder={setSortOrder} />\r\n                    <ShowGroupsToggle show={showGroups} setShow={setShowGroups} />\r\n                    <FlexCol />\r\n                    {expanded && <PreviewStyleToggle style={style} onToggle={setStyle} />}\r\n                </Grid>\r\n                <FlexCol>\r\n                    {Object.entries(deck.cards).map(([sectionName, cards]) => (\r\n                        <SectionRow key={sectionName} scrollable={expanded && style === \"List\"}>\r\n                            <CollectionPreview\r\n                                cards={Object.values(cards).map(c => ({ ...c, ...(state.cardList[c.name] ?? {}) })) as any}\r\n                                style={expanded ? style : \"Compressed\"}\r\n                                actions={deckName === DeckName.Wishlist ? \"SearchWishlist\" : \"Deck\"}\r\n                                sortBy={sortBy}\r\n                                sortOrder={sortOrder}\r\n                                showGroups={showGroups}\r\n                                deckName={deckName}\r\n                                sectionName={sectionName}\r\n                            />\r\n                        </SectionRow>\r\n                    ))}\r\n                </FlexCol>\r\n                <AppletActions>\r\n                    <TooltipButton title=\"Export deck\" onClick={onExportOpen}>\r\n                        <GetAppIcon />\r\n                    </TooltipButton>\r\n                    {deckName !== DeckName.Collection && deckName !== DeckName.Wishlist && (\r\n                        <TooltipButton title=\"Delete deck\" onClick={onDeleteDeck}>\r\n                            <DeleteIcon />\r\n                        </TooltipButton>\r\n                    )}\r\n                    {deck.isDirty && (\r\n                        <TooltipButton title=\"Save changes\" onClick={onSaveChanges} background=\"primary\">\r\n                            <SaveIcon />\r\n                        </TooltipButton>\r\n                    )}\r\n                </AppletActions>\r\n            </Body>\r\n            <Dialog open={exportOpened} onClose={onExportClose} aria-labelledby=\"export-deck-dialog\" fullWidth maxWidth=\"md\">\r\n                <DialogTitle id=\"import-deck-dialog\">Export</DialogTitle>\r\n                <DialogContent>\r\n                    <ExportRow>\r\n                        <DialogContentText>Copy exported text below.</DialogContentText>\r\n                        <TooltipButton title=\"Copy to clipboard\" onClick={() => copy(CollectionParser.deserialize(deck.cards))}>\r\n                            <ClipboardIcon />\r\n                        </TooltipButton>\r\n                    </ExportRow>\r\n                    <TextField\r\n                        label=\"Export\"\r\n                        multiline\r\n                        rows=\"15\"\r\n                        fullWidth\r\n                        variant=\"outlined\"\r\n                        value={CollectionParser.deserialize(deck.cards)}\r\n                        InputProps={{\r\n                            readOnly: true,\r\n                        }}\r\n                    />\r\n                </DialogContent>\r\n            </Dialog>\r\n        </AppletContent>\r\n    );\r\n};\r\n\r\nexport default DeckPreview;\r\n","import {\r\n    Button,\r\n    Checkbox,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControlLabel,\r\n    FormGroup,\r\n    TextField,\r\n    Tooltip,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\nimport React from \"react\";\r\nimport Scry from \"../../Utility/Scry\";\r\nimport { ScryCardColor } from \"../../Utility/Scry/Types\";\r\nimport { AppletActions, AppletContent, FlexCol, Title } from \"../Styled/Grid\";\r\nimport SymbolTypography from \"../Styled/SymbolTypography\";\r\nimport styled from \"../Styled/Theme\";\r\n\r\n// TODO: remove from here & make it reusable?\r\nconst PreviewRow = styled.div`\r\n    display: flex;\r\n    margin-top: ${p => p.theme.spacing(1)}px;\r\n    align-items: center;\r\n\r\n    & .MuiAutocomplete-root {\r\n        flex-grow: 1;\r\n        margin-right: ${p => p.theme.spacing(1)}px;\r\n    }\r\n`;\r\n\r\n// Reusable?\r\ninterface CardSearchFilter {\r\n    /** Array of selected colors inside advanced search */\r\n    colors: Record<ScryCardColor, boolean>;\r\n    /** Checkbox whether the search should match exact colors */\r\n    colorExactMatch: boolean;\r\n\r\n    /** Converted Mana Cost */\r\n    cmc: number;\r\n    /** Type: equal [=], less than [<], more than [>] */\r\n    cmcType: string;\r\n\r\n    // type: string;\r\n    // subtype: string;\r\n\r\n    // legality: string;\r\n}\r\n\r\nconst initCardSearchFilter = (): CardSearchFilter => {\r\n    return {\r\n        colors: { R: false, G: false, U: false, B: false, W: false },\r\n        colorExactMatch: false,\r\n        cmc: 0,\r\n        cmcType: \"=\",\r\n    };\r\n};\r\n\r\nconst CardSearch: React.FC = () => {\r\n    // Card name & autocomplete structures\r\n    const [cardName, setCardName] = React.useState<string>(\"\");\r\n    const [autoompleteOptions, setAutocompleteOptions] = React.useState<string[]>([]);\r\n\r\n    const updateAutoComplete = (name: string) => {\r\n        setCardName(name);\r\n        Scry.Cards.Autocomplete(cardName).then(names => setAutocompleteOptions(names));\r\n    };\r\n\r\n    const performSearch = () => {\r\n        alert(JSON.stringify(filter));\r\n    };\r\n\r\n    // Advanced Filters Dialog structures\r\n    const [dialogOpen, setDialogOpen] = React.useState<boolean>(false);\r\n    const openDialog = () => setDialogOpen(true);\r\n    const closeDialog = () => setDialogOpen(false);\r\n\r\n    // Filter structures\r\n    const [filter, setFilter] = React.useState<CardSearchFilter>(initCardSearchFilter());\r\n\r\n    const resetFilter = () => setFilter(initCardSearchFilter());\r\n    const handleColors = (color: ScryCardColor) => (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const newFilter = { ...filter };\r\n        newFilter.colors[color] = event.target.checked;\r\n        setFilter(newFilter);\r\n    };\r\n\r\n    return (\r\n        <AppletContent>\r\n            <Title>Card search</Title>\r\n\r\n            <FlexCol>\r\n                <PreviewRow>\r\n                    <Autocomplete\r\n                        freeSolo\r\n                        autoHighlight\r\n                        disableClearable\r\n                        options={autoompleteOptions}\r\n                        inputValue={cardName}\r\n                        onInputChange={(e, value) => updateAutoComplete(value)}\r\n                        renderInput={params => <TextField {...params} label=\"Card name\" variant=\"outlined\" fullWidth />}\r\n                    />\r\n                </PreviewRow>\r\n            </FlexCol>\r\n\r\n            <Dialog open={dialogOpen} onClose={closeDialog} aria-labelledby=\"advanced-card-search-dialog\" maxWidth=\"md\" fullWidth>\r\n                <DialogTitle id=\"advanced-card-search-dialog\">Advanced card search</DialogTitle>\r\n                <DialogContent>\r\n                    <Typography variant=\"subtitle2\">Filter by color</Typography>\r\n                    <FormGroup row>\r\n                        <FormControlLabel\r\n                            label={<SymbolTypography text=\"{R} Red\" />}\r\n                            control={<Checkbox checked={filter.colors.R} onChange={handleColors(\"R\")} />}\r\n                        />\r\n                        <FormControlLabel\r\n                            label={<SymbolTypography text=\"{G} Green\" />}\r\n                            control={<Checkbox checked={filter.colors.G} onChange={handleColors(\"G\")} />}\r\n                        />\r\n                        <FormControlLabel\r\n                            label={<SymbolTypography text=\"{U} Blue\" />}\r\n                            control={<Checkbox checked={filter.colors.U} onChange={handleColors(\"U\")} />}\r\n                        />\r\n                        <FormControlLabel\r\n                            label={<SymbolTypography text=\"{B} Black\" />}\r\n                            control={<Checkbox checked={filter.colors.B} onChange={handleColors(\"B\")} />}\r\n                        />\r\n                        <FormControlLabel\r\n                            label={<SymbolTypography text=\"{W} White\" />}\r\n                            control={<Checkbox checked={filter.colors.W} onChange={handleColors(\"W\")} />}\r\n                        />\r\n                    </FormGroup>\r\n\r\n                    <FormControlLabel\r\n                        label=\"Exact color match?\"\r\n                        control={<Checkbox checked={filter.colorExactMatch} onChange={e => setFilter({ ...filter, colorExactMatch: e.target.checked })} />}\r\n                    />\r\n\r\n                    {/* <br />\r\n\r\n                        <ul>\r\n                            <li>[DONE] Filter by color identity (only selected colors or all cards with selected colors)</li>\r\n                            <li>Filter by converted mana cost (equal, less than, more than)</li>\r\n                            <li>Filter by type/subtype (restrict subtype options based on type)</li>\r\n                            <li>Filter by format legality (choose one)</li>\r\n                        </ul> */}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={resetFilter} color=\"primary\">\r\n                        Reset\r\n                    </Button>\r\n                    <Button onClick={closeDialog} color=\"primary\">\r\n                        OK\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <AppletActions>\r\n                <Tooltip title=\"Advanced search filter\">\r\n                    <Button onClick={openDialog}>\r\n                        <FilterListIcon />\r\n                    </Button>\r\n                </Tooltip>\r\n                <Tooltip title=\"Search for results\">\r\n                    <Button onClick={performSearch}>\r\n                        <SearchIcon />\r\n                    </Button>\r\n                </Tooltip>\r\n            </AppletActions>\r\n        </AppletContent>\r\n    );\r\n};\r\n\r\nexport default CardSearch;\r\n","import { Avatar, Paper, Typography } from \"@material-ui/core\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport CollectionsIcon from \"@material-ui/icons/Collections\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AppState, Deck, DeckName, getDeckName, SectionName } from \"../../State\";\r\nimport Scry from \"../../Utility/Scry\";\r\nimport SymbolTypography from \"../Styled/SymbolTypography\";\r\nimport styled, { css } from \"../Styled/Theme\";\r\n\r\nconst DeckBoxBody = styled.div`\r\n    padding-bottom: 65%;\r\n    width: 100%;\r\n    height: 0;\r\n    position: relative;\r\n`;\r\n\r\nconst DeckBoxAvatar = styled(Avatar)`\r\n    background-color: ${p => p.theme.palette.background.default};\r\n    color: ${p => p.theme.palette.text.secondary};\r\n    border-radius: ${p => p.theme.spacing(4)}px;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n`;\r\n\r\nconst DeckBoxTitle = styled(Paper)`\r\n    position: absolute;\r\n    bottom: 0;\r\n    width: 100%;\r\n    padding: ${p => p.theme.spacing(1, 2)};\r\n    background-color: ${p => p.theme.palette.grey[900]};\r\n    border-radius: ${p => p.theme.spacing(4)}px;\r\n\r\n    & .MuiTypography-root {\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n`;\r\n\r\nconst DeckColorIdentity = styled.div`\r\n    position: absolute;\r\n    top: -75%;\r\n    right: 50%;\r\n    transform: translateX(50%);\r\n`;\r\n\r\nconst LargeIcon = css`\r\n    width: 50%;\r\n    height: 50%;\r\n`;\r\n\r\nconst LargeFavoriteIcon = styled(FavoriteIcon)`\r\n    ${LargeIcon}\r\n`;\r\nconst LargeCollectionsIcon = styled(CollectionsIcon)`\r\n    ${LargeIcon}\r\n`;\r\nconst LargeAddCircleOutlineIcon = styled(AddCircleOutlineIcon)`\r\n    ${LargeIcon}\r\n`;\r\n\r\nconst getDeckIcon = (name: string) => {\r\n    return name === DeckName.Wishlist ? <LargeFavoriteIcon /> : <LargeCollectionsIcon />;\r\n};\r\n\r\ntype Props = {\r\n    deck?: Deck;\r\n};\r\n\r\nconst DeckBox: React.FC<Props> = ({ deck }) => {\r\n    const [state] = React.useContext(AppState);\r\n    if (!deck) {\r\n        return (\r\n            <DeckBoxBody>\r\n                <Link to=\"/addDeck\">\r\n                    <DeckBoxAvatar variant=\"rounded\" alt=\"Add deck\">\r\n                        <LargeAddCircleOutlineIcon />\r\n                    </DeckBoxAvatar>\r\n                </Link>\r\n            </DeckBoxBody>\r\n        );\r\n    }\r\n    return (\r\n        <DeckBoxBody>\r\n            <Link to={`/decks/${encodeURIComponent(deck.name)}`}>\r\n                <DeckBoxAvatar variant=\"rounded\" alt={getDeckName(deck.name)} src={deck.previewUrl}>\r\n                    {getDeckIcon(deck.name)}\r\n                </DeckBoxAvatar>\r\n                <DeckBoxTitle>\r\n                    {deck.name !== DeckName.Collection && deck.name !== DeckName.Wishlist && (\r\n                        <DeckColorIdentity>\r\n                            <SymbolTypography\r\n                                variant=\"h3\"\r\n                                text={Scry.getColorIdentity(...Object.keys(deck.cards[SectionName.Default]).map(c => state.cardList[c]))}\r\n                            />\r\n                        </DeckColorIdentity>\r\n                    )}\r\n                    <Typography variant=\"h6\">{getDeckName(deck.name)}</Typography>\r\n                </DeckBoxTitle>\r\n            </Link>\r\n        </DeckBoxBody>\r\n    );\r\n};\r\nexport default DeckBox;\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { AppState, DeckName } from \"../../State\";\r\nimport { AppletContent, Title } from \"../Styled/Grid\";\r\nimport DeckBox from \"./DeckBox\";\r\n\r\nconst DeckList: React.FC = () => {\r\n    const [state] = React.useContext(AppState);\r\n    return (\r\n        <AppletContent>\r\n            <Title>Your decks</Title>\r\n            <Grid container spacing={6} direction=\"column\">\r\n                <Grid item container spacing={1}>\r\n                    <Grid item xs={12} sm={6} lg={3}>\r\n                        <DeckBox deck={state.decks[DeckName.Collection]} />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6} lg={3}>\r\n                        <DeckBox deck={state.decks[DeckName.Wishlist]} />\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item container spacing={1}>\r\n                    <Grid item xs={12} sm={6} lg={3}>\r\n                        <DeckBox />\r\n                    </Grid>\r\n                    {Object.values(state.decks)\r\n                        .filter(deck => deck.name !== DeckName.Collection && deck.name !== DeckName.Wishlist)\r\n                        .map(deck => (\r\n                            <Grid key={deck.name} item xs={12} sm={6} lg={3}>\r\n                                <DeckBox deck={deck} />\r\n                            </Grid>\r\n                        ))}\r\n                </Grid>\r\n            </Grid>\r\n        </AppletContent>\r\n    );\r\n};\r\n\r\nexport default DeckList;\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport CardSearch from \"./CardSearch\";\r\nimport DeckList from \"./DeckList\";\r\n\r\nconst Home: React.FC = () => {\r\n    return (\r\n        <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n                <CardSearch />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <DeckList />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { MakeTuple } from \"../../Utility\";\r\nimport DeepReadonly from \"../../Utility/DeepReadonly\";\r\nimport { Action } from \"./Actions\";\r\n\r\nexport const instantiatePlayers = (count: number): PlayerInfoArray => Array.from(Array(count), (_, i) => ({ name: `Player ${i + 1}`, life: 20, counters: {} }));\r\n\r\nexport const Counters = MakeTuple(\"{W}\", \"{U}\", \"{B}\", \"{R}\", \"{G}\", \"{C}\", \"{S}\", \"{E}\", \"{B/P}\");\r\nexport type CounterVariant = typeof Counters[number];\r\nexport type PlayerCounters = Partial<Record<CounterVariant, number>>;\r\n\r\nexport type PlayerInfo = {\r\n    name: string;\r\n    life: number;\r\n    counters: PlayerCounters;\r\n};\r\n\r\nexport type PlayerInfoArray = DeepReadonly<PlayerInfo[]>;\r\n\r\nexport type LifecounterStateT = DeepReadonly<{\r\n    players: PlayerInfoArray;\r\n    startingLife: number;\r\n    startingPlayer: number | null;\r\n}>;\r\n\r\nexport const initialState: LifecounterStateT = {\r\n    players: instantiatePlayers(2),\r\n    startingLife: 20,\r\n    startingPlayer: null,\r\n};\r\n\r\nexport const LifecounterState = React.createContext<[LifecounterStateT, React.Dispatch<Action>]>([initialState, undefined as any]);\r\n","import omit from \"lodash-es/omit\";\r\nimport { instantiatePlayers, LifecounterStateT, PlayerInfoArray } from \".\";\r\nimport { chainReducers, combineReducers } from \"../../Utility\";\r\nimport { Action } from \"./Actions\";\r\nimport { mapValues } from \"lodash-es\";\r\n\r\nconst playerReducer = (state: PlayerInfoArray, action: Action): PlayerInfoArray => {\r\n    switch (action.type) {\r\n        case \"SetPlayers\":\r\n            return state.length < action.count ? [...state, ...instantiatePlayers(action.count).slice(state.length)] : state.slice(0, action.count);\r\n        case \"SetName\":\r\n            return state.map((p, i) => (i === action.player ? { ...p, name: action.name } : p));\r\n        case \"ToggleCounter\":\r\n            return state.map((p, i) =>\r\n                i === action.player\r\n                    ? { ...p, counters: p.counters[action.counter] === undefined ? { ...p.counters, [action.counter]: 0 } : omit(p.counters, action.counter) }\r\n                    : p\r\n            );\r\n        case \"SetPlayerCounter\":\r\n            return state.map((p, i) =>\r\n                i === action.player\r\n                    ? action.counter\r\n                        ? { ...p, counters: { ...p.counters, [action.counter]: p.counters[action.counter]! + action.value } }\r\n                        : { ...p, life: p.life + action.value }\r\n                    : p\r\n            );\r\n        case \"SetStartingLife\":\r\n            return state.map(p => ({ ...p, life: action.value }));\r\n    }\r\n    return state;\r\n};\r\n\r\nconst startingLifeReducer = (state: number, action: Action): number => {\r\n    switch (action.type) {\r\n        case \"SetStartingLife\":\r\n            return action.value;\r\n    }\r\n    return state;\r\n};\r\n\r\nconst startingPlayerReducer = (state: number | null, action: Action): number | null => {\r\n    switch (action.type) {\r\n        case \"SetStartingPlayer\":\r\n            return action.player;\r\n    }\r\n    return state;\r\n};\r\n\r\nexport const combinedReducer = combineReducers<LifecounterStateT, Action>({\r\n    players: playerReducer,\r\n    startingLife: startingLifeReducer,\r\n    startingPlayer: startingPlayerReducer,\r\n});\r\n\r\nconst restartReducer = (state: LifecounterStateT, action: Action): LifecounterStateT => {\r\n    switch (action.type) {\r\n        case \"Restart\":\r\n            return {\r\n                ...state,\r\n                players: state.players.map(p => ({ ...p, life: state.startingLife, counters: mapValues(p.counters, () => 0) })),\r\n                startingPlayer: null,\r\n            };\r\n    }\r\n    return state;\r\n};\r\n\r\nexport const reducer = chainReducers<LifecounterStateT, Action>(combinedReducer, restartReducer);\r\n","import React from \"react\";\r\n\r\nconst useDimensions = <T extends HTMLElement>() => {\r\n    const ref = React.useRef<T>(null);\r\n    const [width, setWidth] = React.useState(0);\r\n    const [height, setHeight] = React.useState(0);\r\n\r\n    React.useEffect(() => {\r\n        setWidth(ref.current?.clientWidth ?? 0);\r\n        setHeight(ref.current?.clientHeight ?? 0);\r\n    }, []);\r\n    \r\n    return [ref, width, height] as const;\r\n};\r\nexport default useDimensions;\r\n","import { Button, Fade, Typography, TypographyTypeMap, useMediaQuery } from \"@material-ui/core\";\r\nimport debounce from \"lodash-es/debounce\";\r\nimport React from \"react\";\r\nimport { Flex } from \"reflexbox\";\r\nimport { CounterVariant, LifecounterState } from \"../../../State/Lifecounter\";\r\nimport useDimensions from \"../../../Utility/useDimensions\";\r\nimport SymbolTypography from \"../../Styled/SymbolTypography\";\r\nimport styled, { css, MainTheme } from \"../../Styled/Theme\";\r\n\r\nconst Wrapper = styled.div<{ flexBasis: string; players: number }>`\r\n    position: relative;\r\n    height: ${p => (p.players > 4 ? 100.0 / 3.0 : 50)}%;\r\n    flex-basis: ${p => p.flexBasis};\r\n`;\r\n\r\nconst Body = styled(Flex)<{ rotate: number; w: number; h: number }>`\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    background: radial-gradient(circle, ${p => p.theme.palette.background.paper} 0%, ${p => p.theme.palette.background.default} 75%);\r\n    border: 2px dashed ${p => p.theme.palette.background.paper};\r\n    transform: rotate(${p => p.rotate}deg) translate(-50%, -50%);\r\n    transform-origin: top left;\r\n    ${p =>\r\n        Math.abs(p.rotate) === 90\r\n            ? css`\r\n                  width: ${p.h}px;\r\n                  height: ${p.w}px;\r\n              `\r\n            : css`\r\n                  width: ${p.w}px;\r\n                  height: ${p.h}px;\r\n              `}\r\n`;\r\n\r\nconst Counter = styled(Flex)`\r\n    position: relative;\r\n`;\r\n\r\nconst IncrementButton = styled(Button)<{ position: \"left\" | \"right\" }>`\r\n    position: absolute;\r\n    ${p => p.position}: 0;\r\n    ${p => `padding-${p.position}`}: 10%;\r\n    justify-content: ${p => `flex-${p.position === \"left\" ? \"start\" : \"end\"}`};\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 50%;\r\n`;\r\n\r\nconst CounterBackground = styled(SymbolTypography)`\r\n    position: absolute;\r\n    opacity: 0.1;\r\n    transform: scale(2);\r\n    line-height: 0;\r\n`;\r\n\r\nconst DebouncedValue = styled(Typography)`\r\n    position: absolute;\r\n    top: 0;\r\n`;\r\n\r\nconst IconButton = styled(Button)<{ styled: { selected: boolean; tight?: boolean } }>`\r\n    min-width: unset;\r\n    ${p =>\r\n        !p.styled.selected &&\r\n        css`\r\n            filter: grayscale(1);\r\n            opacity: 0.25;\r\n        `}\r\n    ${p =>\r\n        p.styled.tight &&\r\n        css`\r\n            padding: 4px;\r\n        `}\r\n`;\r\n\r\nconst StartingPlayerOverlay = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background-color: rgba(0, 0, 0, 0.25);\r\n    z-index: 1;\r\n`;\r\n\r\ntype PlayerCount = 2 | 3 | 4 | 5 | 6;\r\ntype PlayerTransform = {\r\n    rotate: number;\r\n    flexBasis: string;\r\n    counter?: TypographyTypeMap[\"props\"][\"variant\"];\r\n};\r\n\r\nconst PlayerTransforms: Record<PlayerCount, PlayerTransform[]> = {\r\n    2: [\r\n        { rotate: 180, flexBasis: \"100%\" },\r\n        { rotate: 0, flexBasis: \"100%\" },\r\n    ],\r\n    3: [\r\n        { rotate: 90, flexBasis: \"50%\", counter: \"body1\" },\r\n        { rotate: -90, flexBasis: \"50%\", counter: \"body1\" },\r\n        { rotate: 0, flexBasis: \"100%\" },\r\n    ],\r\n    4: [\r\n        { rotate: 90, flexBasis: \"50%\", counter: \"body1\" },\r\n        { rotate: -90, flexBasis: \"50%\", counter: \"body1\" },\r\n        { rotate: 90, flexBasis: \"50%\", counter: \"body1\" },\r\n        { rotate: -90, flexBasis: \"50%\", counter: \"body1\" },\r\n    ],\r\n    5: [\r\n        { rotate: 180, flexBasis: \"100%\" },\r\n        { rotate: 90, flexBasis: \"50%\", counter: \"body2\" },\r\n        { rotate: -90, flexBasis: \"50%\", counter: \"body2\" },\r\n        { rotate: 90, flexBasis: \"50%\", counter: \"body2\" },\r\n        { rotate: -90, flexBasis: \"50%\", counter: \"body2\" },\r\n    ],\r\n    6: [\r\n        { rotate: 90, flexBasis: \"50%\", counter: \"body2\" },\r\n        { rotate: -90, flexBasis: \"50%\", counter: \"body2\" },\r\n        { rotate: 90, flexBasis: \"50%\", counter: \"body2\" },\r\n        { rotate: -90, flexBasis: \"50%\", counter: \"body2\" },\r\n        { rotate: 90, flexBasis: \"50%\", counter: \"body2\" },\r\n        { rotate: -90, flexBasis: \"50%\", counter: \"body2\" },\r\n    ],\r\n};\r\n\r\ntype Props = {\r\n    player: number;\r\n};\r\nconst PlayerCard: React.FC<Props> = ({ player }) => {\r\n    const [state, dispatch] = React.useContext(LifecounterState);\r\n    const [ref, width, height] = useDimensions<HTMLDivElement>();\r\n\r\n    const [activeCounter, setActiveCounter] = React.useState<CounterVariant>();\r\n    const [debouncedValue, setDebouncedValue] = React.useState<number>(0);\r\n\r\n    const { name, life, counters } = state.players[player];\r\n    const { startingPlayer } = state;\r\n    const activeValue = activeCounter ? counters[activeCounter]! : life;\r\n    const activeDiff = activeValue - debouncedValue;\r\n\r\n    // Reset debounce after counter changes\r\n    React.useEffect(\r\n        () => setDebouncedValue(activeValue),\r\n        // eslint-disable-next-line\r\n        [activeCounter]\r\n    );\r\n\r\n    // Reset state after restart\r\n    React.useEffect(\r\n        () => {\r\n            setDebouncedValue(activeValue);\r\n            setActiveCounter(undefined);\r\n        },\r\n        // eslint-disable-next-line\r\n        [startingPlayer]\r\n    );\r\n\r\n    const debouncedSet = React.useCallback(debounce(setDebouncedValue, 1000), []);\r\n    const setCounter = (value: number) => {\r\n        debouncedSet(activeValue + value);\r\n        dispatch({ type: \"SetPlayerCounter\", player, value, counter: activeCounter });\r\n    };\r\n\r\n    const clearStartingPlayer = () => dispatch({ type: \"SetStartingPlayer\", player: null });\r\n\r\n    const isMobile = useMediaQuery(MainTheme.breakpoints.down(\"xs\"));\r\n    const valueTextVariant = React.useMemo(() => (isMobile ? \"h2\" : \"h1\"), [isMobile]);\r\n\r\n    const { rotate, flexBasis, counter } = PlayerTransforms[state.players.length as PlayerCount][player];\r\n    return (\r\n        <Wrapper ref={ref} flexBasis={flexBasis} players={state.players.length}>\r\n            <Body rotate={rotate} w={width} h={height} flexGrow={1} flexDirection=\"column\" justifyContent=\"center\">\r\n                <Fade in={player === startingPlayer}>\r\n                    <StartingPlayerOverlay onClick={clearStartingPlayer} />\r\n                </Fade>\r\n                <Flex py={3} height=\"20%\" justifyContent=\"center\" alignItems=\"center\">\r\n                    <Typography variant=\"caption\" align=\"center\">\r\n                        {name}\r\n                    </Typography>\r\n                </Flex>\r\n                <Counter flexGrow={1} justifyContent=\"center\" alignItems=\"center\">\r\n                    <CounterBackground variant={valueTextVariant} text={activeCounter ?? \"{PW}\"} />\r\n                    {activeDiff !== 0 && (\r\n                        <DebouncedValue color=\"primary\" variant=\"h6\">\r\n                            {activeDiff > 0 ? \"+\" : \"\"}\r\n                            {activeDiff}\r\n                        </DebouncedValue>\r\n                    )}\r\n                    <IncrementButton position=\"left\" onClick={() => setCounter(-1)}>\r\n                        <Typography variant=\"h6\">-</Typography>\r\n                    </IncrementButton>\r\n                    <Typography variant={valueTextVariant} align=\"center\">\r\n                        {activeValue}\r\n                    </Typography>\r\n                    <IncrementButton position=\"right\" onClick={() => setCounter(1)}>\r\n                        <Typography variant=\"h6\">+</Typography>\r\n                    </IncrementButton>\r\n                </Counter>\r\n                <Flex mx={3} height=\"20%\" justifyContent=\"space-evenly\" alignItems=\"center\">\r\n                    {Object.keys(counters).map(c => (\r\n                        <Flex key={c} justifyContent=\"center\" alignItems=\"center\">\r\n                            <IconButton\r\n                                styled={{\r\n                                    selected: activeCounter === c,\r\n                                    tight: counter === \"body2\",\r\n                                }}\r\n                                onClick={() => setActiveCounter(activeCounter === c ? undefined : (c as CounterVariant))}\r\n                            >\r\n                                <SymbolTypography variant={counter ?? \"h6\"} text={`${counters[c as CounterVariant]} ${c}`} />\r\n                            </IconButton>\r\n                        </Flex>\r\n                    ))}\r\n                </Flex>\r\n            </Body>\r\n        </Wrapper>\r\n    );\r\n};\r\nexport default PlayerCard;\r\n","import { Dialog, IconButton, useMediaQuery } from \"@material-ui/core\";\r\nimport CasinoIcon from \"@material-ui/icons/Casino\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport NoSleep from \"nosleep.js\";\r\nimport React from \"react\";\r\nimport { Flex } from \"reflexbox\";\r\nimport { LifecounterState } from \"../../../State/Lifecounter\";\r\nimport { AppletActions } from \"../../Styled/Grid\";\r\nimport styled, { MainTheme } from \"../../Styled/Theme\";\r\nimport TooltipButton from \"../../Styled/TooltipButton\";\r\nimport PlayerCard from \"./PlayerCard\";\r\n\r\nconst OptionsButton = styled(IconButton)`\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n`;\r\n\r\nconst LifecounterDialog: React.FC = () => {\r\n    const isMobile = useMediaQuery(MainTheme.breakpoints.down(\"xs\"));\r\n    const [open, setOpen] = React.useState(false);\r\n    const [optionsOpen, setOptionsOpen] = React.useState(false);\r\n\r\n    const [state, dispatch] = React.useContext(LifecounterState);\r\n\r\n    var noSleep = React.useMemo(() => new NoSleep(), []);\r\n    React.useEffect(() => () => noSleep.disable(), [noSleep]);\r\n\r\n    const handleOpen = () => {\r\n        noSleep.enable();\r\n        restartGame();\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        noSleep.disable();\r\n        setOpen(false);\r\n        setOptionsOpen(false);\r\n    };\r\n\r\n    const handleOptionsOpen = () => {\r\n        setOptionsOpen(true);\r\n    };\r\n\r\n    const handleOptionsClose = () => {\r\n        setOptionsOpen(false);\r\n    };\r\n\r\n    const setStartingPlayer = () => {\r\n        dispatch({ type: \"SetStartingPlayer\", player: Math.round(Math.random() * (state.players.length - 1)) });\r\n        handleOptionsClose();\r\n    };\r\n\r\n    const restartGame = () => {\r\n        dispatch({ type: \"Restart\" });\r\n        setStartingPlayer();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <AppletActions>\r\n                <TooltipButton title=\"Start match\" onClick={handleOpen} background=\"primary\">\r\n                    <PlayArrowIcon />\r\n                </TooltipButton>\r\n            </AppletActions>\r\n            <Dialog fullScreen={isMobile} open={open} onClose={handleClose}>\r\n                <Flex flexWrap=\"wrap\" width={isMobile ? \"100%\" : \"550px\"} height={isMobile ? \"100%\" : \"900px\"}>\r\n                    {state.players.map((_, i) => (\r\n                        <PlayerCard key={i} player={i} />\r\n                    ))}\r\n                </Flex>\r\n\r\n                <OptionsButton onClick={handleOptionsOpen}>\r\n                    <SettingsIcon />\r\n                </OptionsButton>\r\n                <Dialog open={optionsOpen} onClose={handleOptionsClose}>\r\n                    <IconButton onClick={restartGame}>\r\n                        <RefreshIcon />\r\n                    </IconButton>\r\n                    <IconButton onClick={handleClose}>\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                    <IconButton onClick={setStartingPlayer}>\r\n                        <CasinoIcon />\r\n                    </IconButton>\r\n                </Dialog>\r\n            </Dialog>\r\n        </>\r\n    );\r\n};\r\nexport default LifecounterDialog;\r\n","import { Button, ButtonGroup, TextField } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { Box, Flex } from \"reflexbox\";\r\nimport { Counters, CounterVariant, LifecounterState } from \"../../../State/Lifecounter\";\r\nimport SymbolTypography from \"../../Styled/SymbolTypography\";\r\nimport styled from \"../../Styled/Theme\";\r\n\r\nconst SymbolButton = styled(Button)`\r\n    padding: 7px;\r\n    padding-bottom: 3px;\r\n    min-width: 0;\r\n`;\r\n\r\nconst CenteredTextField = styled(TextField)`\r\n    & .MuiInputBase-input {\r\n        text-align: center;\r\n    }\r\n`;\r\n\r\ntype Props = {\r\n    player: number;\r\n};\r\n\r\nconst PlayerSettings: React.FC<Props> = ({ player }) => {\r\n    const [state, dispatch] = React.useContext(LifecounterState);\r\n    const { name, counters } = state.players[player];\r\n\r\n    const toggleCounter = (counter: CounterVariant) => dispatch({ type: \"ToggleCounter\", player, counter });\r\n\r\n    return (\r\n        <Flex width={[\"100%\", \"50%\", \"50%\", \"33%\"]} flexDirection=\"column\" alignItems=\"center\" my={2}>\r\n            <Box width={180} pb={2}>\r\n                <CenteredTextField value={name} onChange={e => dispatch({ type: \"SetName\", player, name: e.target.value })} fullWidth />\r\n            </Box>\r\n            <ButtonGroup>\r\n                {Counters.slice(0, 5).map(c => (\r\n                    <SymbolButton key={c} onClick={() => toggleCounter(c)} variant={counters[c] !== undefined ? \"contained\" : undefined}>\r\n                        <SymbolTypography text={c} variant=\"h5\" />\r\n                    </SymbolButton>\r\n                ))}\r\n            </ButtonGroup>\r\n            <ButtonGroup>\r\n                {Counters.slice(5).map(c => (\r\n                    <SymbolButton key={c} onClick={() => toggleCounter(c)} variant={counters[c] !== undefined ? \"contained\" : undefined}>\r\n                        <SymbolTypography text={c} variant=\"h5\" />\r\n                    </SymbolButton>\r\n                ))}\r\n            </ButtonGroup>\r\n        </Flex>\r\n    );\r\n};\r\nexport default PlayerSettings;\r\n","import { Slider, Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { Box, Flex } from \"reflexbox\";\r\nimport { initialState, LifecounterState } from \"../../../State/Lifecounter\";\r\nimport { reducer } from \"../../../State/Lifecounter/Reducers\";\r\nimport { AppletContent, Title } from \"../../Styled/Grid\";\r\nimport styled from \"../../Styled/Theme\";\r\nimport LifecounterDialog from \"./LifecounterDialog\";\r\nimport PlayerSettings from \"./PlayerSettings\";\r\n\r\nconst SliderLabel = styled(Typography)`\r\n    flex-basis: 20%;\r\n`;\r\n\r\nconst SliderValue = styled(Typography)`\r\n    flex-basis: 20px;\r\n    text-align: right;\r\n`;\r\n\r\nconst Lifecounter: React.FC = () => {\r\n    const [state, dispatch] = React.useReducer(reducer, initialState);\r\n\r\n    const [playersCount, setPlayersCount] = React.useState(state.players.length);\r\n\r\n    return (\r\n        <LifecounterState.Provider value={[state, dispatch]}>\r\n            <AppletContent>\r\n                <Title>Lifecounter</Title>\r\n                <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n                    <SliderLabel>Players</SliderLabel>\r\n                    <Box mx={3} flexGrow={1}>\r\n                        <Slider\r\n                            value={playersCount}\r\n                            onChange={(e, v) => setPlayersCount(v as number)}\r\n                            onChangeCommitted={() => dispatch({ type: \"SetPlayers\", count: playersCount })}\r\n                            step={1}\r\n                            min={2}\r\n                            max={6}\r\n                            marks\r\n                            valueLabelDisplay=\"off\"\r\n                        />\r\n                    </Box>\r\n                    <SliderValue>{playersCount}</SliderValue>\r\n                </Flex>\r\n                <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n                    <SliderLabel>Starting life</SliderLabel>\r\n                    <Box mx={3} flexGrow={1}>\r\n                        <Slider\r\n                            value={state.startingLife}\r\n                            onChange={(e, v) => dispatch({ type: \"SetStartingLife\", value: v as number })}\r\n                            step={5}\r\n                            min={10}\r\n                            max={50}\r\n                            marks\r\n                            valueLabelDisplay=\"off\"\r\n                        />\r\n                    </Box>\r\n                    <SliderValue>{state.startingLife}</SliderValue>\r\n                </Flex>\r\n                <Flex justifyContent=\"center\" flexWrap=\"wrap\">\r\n                    {state.players.map((_, i) => (\r\n                        <PlayerSettings key={i} player={i} />\r\n                    ))}\r\n                </Flex>\r\n                <LifecounterDialog />\r\n            </AppletContent>\r\n        </LifecounterState.Provider>\r\n    );\r\n};\r\nexport default Lifecounter;\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from \"@material-ui/core\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport React from \"react\";\r\nimport { AppState, LoginState } from \"../../State\";\r\nimport GoogleApi from \"../../Utility/GoogleApi\";\r\nimport { AppletContent, Title } from \"../Styled/Grid\";\r\nimport styled from \"../Styled/Theme\";\r\n\r\nconst StyledTitle = styled(DialogTitle)`\r\n    color: ${p => p.theme.palette.error.main};\r\n`;\r\n\r\nconst DeleteButton = styled(Button)`\r\n    color: ${p => p.theme.palette.error.main};\r\n`;\r\n\r\nconst ContainedDeleteButton = styled(Button)`\r\n    background-color: ${p => p.theme.palette.error.main};\r\n\r\n    &:hover {\r\n        background-color: ${p => p.theme.palette.error.light};\r\n    }\r\n`;\r\n\r\nconst UserInfo: React.FC = () => {\r\n    const { signOut } = React.useContext(LoginState);\r\n    const [state, dispatch] = React.useContext(AppState);\r\n\r\n    const [open, setOpen] = React.useState(false);\r\n    const handleDeleteData = () => {\r\n        signOut();\r\n        Object.keys(state.decks).forEach(name => GoogleApi.deleteDeck(dispatch)({ name, id: state.files[name] }));\r\n        setOpen(false);\r\n    };\r\n\r\n    return (\r\n        <AppletContent>\r\n            <Title>User info</Title>\r\n            <div>\r\n                <ContainedDeleteButton startIcon={<DeleteIcon />} variant=\"contained\" onClick={() => setOpen(true)}>\r\n                    Delete saved data\r\n                </ContainedDeleteButton>\r\n            </div>\r\n            <Dialog open={open} onClose={() => setOpen(false)}>\r\n                <StyledTitle>Delete all saved data and sign out</StyledTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        This action will delete all the data (saved decks) saved by this app in your google drive storage and sign you out. After you sign back\r\n                        in the app will create it&apos;s base required files again. This action is irreversible!\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => setOpen(false)}>Cancel</Button>\r\n                    <DeleteButton onClick={handleDeleteData}>Delete</DeleteButton>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </AppletContent>\r\n    );\r\n};\r\n\r\nexport default UserInfo;\r\n","import React from \"react\";\r\nimport { Button, Typography } from \"@material-ui/core\";\r\nimport { GoogleIcon } from \"./Styled/Icons\";\r\n\r\ntype Props = {\r\n    variant?: \"text\" | \"outlined\" | \"contained\";\r\n    onClick: () => void;\r\n};\r\n\r\nconst SignInButton: React.FC<Props> = ({ variant, onClick }: Props) => {\r\n    return (\r\n        <Button variant={variant} onClick={onClick} startIcon={<GoogleIcon />}>\r\n            <Typography noWrap>Sign in</Typography>\r\n        </Button>\r\n    );\r\n};\r\n\r\nexport default SignInButton;\r\n","import { RouteProps } from \"react-router\";\r\nimport AddDeck from \"../Components/Applets/AddDeck\";\r\nimport DeckPreview from \"../Components/Applets/DeckPreview\";\r\nimport Home from \"../Components/Applets/Home\";\r\nimport Lifecounter from \"../Components/Applets/Lifecounter\";\r\nimport UserInfo from \"../Components/Applets/UserInfo\";\r\nimport SignIn from \"../Components/SignIn\";\r\n\r\ntype Route = Pick<RouteProps, \"component\"> & { path: string };\r\n\r\ntype RoutesType = {\r\n    IsPublic: (path: string) => boolean;\r\n    SignIn: Route;\r\n    Public: Route[];\r\n    Private: Route[];\r\n};\r\n\r\nconst PathMatch = (path: string) => new RegExp(`^${path.replace(/:[^/]*/, \"[^/]*\")}$`);\r\n\r\nconst Public: Route[] = [{ path: \"/lifecounter\", component: Lifecounter }];\r\nconst Private: Route[] = [\r\n    { path: \"/user\", component: UserInfo },\r\n    { path: \"/addDeck\", component: AddDeck },\r\n    { path: \"/decks/:deckName\", component: DeckPreview },\r\n    { path: \"/\", component: Home },\r\n];\r\n\r\nconst Routes: RoutesType = {\r\n    IsPublic: route => Public.some(({ path }) => route.match(PathMatch(path))),\r\n    SignIn: { path: \"/signin\", component: SignIn },\r\n    Public,\r\n    Private,\r\n};\r\nexport default Routes;\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport Logo from \"../Assets/logo.png\";\r\nimport GoogleApi from \"../Utility/GoogleApi\";\r\nimport SignInButton from \"./SignInButton\";\r\nimport { AppletContent } from \"./Styled/Grid\";\r\n\r\nconst SignIn: React.FC = () => {\r\n    return (\r\n        <AppletContent>\r\n            <Grid container justify=\"center\" alignItems=\"center\" style={{ padding: 25 }}>\r\n                <img src={Logo} alt=\"\" width=\"150px\" height=\"150px\" draggable={false} />\r\n            </Grid>\r\n            <Grid container justify=\"center\" alignItems=\"center\">\r\n                <SignInButton variant=\"contained\" onClick={GoogleApi.signIn} />\r\n            </Grid>\r\n        </AppletContent>\r\n    );\r\n};\r\n\r\nexport default SignIn;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router\";\r\nimport NotFound from \"../Components/NotFound\";\r\nimport Routes from \"./Routes\";\r\n\r\nconst AppRouter: React.FC = () => (\r\n    <Switch>\r\n        <Route exact {...Routes.SignIn} />\r\n        {Routes.Public.map(r => (\r\n            <Route key={r.path} exact {...r} />\r\n        ))}\r\n        {Routes.Private.map(r => (\r\n            <Route key={r.path} exact {...r} />\r\n        ))}\r\n        <Route exact component={NotFound} />\r\n    </Switch>\r\n);\r\nexport default AppRouter;\r\n","import { keyBy, omit } from \"lodash\";\r\nimport { AppStateT, CardList, DeckName, Decks, EmptyCards, FileIds, SetList, SymbolList } from \".\";\r\nimport { Action } from \"./Actions\";\r\nimport { combineReducers } from \"../Utility\";\r\n\r\nconst filesReducer = (state: FileIds, action: Action): FileIds => {\r\n    switch (action.type) {\r\n        case \"CreateDeck\":\r\n            return {\r\n                ...state,\r\n                [action.name]: action.link,\r\n            };\r\n        case \"DeleteDeck\":\r\n            return { ...omit(state, [action.name]) } as FileIds;\r\n    }\r\n    return state;\r\n};\r\n\r\nconst cardListReducer = (state: CardList, action: Action): CardList => {\r\n    switch (action.type) {\r\n        case \"AddCards\":\r\n            return {\r\n                ...state,\r\n                ...keyBy(action.cards, \"name\"),\r\n            };\r\n    }\r\n    return state;\r\n};\r\n\r\nconst symbolListReducer = (state: SymbolList, action: Action): SymbolList => {\r\n    switch (action.type) {\r\n        case \"AddSymbols\":\r\n            return action.symbols.reduce((obj, s) => ({ ...obj, [s.symbol]: s }), {});\r\n    }\r\n    return state;\r\n};\r\n\r\nconst setListReducer = (state: SetList, action: Action): SetList => {\r\n    switch (action.type) {\r\n        case \"AddSets\":\r\n            return action.sets.reduce((obj, s) => ({ ...obj, [s.code]: s }), {});\r\n    }\r\n    return state;\r\n};\r\n\r\nconst decksReducer = (state: Decks, action: Action): Decks => {\r\n    switch (action.type) {\r\n        case \"CreateDeck\":\r\n            return {\r\n                ...state,\r\n                [action.name]: {\r\n                    cards: EmptyCards(),\r\n                    ...omit(action, [\"type\", \"link\"]),\r\n                },\r\n            };\r\n        case \"UpdateDeck\":\r\n            return {\r\n                ...state,\r\n                [action.name]: {\r\n                    ...state[action.name],\r\n                    isDirty: true,\r\n                    ...omit(action, [\"type\"]),\r\n                },\r\n            };\r\n        case \"UpdateDeckCard\":\r\n            if (action.card.amount === 0) {\r\n                return {\r\n                    ...state,\r\n                    [action.deckName]: {\r\n                        ...state[action.deckName],\r\n                        cards: {\r\n                            ...state[action.deckName].cards,\r\n                            [action.sectionName]: omit(state[action.deckName].cards[action.sectionName], action.card.name),\r\n                        },\r\n                        isDirty: true,\r\n                    },\r\n                };\r\n            }\r\n            return {\r\n                ...state,\r\n                [action.deckName]: {\r\n                    ...state[action.deckName],\r\n                    cards: {\r\n                        ...state[action.deckName].cards,\r\n                        [action.sectionName]: {\r\n                            ...state[action.deckName].cards[action.sectionName],\r\n                            [action.card.name]: {\r\n                                ...state[action.deckName].cards[action.sectionName][action.card.name],\r\n                                ...action.card,\r\n                            },\r\n                        },\r\n                    },\r\n                    isDirty: true,\r\n                },\r\n            };\r\n        case \"DeleteDeck\":\r\n            return { ...omit(state, [action.name]) } as Decks;\r\n    }\r\n    return state;\r\n};\r\n\r\nconst selectedDeckReducer = (state: string, action: Action): string => {\r\n    switch (action.type) {\r\n        case \"SelectDeck\":\r\n            return action.name;\r\n        case \"DeleteDeck\":\r\n            return action.name === state ? DeckName.Collection : state;\r\n    }\r\n    return state;\r\n};\r\n\r\nexport const reducer = combineReducers<AppStateT, Action>({\r\n    files: filesReducer,\r\n    cardList: cardListReducer,\r\n    symbolList: symbolListReducer,\r\n    setList: setListReducer,\r\n    decks: decksReducer,\r\n    selectedDeck: selectedDeckReducer,\r\n});\r\n","import React from \"react\";\r\n\r\nconst useClickaway = <T extends HTMLElement>(onClickaway: () => void) => {\r\n    const elemRef = React.createRef<T>();\r\n\r\n    const handleClickaway = (event: Event) => {\r\n        if (elemRef.current && !elemRef?.current.contains(event.target as Node)) {\r\n            onClickaway();\r\n        }\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        document.addEventListener(\"click\", handleClickaway);\r\n        document.addEventListener(\"touchend\", handleClickaway);\r\n        return () => {\r\n            document.removeEventListener(\"click\", handleClickaway);\r\n            document.removeEventListener(\"touchend\", handleClickaway);\r\n        };\r\n    });\r\n\r\n    return [elemRef];\r\n};\r\nexport default useClickaway;\r\n","import { Typography } from \"@material-ui/core\";\r\nimport styled, { css } from \"../Styled/Theme\";\r\n\r\ntype Props = {\r\n    open: boolean;\r\n};\r\n\r\nconst DrawerSubtitle = styled(Typography)<Props>`\r\n    color: ${p => p.theme.palette.grey[500]};\r\n    padding: ${p => p.theme.spacing(0, 2, 0, 2)};\r\n\r\n    transition: padding 0.5s ease-in-out, opacity 0.5s ease-in-out;\r\n\r\n    height: 0;\r\n    opacity: 1;\r\n\r\n    ${p =>\r\n        !p.open &&\r\n        css`\r\n            opacity: 0;\r\n        `}\r\n    ${p =>\r\n        p.open &&\r\n        css`\r\n            padding: ${p.theme.spacing(2, 2, 4, 2)};\r\n        `}\r\n`;\r\nexport default DrawerSubtitle;\r\n","import { List, ListItem, ListItemAvatar, ListItemText, Tooltip } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { DrawerAvatar } from \"../Styled/Grid\";\r\nimport { LifecounterIcon } from \"../Styled/Icons\";\r\nimport styled from \"../Styled/Theme\";\r\nimport DrawerSubtitle from \"./DrawerSubtitle\";\r\n\r\nconst StyledItemText = styled(ListItemText)`\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n`;\r\n\r\ntype Props = {\r\n    open: boolean;\r\n    closeDrawer: () => void;\r\n};\r\n\r\nconst DrawerApps: React.FC<Props> = ({ open, closeDrawer }) => {\r\n    const { pathname } = useLocation();\r\n\r\n    return (\r\n        <>\r\n            <DrawerSubtitle open={open}>Apps</DrawerSubtitle>\r\n            <List>\r\n                <Tooltip title=\"Lifecounter\" placement=\"right\">\r\n                    <ListItem component={Link} to=\"/lifecounter\" onClick={closeDrawer} button selected={!!pathname.match(/^\\/lifecounter$/)}>\r\n                        <ListItemAvatar>\r\n                            <DrawerAvatar alt=\"Lifecounter\">\r\n                                <LifecounterIcon />\r\n                            </DrawerAvatar>\r\n                        </ListItemAvatar>\r\n                        <StyledItemText primary=\"Lifecounter\" />\r\n                    </ListItem>\r\n                </Tooltip>\r\n            </List>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default DrawerApps;\r\n","import { Badge } from \"@material-ui/core\";\r\nimport { AvatarProps } from \"@material-ui/core/Avatar\";\r\nimport CollectionsIcon from \"@material-ui/icons/Collections\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport React from \"react\";\r\nimport { Deck, DeckName, getDeckName } from \"../../State\";\r\nimport { DrawerAvatar } from \"../Styled/Grid\";\r\n\r\nconst getDeckIcon = (name: string) => {\r\n    return name === DeckName.Wishlist ? <FavoriteIcon /> : <CollectionsIcon />;\r\n};\r\n\r\ntype Props = {\r\n    deck: Deck;\r\n    variant?: AvatarProps[\"variant\"];\r\n};\r\n\r\nconst DeckAvatar: React.FC<Props> = ({ deck, variant }) => {\r\n    return (\r\n        <Badge\r\n            invisible={!deck?.isDirty}\r\n            color=\"primary\"\r\n            overlap=\"circle\"\r\n            badgeContent=\" \"\r\n            anchorOrigin={{\r\n                vertical: \"bottom\",\r\n                horizontal: \"right\",\r\n            }}\r\n        >\r\n            <DrawerAvatar variant={variant} alt={getDeckName(deck?.name)} src={deck?.previewUrl}>\r\n                {getDeckIcon(deck?.name)}\r\n            </DrawerAvatar>\r\n        </Badge>\r\n    );\r\n};\r\nexport default DeckAvatar;\r\n","import { Divider, List, ListItem, ListItemAvatar, ListItemText, Tooltip } from \"@material-ui/core\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport React from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { AppState, Deck, DeckName, getDeckName } from \"../../State\";\r\nimport { DrawerAvatar } from \"../Styled/Grid\";\r\nimport styled from \"../Styled/Theme\";\r\nimport DeckAvatar from \"./DeckAvatar\";\r\nimport DrawerSubtitle from \"./DrawerSubtitle\";\r\n\r\nconst StyledItemText = styled(ListItemText)`\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n`;\r\n\r\ntype Props = {\r\n    open: boolean;\r\n    closeDrawer: () => void;\r\n};\r\n\r\nconst DrawerDeckList: React.FC<Props> = ({ open, closeDrawer }) => {\r\n    const { pathname } = useLocation();\r\n    const [state] = React.useContext(AppState);\r\n\r\n    const renderItem = (deck: Deck) => (\r\n        <Tooltip key={deck.name} title={open ? \"\" : (state.decks[deck.name].isDirty ? \"*\" : \"\") + getDeckName(deck.name)} placement=\"right\">\r\n            <ListItem\r\n                component={Link}\r\n                to={`/decks/${encodeURIComponent(deck.name)}`}\r\n                onClick={closeDrawer}\r\n                button\r\n                selected={state.selectedDeck === deck.name && !!pathname.match(/^\\/decks\\//)}\r\n            >\r\n                <ListItemAvatar>\r\n                    <DeckAvatar deck={deck} />\r\n                </ListItemAvatar>\r\n                <StyledItemText primary={getDeckName(deck.name)} />\r\n            </ListItem>\r\n        </Tooltip>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <Divider />\r\n            <DrawerSubtitle open={open}>Decks</DrawerSubtitle>\r\n            <List>\r\n                {renderItem(state.decks[DeckName.Collection])}\r\n                {renderItem(state.decks[DeckName.Wishlist])}\r\n            </List>\r\n            <Divider />\r\n            <List>\r\n                <Tooltip title=\"Add deck\" placement=\"right\">\r\n                    <ListItem component={Link} to=\"/addDeck\" onClick={closeDrawer} button selected={!!pathname.match(/^\\/addDeck$/)}>\r\n                        <ListItemAvatar>\r\n                            <DrawerAvatar alt=\"Add deck\">\r\n                                <AddCircleOutlineIcon />\r\n                            </DrawerAvatar>\r\n                        </ListItemAvatar>\r\n                        <StyledItemText primary=\"Add deck\" />\r\n                    </ListItem>\r\n                </Tooltip>\r\n            </List>\r\n            <Divider />\r\n            <List>\r\n                {Object.values(state.decks)\r\n                    .filter(deck => deck.name !== DeckName.Collection && deck.name !== DeckName.Wishlist)\r\n                    .map(deck => renderItem(deck))}\r\n            </List>\r\n        </>\r\n    );\r\n};\r\nexport default DrawerDeckList;\r\n","import { BottomNavigation, BottomNavigationAction } from \"@material-ui/core\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport React from \"react\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\nimport { AppState, getDeckName } from \"../../State\";\r\nimport DeckAvatar from \"./DeckAvatar\";\r\nimport styled from \"../Styled/Theme\";\r\n\r\nconst StyledNavigation = styled(BottomNavigation)`\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 100%;\r\n    background-color: ${p => p.theme.palette.secondary.dark};\r\n`;\r\n\r\nconst DeckAction = styled(BottomNavigationAction)`\r\n    flex-grow: 10;\r\n\r\n    & .MuiBottomNavigationAction-label {\r\n        width: 100%;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n`;\r\n\r\nconst DeckIcon = styled.div`\r\n    height: 24px;\r\n    width: 24px;\r\n    position: relative;\r\n\r\n    & > * {\r\n        position: absolute;\r\n        bottom: 0;\r\n        transform: translateX(-50%);\r\n    }\r\n`;\r\n\r\ntype Props = {\r\n    open: boolean;\r\n    toggleOpen: () => void;\r\n};\r\n\r\nconst MobileNavigation: React.FC<Props> = ({ open, toggleOpen }) => {\r\n    const { pathname } = useLocation();\r\n    const history = useHistory();\r\n    const [state] = React.useContext(AppState);\r\n    const [value, setValue] = React.useState(0);\r\n\r\n    React.useEffect(() => setValue(open ? 2 : pathname.match(\"/addDeck\") ? 0 : 1), [open, pathname]);\r\n\r\n    const onChange = (tab: number) => {\r\n        setValue(tab);\r\n        switch (tab) {\r\n            case 0:\r\n                history.push(\"/addDeck/\");\r\n                return;\r\n            case 1:\r\n                history.push(`/decks/${encodeURIComponent(state.decks[state.selectedDeck].name)}`);\r\n                return;\r\n            case 2:\r\n                toggleOpen();\r\n                return;\r\n        }\r\n        throw Error(`Invalid tab number ${tab}`);\r\n    };\r\n\r\n    return (\r\n        <StyledNavigation value={value} onChange={(_, val) => onChange(val)} showLabels>\r\n            <BottomNavigationAction label=\"Add deck\" icon={<AddCircleOutlineIcon />} />\r\n            <DeckAction\r\n                label={getDeckName(state.selectedDeck)}\r\n                icon={\r\n                    <DeckIcon>\r\n                        <DeckAvatar deck={state.decks[state.selectedDeck]} />\r\n                    </DeckIcon>\r\n                }\r\n            />\r\n            <BottomNavigationAction label=\"Menu\" icon={<MenuIcon />} />\r\n        </StyledNavigation>\r\n    );\r\n};\r\nexport default MobileNavigation;\r\n","import { AppBar, Avatar, Container, Divider, Drawer, IconButton, Link as MUILink, Toolbar, Tooltip, Typography, useMediaQuery } from \"@material-ui/core\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport Axios, { AxiosResponse } from \"axios\";\r\nimport React from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { isNullOrUndefined } from \"util\";\r\nimport AppRouter from \"../Routes/AppRouter\";\r\nimport Routes from \"../Routes/Routes\";\r\nimport { AppState, initialState, LoginState } from \"../State\";\r\nimport { reducer } from \"../State/Reducers\";\r\nimport GoogleApi, { GoogleProfile } from \"../Utility/GoogleApi\";\r\nimport Scry from \"../Utility/Scry\";\r\nimport { ScryCardSymbol, ScrySet } from \"../Utility/Scry/Types\";\r\nimport useClickaway from \"../Utility/useClickaway\";\r\nimport DrawerApps from \"./Drawer/DrawerApps\";\r\nimport DrawerDeckList from \"./Drawer/DrawerDeckList\";\r\nimport MobileNavigation from \"./Drawer/MobileNavigation\";\r\nimport Loading from \"./Loading\";\r\nimport SignInButton from \"./SignInButton\";\r\nimport { FlexCol } from \"./Styled/Grid\";\r\nimport styled, { ComponentProps, css, MainTheme } from \"./Styled/Theme\";\r\nimport TooltipButton from \"./Styled/TooltipButton\";\r\n\r\nconst bodyOpen = css<ComponentProps<any>>`\r\n    margin-left: ${p => p.theme.constants.drawerWidth};\r\n    width: calc(100% - ${p => p.theme.constants.drawerWidth});\r\n    transition: ${p =>\r\n        p.theme.transitions.create([\"width\", \"margin\"], {\r\n            easing: p.theme.transitions.easing.sharp,\r\n            duration: p.theme.transitions.duration.enteringScreen,\r\n        })};\r\n`;\r\n\r\nconst bodyClose = css<ComponentProps<any>>`\r\n    transition: ${p =>\r\n        p.theme.transitions.create([\"width\", \"margin\"], {\r\n            easing: p.theme.transitions.easing.sharp,\r\n            duration: p.theme.transitions.duration.leavingScreen,\r\n        })};\r\n`;\r\n\r\nconst CustomAppBar = styled(AppBar)<{ open: boolean }>`\r\n    z-index: ${p => p.theme.zIndex.drawer + 1};\r\n    ${bodyClose}\r\n    ${p => p.open && bodyOpen}\r\n    ${p =>\r\n        p.open &&\r\n        css`\r\n            ${p.theme.breakpoints.down(\"xs\")} {\r\n                & {\r\n                    width: 100%;\r\n                    margin-left: 0;\r\n                }\r\n            }\r\n        `}\r\n`;\r\n\r\nconst MenuButton = styled(IconButton)<{ open: boolean }>`\r\n    margin-right: 36px;\r\n    ${p =>\r\n        p.open &&\r\n        css`\r\n            display: none;\r\n        `}\r\n\r\n    ${p => p.theme.breakpoints.down(\"xs\")} {\r\n        & {\r\n            margin-right: ${p => p.theme.spacing(1)}px;\r\n            display: inline-block;\r\n        }\r\n    }\r\n`;\r\n\r\nconst drawerOpen = css<ComponentProps<any>>`\r\n    width: ${p => p.theme.constants.drawerWidth};\r\n    overflow-x: hidden;\r\n    transition: ${p =>\r\n        [\"width\", \"max-height\"]\r\n            .map(d =>\r\n                p.theme.transitions.create(d, {\r\n                    easing: p.theme.transitions.easing.sharp,\r\n                    duration: p.theme.transitions.duration.enteringScreen,\r\n                })\r\n            )\r\n            .join(\", \")};\r\n\r\n    ${p => p.theme.breakpoints.down(\"xs\")} {\r\n        & {\r\n            width: 100%;\r\n            height: auto;\r\n            max-height: calc(100% - 56px);\r\n        }\r\n    }\r\n`;\r\n\r\nconst drawerClose = css<ComponentProps<any>>`\r\n    width: ${p => p.theme.constants.drawerWidthClosed};\r\n\r\n    ${p => p.theme.breakpoints.down(\"xs\")} {\r\n        & {\r\n            max-height: 0;\r\n        }\r\n    }\r\n`;\r\n\r\nconst CustomDrawer = styled(Drawer)<{ open?: boolean }>`\r\n    flex-shrink: 0;\r\n    white-space: nowrap;\r\n    ${drawerOpen}\r\n    ${p => !p.open && drawerClose}\r\n\r\n    .MuiDrawer-paper {\r\n        ${drawerOpen}\r\n        ${p => !p.open && drawerClose}\r\n        overflow: hidden;\r\n    }\r\n`;\r\n\r\nconst DrawerToolbar = styled(Toolbar)`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    z-index: 1;\r\n`;\r\n\r\nconst DrawerBody = styled.div<{ open?: boolean }>`\r\n    overflow: hidden;\r\n    padding-bottom: ${p => p.theme.spacing(6)}px;\r\n    ${p =>\r\n        p.open &&\r\n        css`\r\n            overflow-y: auto;\r\n        `}\r\n\r\n    &::after {\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        content: \"\";\r\n        pointer-events: none;\r\n        background: linear-gradient(\r\n            0deg,\r\n            ${p => p.theme.palette.background.paper} ${p => p.theme.spacing(1)}px,\r\n            transparent ${p => p.theme.spacing(8)}px,\r\n            transparent 100%\r\n        );\r\n    }\r\n`;\r\n\r\nconst NoGutterContainer = styled(Container)`\r\n    ${p => p.theme.breakpoints.down(\"xs\")} {\r\n        & {\r\n            padding: 0;\r\n        }\r\n    }\r\n`;\r\n\r\nconst MainContent = styled.div<{ open: boolean }>`\r\n    flex-grow: 1;\r\n    padding: ${p => p.theme.spacing(2)}px;\r\n    margin-left: ${p => p.theme.constants.drawerWidthClosed};\r\n    ${bodyClose}\r\n    ${p => p.open && bodyOpen}\r\n\r\n    ${p =>\r\n        p.open &&\r\n        css`\r\n            ${p.theme.breakpoints.down(\"sm\")} {\r\n                & {\r\n                    margin-left: ${p => p.theme.constants.drawerWidthClosed};\r\n                    width: calc(100% - ${p => p.theme.constants.drawerWidthClosed});\r\n                }\r\n            }\r\n        `}\r\n    ${p => p.theme.breakpoints.down(\"xs\")} {\r\n        & {\r\n            width: 100%;\r\n            margin-left: 0;\r\n            margin-bottom: ${p => p.theme.spacing(7)}px;\r\n            padding: ${p => p.theme.spacing(1)}px;\r\n        }\r\n    }\r\n`;\r\n\r\nconst ProfileAvatar = styled.div`\r\n    margin-right: ${p => p.theme.spacing(1)}px;\r\n`;\r\n\r\nconst App: React.FC = () => {\r\n    const history = useHistory();\r\n    const isMobile = useMediaQuery(MainTheme.breakpoints.down(\"xs\"));\r\n    const isSmall = useMediaQuery(MainTheme.breakpoints.down(\"sm\"));\r\n    const [state, dispatch] = React.useReducer(reducer, initialState);\r\n\r\n    const [profile, setProfile] = React.useState<GoogleProfile>();\r\n    const [isSignedIn, setIsSignedIn] = React.useState<boolean | undefined>(undefined);\r\n\r\n    const handleSignoutClick = () => {\r\n        GoogleApi.signOut();\r\n        setProfile(undefined);\r\n    };\r\n\r\n    const [open, setOpen] = React.useState(false);\r\n    const handleDrawerToggle = () => setOpen(p => !p);\r\n    const [drawerRef] = useClickaway<HTMLDivElement>(() => isSmall && setOpen(false));\r\n\r\n    React.useEffect(() => {\r\n        GoogleApi.initClient(async (signedIn: boolean) => {\r\n            let redirect = history.location.pathname;\r\n            if (!signedIn) {\r\n                setIsSignedIn(false);\r\n                if (!Routes.IsPublic(redirect)) history.push(Routes.SignIn.path);\r\n                return;\r\n            }\r\n            if (redirect.match(Routes.SignIn.path)) redirect = \"/\";\r\n            history.push(redirect);\r\n\r\n            await GoogleApi.prepareAppData(dispatch, state)();\r\n\r\n            setProfile(GoogleApi.getProfile());\r\n            setIsSignedIn(true);\r\n        });\r\n        Scry.Symbology.All()\r\n            .then(symbols => {\r\n                const endpoint = Axios.create({\r\n                    baseURL: \"\",\r\n                    responseType: \"text\",\r\n                    headers: {\r\n                        \"Content-Type\": \"image/svg+xml\",\r\n                    },\r\n                });\r\n                return Promise.all(\r\n                    symbols.map(symbol =>\r\n                        endpoint.get<string, AxiosResponse<ScryCardSymbol>>(symbol.svg_uri, { transformResponse: r => ({ ...symbol, svg: r }) })\r\n                    )\r\n                );\r\n            })\r\n            .then(responses => {\r\n                dispatch({\r\n                    type: \"AddSymbols\",\r\n                    symbols: responses.map(r => r.data),\r\n                });\r\n            })\r\n            .then(Scry.Sets.All)\r\n            .then(sets => {\r\n                const endpoint = Axios.create({\r\n                    baseURL: \"\",\r\n                    responseType: \"text\",\r\n                    headers: {\r\n                        \"Content-Type\": \"image/svg+xml\",\r\n                    },\r\n                });\r\n                return Promise.all(\r\n                    sets.map(set => endpoint.get<string, AxiosResponse<ScrySet>>(set.icon_svg_uri, { transformResponse: r => ({ ...set, icon_svg: r }) }))\r\n                );\r\n            })\r\n            .then(responses => {\r\n                dispatch({\r\n                    type: \"AddSets\",\r\n                    sets: responses.map(r => r.data),\r\n                });\r\n            });\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    return (\r\n        <AppState.Provider value={[state, dispatch]}>\r\n            <LoginState.Provider value={{ profile, signOut: handleSignoutClick }}>\r\n                <CustomAppBar position=\"sticky\" open={open}>\r\n                    <Toolbar>\r\n                        {!isMobile && (\r\n                            <MenuButton color=\"inherit\" aria-label=\"open drawer\" onClick={handleDrawerToggle} edge=\"start\" open={open}>\r\n                                <MenuIcon />\r\n                            </MenuButton>\r\n                        )}\r\n                        <Typography variant=\"h6\" style={{ overflow: \"hidden\" }}>\r\n                            <MUILink variant=\"inherit\" color=\"inherit\" underline=\"none\" component={Link} to={isSignedIn ? \"/\" : Routes.SignIn.path}>\r\n                                MTGCollection\r\n                            </MUILink>\r\n                        </Typography>\r\n                        <FlexCol />\r\n                        {isSignedIn ? (\r\n                            <>\r\n                                {!isNullOrUndefined(profile) && (\r\n                                    <ProfileAvatar>\r\n                                        <Tooltip title={`Signed in as ${profile.getGivenName()} (${profile.getEmail()})`}>\r\n                                            <Avatar component={Link} to=\"/user\" alt={profile.getGivenName()} src={profile.getImageUrl()} />\r\n                                        </Tooltip>\r\n                                    </ProfileAvatar>\r\n                                )}\r\n                                <TooltipButton title=\"SignOut\" onClick={handleSignoutClick}>\r\n                                    <ExitToAppIcon />\r\n                                </TooltipButton>\r\n                            </>\r\n                        ) : (\r\n                            isSignedIn !== undefined && <SignInButton onClick={GoogleApi.signIn} />\r\n                        )}\r\n                    </Toolbar>\r\n                </CustomAppBar>\r\n                <CustomDrawer open={open} anchor={isMobile ? \"bottom\" : \"left\"} variant=\"permanent\" ref={drawerRef}>\r\n                    <DrawerToolbar>\r\n                        <IconButton onClick={handleDrawerToggle}>{isMobile ? <CloseIcon /> : <ChevronLeftIcon />}</IconButton>\r\n                    </DrawerToolbar>\r\n                    <Divider />\r\n                    <DrawerBody open={open}>\r\n                        <DrawerApps open={open} closeDrawer={() => isMobile && setOpen(false)} />\r\n                        {isSignedIn && <DrawerDeckList open={open} closeDrawer={() => isMobile && setOpen(false)} />}\r\n                    </DrawerBody>\r\n                </CustomDrawer>\r\n                <NoGutterContainer maxWidth=\"xl\">\r\n                    <MainContent open={open}>{isSignedIn === undefined ? <Loading /> : <AppRouter />}</MainContent>\r\n                </NoGutterContainer>\r\n                {isMobile && <MobileNavigation open={open} toggleOpen={handleDrawerToggle} />}\r\n            </LoginState.Provider>\r\n        </AppState.Provider>\r\n    );\r\n};\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === \"localhost\" ||\r\n        // [::1] is the IPv6 localhost address.\r\n        window.location.hostname === \"[::1]\" ||\r\n        // 127.0.0.1/8 is considered localhost for IPv4.\r\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n    if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL((process as { env: { [key: string]: string } }).env.PUBLIC_URL, window.location.href);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        window.addEventListener(\"load\", () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Let's check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl, config);\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n                });\r\n            } else {\r\n                // Is not localhost. Just register service worker\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then(registration => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing;\r\n                if (installingWorker == null) {\r\n                    return;\r\n                }\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === \"installed\") {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the updated precached content has been fetched,\r\n                            // but the previous service worker will still serve the older\r\n                            // content until all client tabs are closed.\r\n                            console.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n                            // Execute callback\r\n                            if (config && config.onUpdate) {\r\n                                config.onUpdate(registration);\r\n                            }\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log(\"Content is cached for offline use.\");\r\n\r\n                            // Execute callback\r\n                            if (config && config.onSuccess) {\r\n                                config.onSuccess(registration);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.error(\"Error during service worker registration:\", error);\r\n        });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl)\r\n        .then(response => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            const contentType = response.headers.get(\"content-type\");\r\n            if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then(registration => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log(\"No internet connection found. App is running in offline mode.\");\r\n        });\r\n}\r\n\r\nexport function unregister() {\r\n    if (\"serviceWorker\" in navigator) {\r\n        navigator.serviceWorker.ready.then(registration => {\r\n            registration.unregister();\r\n        });\r\n    }\r\n}\r\n","import { CssBaseline } from \"@material-ui/core\";\r\nimport { ThemeProvider as MUIThemeProvider, StylesProvider } from \"@material-ui/core/styles\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport { ThemeProvider } from \"styled-components\";\r\nimport App from \"./Components/App\";\r\nimport { MainTheme } from \"./Components/Styled/Theme\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n    <HashRouter basename={process.env.PUBLIC_URL}>\r\n        <StylesProvider injectFirst>\r\n            <ThemeProvider theme={MainTheme}>\r\n                <MUIThemeProvider theme={MainTheme}>\r\n                    <CssBaseline />\r\n                    <App />\r\n                </MUIThemeProvider>\r\n            </ThemeProvider>\r\n        </StylesProvider>\r\n    </HashRouter>,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\nserviceWorker.register();\r\n"],"sourceRoot":""}